<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"qixinbo.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Be interesting!">
<meta property="og:type" content="website">
<meta property="og:title" content="亓欣波">
<meta property="og:url" content="http://qixinbo.github.io/page/7/index.html">
<meta property="og:site_name" content="亓欣波">
<meta property="og:description" content="Be interesting!">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Xin-Bo Qi(亓欣波)">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://qixinbo.github.io/page/7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>亓欣波</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">亓欣波</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Hi, I am Xin-Bo Qi (亓欣波)</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-scholar">

    <a href="/scholar/" rel="section"><i class="bar-chart fa-fw"></i>scholar</a>

  </li>
        <li class="menu-item menu-item-sources">

    <a href="/sources/" rel="section"><i class="rss fa-fw"></i>sources</a>

  </li>
        <li class="menu-item menu-item-gallery">

    <a href="/gallery/" rel="section"><i class="file-image-o fa-fw"></i>gallery</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404.html" rel="section"><i class="heartbeat fa-fw"></i>Commonweal 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qixinbo.github.io/2018/01/19/fcitx-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Xin-Bo Qi(亓欣波)">
      <meta itemprop="description" content="Be interesting!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="亓欣波">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/19/fcitx-install/" class="post-title-link" itemprop="url">linux系统安装fcitx框架和搜狗输入法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-19 00:00:00" itemprop="dateCreated datePublished" datetime="2018-01-19T00:00:00+08:00">2018-01-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-25 15:20:30" itemprop="dateModified" datetime="2021-03-25T15:20:30+08:00">2021-03-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/01/19/fcitx-install/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/01/19/fcitx-install/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018-1-19更新：加入自动安装fcitx，以及安装搜狗输入法。</p>
<p>注：在Linux mint系统下，已自带fcitx，但此时安装搜狗后，fcitx并未识别出sogou。<br>以下是自己的经验：<br>（1）完全卸载fcitx：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt remove fcitx* </span><br><span class="line">sudo apt autoremove</span><br></pre></td></tr></table></figure>
<p>（2）从搜狗官网下载sogou Linux版，双击安装。<br>此时其实sogou也能直接用，但经常自己崩溃，所以还要进行下面的步骤。<br>（3）再次安装fcitx框架：<br>（3.1）从”菜单”——“Preference”——“input method”中安装fcitx，并安装simplified Chinese语言包。<br>（3.2）在fcitx配置的input Method中可以看到sogou输入法。</p>
<hr>
<p>以下是手动编译fcitx源码。</p>
<p>参考文章：</p>
<p>（1）<a target="_blank" rel="noopener" href="http://intijk.com/others/%E6%94%BE%E5%BC%83i-bus%EF%BC%8C%E4%BD%BF%E7%94%A8fcitx.html">http://intijk.com/others/%E6%94%BE%E5%BC%83i-bus%EF%BC%8C%E4%BD%BF%E7%94%A8fcitx.html</a><br>（2）<a target="_blank" rel="noopener" href="http://www.cnblogs.com/jan5/articles/3351574.html">http://www.cnblogs.com/jan5/articles/3351574.html</a></p>
<h1 id="下载并编译fcitx源码。"><a href="#下载并编译fcitx源码。" class="headerlink" title="下载并编译fcitx源码。"></a>下载并编译fcitx源码。</h1><p>电脑是Ubuntu10.10，这里用的是Fcitx4.0.0版本，太高或太低版本都不好使。<br>如果系统版本较新，可以直接从fcitx的github页面下载最新的master分支。<br>注意：旧版的fcitx可以直接make，但新版的fcitx需要cmake，一定注意其依赖关系。</p>
<p>下载列表：<a target="_blank" rel="noopener" href="https://code.google.com/p/fcitx/downloads/list">https://code.google.com/p/fcitx/downloads/list</a><br>然后参照INSTALL文件进行安装。</p>
<p>测试是否安装成功：<br>输入fcitx -h，如果安装成功，应该能得到帮助文件的，如下：<br>[root@CentOS ~]# fcitx -h<br>Usage: fcitx [OPTION]<br>-d run as daemon(default)<br>-D don’t run as daemon<br>-c (re)create config file in home directory and then exit<br>-n[im name] run as specified name<br>-v display the version information and exit<br>-h display this help and exit</p>
<h1 id="配置Fcitx为默认输入法"><a href="#配置Fcitx为默认输入法" class="headerlink" title="配置Fcitx为默认输入法"></a>配置Fcitx为默认输入法</h1><h2 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h2><p>1、新建配置文件 vim /etc/X11/xinit/xinput.d/fcitx.conf ，内容为：</p>
<p>XIM=fcitx<br>XIM_PROGRAM=/usr/local/bin/fcitx # 注意这个文件必须存在，请确认它的位置<br>XIM_ARGS=”-d”<br>GTK_IM_MODULE=fcitx<br>QT_IM_MODULE =fcitx</p>
<p>2、然后在/etc/alternatives/目录下，将符号链接xinputrc删除，重新建一个：</p>
<p>mv /etc/alternatives/xinputrc /etc/alternatives/xinputrc.bak<br>ln -s /etc/X11/xinit/xinput.d/fcitx.conf /etc/alternatives/xinputrc</p>
<p>3、最后，注销然后登陆，在菜单 系统—首选项—输入法 里面选择“启用输入法特性”，选择“使用fcitx”，然后“注销”，登录后按“ctrl+空格”就可激活fcitx输入法。</p>
<p>注：如果你使用的桌面是英文环境的，还需要在使用用户的用户目录.bashrc配置文件里添加如下内容：</p>
<p>export LANG=”zh_CN.UTF-8″<br>export LC_CTYPE=”zh_CN.UTF-8″<br>export XIM=fcitx<br>export XIM_PROGRAM=fcitx<br>export GTK_IM_MODULE=xim<br>export XMODIFIERS=”@im=fcitx”</p>
<h2 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h2><p>1、新建配置文件：vim /etc/X11/xinit/xinput.d/fcitx，内容为：</p>
<p>XIM=fcitx<br>XIM_PROGRAM=fcitx<br>GTK_IM_MOUDLE=fcitx<br>QT_IM_MOUDLE=fcitx</p>
<p>保存退出，重启电脑</p>
<p>2、查询Fcitx是否开机运行。终端下输入：fcitx，应该是提示：Start FCITX error. Another XIM daemon named SCIM is running？这样就对了，直接到”4“</p>
<p>3、如果没任何提示，则：ln -s /etc/X11/xinit/Xinput.d/fcitx /$HOME/.xinputrc</p>
<p>4、输入： fcitx -nb ，即可看到输入框</p>
<p>默认fcitx启动后，是在后台运行的，因此看不到输入框，用上面的命令就可以调出来了。<br>ctrl+空格 切换输入法。<br>配置fcitx输入法修改vim ~/.fcitx/config文件中的相应偏好设置。</p>
<p>—————————————————————————————–</p>
<h1 id="可能遇到的问题："><a href="#可能遇到的问题：" class="headerlink" title="可能遇到的问题："></a>可能遇到的问题：</h1><p>(1)CMake Error at CMakeLists.txt:8 (find_package):<br>  Could not find a package configuration file provided by “ECM” (requested<br>  version 1.4.0) with any of the following names:<br>    ECMConfig.cmake<br>    ecm-config.cmake<br>  Add the installation prefix of “ECM” to CMAKE_PREFIX_PATH or set “ECM_DIR”<br>  to a directory containing one of the above files.  If “ECM” provides a<br>  separate development package or SDK, be sure it has been installed.<br>  — Configuring incomplete, errors occurred!</p>
<p>解决方法：到这个页面 <a target="_blank" rel="noopener" href="https://launchpad.net/ubuntu/+source/extra-cmake-modules/1.4.0-0ubuntu1">https://launchpad.net/ubuntu/+source/extra-cmake-modules/1.4.0-0ubuntu1</a> 下载 extra-cmake-modules_1.4.0.orig.tar.xz</p>
<p>解压后:<br>    cd extra-cmake-modules-1.4.0<br>  cmake .<br>  make<br>  sudo make install</p>
<p>(2)— Found PkgConfig: /usr/bin/pkg-config (found version “0.26”)<br>  — Could NOT find XKBCommon_XKBCommon (missing:  XKBCommon_XKBCommon_LIBRARY XKBCommon_XKBCommon_INCLUDE_DIR)<br>CMake Error at /usr/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:108 (message):<br>  Could NOT find XKBCommon (missing: XKBCommon_LIBRARIES XKBCommon) (Required<br>  is at least version “0.5.0”)</p>
<p>处理方法：<br>    wget <a target="_blank" rel="noopener" href="http://xkbcommon.org/download/libxkbcommon-0.5.0.tar.xz">http://xkbcommon.org/download/libxkbcommon-0.5.0.tar.xz</a><br>  tar xf libxkbcommon-0.5.0.tar.xz<br>  ./configure —prefix=/usr —libdir=/usr/lib/x86_64-linux-gnu —disable-x11<br>  make<br>  sudo make install</p>
<p>  编译libxkbcommon用到yacc，如果没有这个命令，会遇到下面的错误，yacc在 bison软件包中<br>  sudo apt-get install bison</p>
<p>(3)- package ‘enchant’ not found<br>— Could NOT find Enchant (missing:  ENCHANT_LIBRARIES ENCHANT_INCLUDE_DIR ENCHANT_API_COMPATIBLE)</p>
<p>网上搜索并安装enchant包即可。</p>
<p>(4) Could NOT find LibXml2 (missing: LIBXML2_LIBRARIES LIBXML2_INCLUDE_DIR)</p>
<p>网上搜索并安装libxml2包即可。</p>
<p>(5)Could NOT find XkbFile (missing: XKBFILE_LIBRARIES   XKBFILE_MAIN_INCLUDE_DIR)</p>
<p>网上搜索并安装xkbfile包即可。按照软件的文件目录，将相应的文件复制到系统路径中。</p>
<p>(6)如果出现</p>
<p>/usr/local/bin/fcitx-config-gtk: error while loading shared libraries: libfcitx-config.so.4: cannot open shared object file: No such file or directory</p>
<p>只需sudo ldconfig<br>再不行就加一个符号链接<br>sudo ln -s /usr/local/lib/libfcitx-config.so /usr/lib/libfcitx-config.so.4</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qixinbo.github.io/2018/01/12/abaqus-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Xin-Bo Qi(亓欣波)">
      <meta itemprop="description" content="Be interesting!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="亓欣波">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/12/abaqus-install/" class="post-title-link" itemprop="url">linux系统abaqus安装过程及子程序编译器设置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-12 00:00:00" itemprop="dateCreated datePublished" datetime="2018-01-12T00:00:00+08:00">2018-01-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-25 15:20:30" itemprop="dateModified" datetime="2021-03-25T15:20:30+08:00">2021-03-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/01/12/abaqus-install/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/01/12/abaqus-install/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018-5-2更新：<br>更改abaqus的执行命令，统一使用绝对路径。<br>在abaqus cae 后面增加-mesa选项，以防有的电脑显卡不支持。</p>
<p>2018-1-12更新：<br>笔记本重装系统以后，再次安装Abaqus，修复了一些细节问题。<br>遇到了几个新的问题，并附解决方法。</p>
<p>2017-6-20更新：<br>在新笔记本上重新安装了一遍，完善了部分流程，修正了部分错误。</p>
<hr>
<p>本文是在新浪博客Install ABAQUS v6.10 in Ubuntu 12.04 基础上所写，希望可以使大家少走弯路。<br>原文地址为<a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_648bf4210100vxfk.html">http://blog.sina.com.cn/s/blog_648bf4210100vxfk.html</a>.<br>主要更新为license服务器的设置和子程序上与Intel Fortran编译器的链接上。</p>
<h1 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h1><p>先需要安装 g++ libstdc++5 csh(貌似没用到)。  </p>
<h1 id="安装Abaqus的Documentation（也可以不安装）"><a href="#安装Abaqus的Documentation（也可以不安装）" class="headerlink" title="安装Abaqus的Documentation（也可以不安装）"></a>安装Abaqus的Documentation（也可以不安装）</h1><h2 id="加载-iso"><a href="#加载-iso" class="headerlink" title="加载.iso"></a>加载.iso</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /mnt/vcdrom</span><br><span class="line">sudo mount -o loop &lt;where-install-files&gt;/Abaqus6<span class="number">-10</span><span class="number">-2</span>-documentation.iso /mnt/vcdrom</span><br><span class="line"></span><br><span class="line">sudo mkdir ~/SIMULIA</span><br><span class="line">cd ~/SIMULIA</span><br><span class="line">sudo /mnt/vcdrom/./setup</span><br></pre></td></tr></table></figure>
<h2 id="启动abaqus-html-帮助文档"><a href="#启动abaqus-html-帮助文档" class="headerlink" title="启动abaqus html 帮助文档"></a>启动abaqus html 帮助文档</h2><p>启动abaqus html 帮助文档要通过服务器形式，才可以使用搜索功能，即<br>http://***********:2080/v6.10<br>如果通过打开本地html文件的形式，则无法使用搜索：<br>file:///~/SIMULIA/Documentation/docs/v6.10/index.html</p>
<h1 id="安装-license"><a href="#安装-license" class="headerlink" title="安装 license"></a>安装 license</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /mnt/vcdrom</span><br><span class="line">sudo mount -o loop &lt;where-install-files&gt;/Abaqus6<span class="number">-10</span><span class="number">-2</span>-product.iso /mnt/vcdrom</span><br><span class="line">sudo /mnt/vcdrom/./setup</span><br></pre></td></tr></table></figure>
<p>如安装正常，会出现让你输入 scratch path， 就是临时安装路径，可以输入/tmp。然后应该会出现abaqus的gui安装界面，先安装licensed。安装时，注意选择“只安装license server，但是不启动“那一项。<br>安装完license后，abaqus的安装程序会问你“是否安装其产品”。先不管，但也不要关闭它。<br>修改破解用的ABAQUS.lic文件，即将里面第一行的this_host改名为本机的主机名（hostname），其他的不用改。将其复制到生成的Lisence文件夹下，运行./lmgrd -c ABAQUS.lic。此时会显示某个TCP port number运行起来了。如果显示有TCP port number已经在运行，则用lmdown下停止，然后再lmgrd重新启动。(或者干脆重启电脑)<br>至此，license服务器应该就会运行起来。用~/SIMUlIA/License 中 lmstat -c <a href="mailto:&#121;&#111;&#117;&#114;&#104;&#111;&#x73;&#x74;&#x6e;&#x61;&#109;&#101;&#x40;&#49;&#x32;&#x37;&#x2e;&#x30;&#x2e;&#x30;&#x2e;&#x31;">&#121;&#111;&#117;&#114;&#104;&#111;&#x73;&#x74;&#x6e;&#x61;&#109;&#101;&#x40;&#49;&#x32;&#x37;&#x2e;&#x30;&#x2e;&#x30;&#x2e;&#x31;</a>可查看状态，必须要保证运行正常。</p>
<h1 id="安装Product"><a href="#安装Product" class="headerlink" title="安装Product"></a>安装Product</h1><p>回到安装Product的窗口，进行安装，输入服务器地址为：27011@主机名，注意27011对于lic文件。如果此时报错也没问题，继续安装。</p>
<h1 id="设置abaqus启动时寻找的license服务器"><a href="#设置abaqus启动时寻找的license服务器" class="headerlink" title="设置abaqus启动时寻找的license服务器"></a>设置abaqus启动时寻找的license服务器</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit ~/SIMULIA/Abaqus/<span class="number">6.10</span><span class="number">-2</span>/SMA/site/abaqus_v6.env</span><br></pre></td></tr></table></figure>
<p>将abaquslm_license_file设置为自己的服务器地址，如”27011@主机名”</p>
<h1 id="启动Abaqus"><a href="#启动Abaqus" class="headerlink" title="启动Abaqus"></a>启动Abaqus</h1><p>cd ~/SIMULIA  #这是Abaqus安装目录<br>sudo XLIB_SKIP_ARGB_VISUALS=1 ./Commands/abq6102 cae<br>XLIB_SKIP_ARGB_VISUALS=1是为了解决abaqus窗口透明的问题<br>注意除非在Abaqus CAE指定work directory，abaqus会在终端的当前目录下工作<br>未尽事宜可参见Abaqus的帮助文档</p>
<h1 id="建立启动快捷方式"><a href="#建立启动快捷方式" class="headerlink" title="建立启动快捷方式"></a>建立启动快捷方式</h1><p>在~/.bashrc里加入：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alias abaqus=&#x27;sudo XLIB_SKIP_ARGB_VISUALS=1 /dir/of/SIMULIA/Abaqus/Commands/./abaqus&#x27;</span><br><span class="line">alias abqlm=&#x27;sudo /dir/of/SIMULIA/License/./lmgrd -c /dir/of/SIMULIA/License/ABAQUS.lic&#x27;</span><br><span class="line">alias abqdocserver=&#x27;sudo /dir/of/SIMULIA/Documentation/installation_info/v6.10/./startServer&#x27;</span><br><span class="line">alias abqlmstat=&#x27;sudo /dif/of/SIMULIA/License/./lmstat&#x27;</span><br><span class="line">alias abqlmdown=&#x27;sudo /dif/of/SIMULIA/License/./lmdown&#x27;</span><br></pre></td></tr></table></figure>
<p>在root/.bashrc里加入</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alias abaqus=&#x27;XLIB_SKIP_ARGB_VISUALS=1 /dif/of/SIMULIA/Abaqus/Commands/./abaqus&#x27;</span><br><span class="line">alias abqlm=&#x27;/dir/of/SIMULIA/License/./lmgrd -c /dir/of/SIMULIA/License/ABAQUS.lic&#x27;</span><br><span class="line">alias abqdocserver=&#x27;/dir/of/SIMULIA/Documentation/installation_info/v6.10/./startServer&#x27;</span><br><span class="line">alias abqlmstat=&#x27;/dir/of/SIMULIA/License/./lmstat&#x27;</span><br><span class="line">alias abqlmdown=&#x27;/dir/of/SIMULIA/License/./lmdown&#x27;</span><br></pre></td></tr></table></figure>
<h1 id="Problems"><a href="#Problems" class="headerlink" title="Problems"></a>Problems</h1><ol>
<li><p>when run abaqus cae, if an error “error while loading shared libraries: libjpeg.so.62: cannot open shared object file: No such file or directory” occurs, install libjpeg62:<br>sudo apt-get install libjpeg62</p>
</li>
<li><p>如果运行abaqus cae时报错：X Error，那么：<br>abaqus cae -mesa</p>
</li>
</ol>
<h1 id="安装intel-Fortran编译器。"><a href="#安装intel-Fortran编译器。" class="headerlink" title="安装intel Fortran编译器。"></a>安装intel Fortran编译器。</h1><p>安装时注意加入正确的lic文件。</p>
<h1 id="将intel-Fortran与abaqus连接："><a href="#将intel-Fortran与abaqus连接：" class="headerlink" title="将intel Fortran与abaqus连接："></a>将intel Fortran与abaqus连接：</h1><p>将ifort的路径加入到环境变量中：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATH=$PATH:/opt/intel/bin</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qixinbo.github.io/2018/01/12/damask-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Xin-Bo Qi(亓欣波)">
      <meta itemprop="description" content="Be interesting!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="亓欣波">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/12/damask-install/" class="post-title-link" itemprop="url">晶体塑性有限元开源软件DAMASK安装过程记录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-12 00:00:00" itemprop="dateCreated datePublished" datetime="2018-01-12T00:00:00+08:00">2018-01-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-25 15:20:30" itemprop="dateModified" datetime="2021-03-25T15:20:30+08:00">2021-03-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/computational-material-science/" itemprop="url" rel="index"><span itemprop="name">computational material science</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2018/01/12/damask-install/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/01/12/damask-install/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2018-1-12更新：<br>电脑重装后再次安装DAMASK，完善文档，遇到了几个新问题，并附解决方法。</p>
<p>DAMASK是马普钢铁研究所开发的一款用于晶体塑性有限元模拟的开源软件。<br>安装过程如下：</p>
<h1 id="求解器和编译器"><a href="#求解器和编译器" class="headerlink" title="求解器和编译器"></a>求解器和编译器</h1><p>DAMASK可以调用三种求解器：MSC.Marc/Mentat，Abaqus和自带的谱方法求解器。鉴于Abaqus用得范围广，这里选择Abaqus作为求解器。DAMASK实际是Abaqus的子程序，因此还需要安装Abaqus的subroutine编译器，即Intel的Fortran编译器。<br>这两个软件的安装及相互调用在之前的博客中已写过，见<a target="_blank" rel="noopener" href="http://qixinbo.info/2018/01/12/abaqus-install/">here</a>。</p>
<h1 id="Python及其Modules"><a href="#Python及其Modules" class="headerlink" title="Python及其Modules"></a>Python及其Modules</h1><p>DAMASK的安装脚本、前处理和后处理等工具都是由Python写的，所以还要安装Python的编译器及相关Module。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python python-dev  <span class="comment">// 安装Python编译器</span></span><br><span class="line">sudo pip install numpy  <span class="comment">// 安装numpy包</span></span><br><span class="line">sudo pip install scipy  <span class="comment">// 安装scipy包</span></span><br><span class="line">sudo pip install h5py   <span class="comment">// 安装h5py包</span></span><br><span class="line">sudo apt-get install python-vtk <span class="comment">// 安装vtk</span></span><br></pre></td></tr></table></figure>
<h1 id="系统配置"><a href="#系统配置" class="headerlink" title="系统配置"></a>系统配置</h1><p>用文本编辑器编辑DAMASK文件夹中的CONFIG文件，根据自己的系统配置进行改写（默认配置已基本适用于大部分系统）。注意，该CONFIG文件是在v2.0.1以后才有，之前的v2.0.0没有该文件，是有一个configure的脚本来执行。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># <span class="string">&quot;set&quot;</span>-<span class="function">syntax needed only <span class="keyword">for</span> <span class="title">tcsh</span> <span class="params">(but works with bash <span class="keyword">and</span> zsh)</span></span></span><br><span class="line"># DAMASK_ROOT will be expanded</span><br><span class="line">set DAMASK_BIN=$&#123;DAMASK_ROOT&#125;/bin</span><br><span class="line">set DAMASK_NUM_THREADS = <span class="number">4</span> <span class="comment">// 配置线程数目</span></span><br><span class="line"></span><br><span class="line">set MSC_ROOT=/opt/MSC  <span class="comment">// MSC的安装路径</span></span><br><span class="line">set MARC_VERSION=<span class="number">2015</span>  <span class="comment">// MARC的版本</span></span><br><span class="line"></span><br><span class="line">set ABAQUS_VERSION=<span class="number">6.14</span><span class="number">-1</span>  <span class="comment">// Abaqus的版本</span></span><br></pre></td></tr></table></figure>
<p>然后根据自己适用的shell环境来选择不同的文件使配置生效，即使用source命令，如使用bash的话就选择后缀为sh的文件：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source DAMASK_env.sh</span><br></pre></td></tr></table></figure>
<p>这一步是编译或运行DAMASK的必要条件，因为它让DAMASK知道其使用怎样的配置，同时将DAMASK的bin路径加入到PATH变量中。因此，必须确保它是第一个执行的。或者直接就将该source命令加入到用户配置文件.bashrc中，让其自动生效。</p>
<p><em>ATTENTION!: 如果之前abaqus是用sudo安装并运行的，那么还要将该命令加入到root用户的.bashrc中，否则sudo运行abaqus后，会将普通用户的环境变量覆盖，导致找不到DAMASK。</em></p>
<h1 id="安装前处理和后处理工具"><a href="#安装前处理和后处理工具" class="headerlink" title="安装前处理和后处理工具"></a>安装前处理和后处理工具</h1><p>DAMASK有一些前后处理的工具放在了processing路径下，在有Makefile文件的那级目录下使用：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make install</span><br></pre></td></tr></table></figure>
<p>在DAMASK/bin下创建符号链接来指向这些工具，因此就可以直接调用这些工具。</p>
<h1 id="Abaqus配置"><a href="#Abaqus配置" class="headerlink" title="Abaqus配置"></a>Abaqus配置</h1><p>Abaqus在不同的操作系统Linux和Windows下不同，具体见DAMASK官网配置。<br>对于Linux来说，需要将Abaqus的环境文件复制到用户路径下或者模型所在路径下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp DAMASK/installation/mods_Abaqus/abaqus_v6.env  /Dir/of/home/OR/Dir/of/Model/</span><br></pre></td></tr></table></figure>
<h1 id="Abaqus压缩模型"><a href="#Abaqus压缩模型" class="headerlink" title="Abaqus压缩模型"></a>Abaqus压缩模型</h1><p>在example路径下有一个运行实例，可以用来测试是否安装和求解成功：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd DAMASK/examples/AbaqusStandard</span><br><span class="line">abaqus job=Job_sx-px user=../../code/DAMASK_abaqus_std.f interactive</span><br><span class="line">abaqus viewer database=Job_sx-px.odb</span><br></pre></td></tr></table></figure>
<h2 id="可能遇到的问题"><a href="#可能遇到的问题" class="headerlink" title="可能遇到的问题"></a>可能遇到的问题</h2><p>(1) Out of memory asking for<br>(2) Illegal memory reference<br>第一个问题是出现在Abaqus编译.f文件时，第二个是出现在Abaqus开始运行程序时，原因可能是电脑的运行资源不够。此时的一个方法是重启电脑，然后启动后直接运行该模型，保证程序拥有最多的计算资源。</p>
<h2 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h2><p>两个圆柱体，一个是单晶，一个是多晶，其受压变形：<br><img src="https://ws1.sinaimg.cn/large/0072Lfvtly1fvjjyg1ei7j31b90nimy0.jpg"></p>
<h1 id="前处理生成晶粒"><a href="#前处理生成晶粒" class="headerlink" title="前处理生成晶粒"></a>前处理生成晶粒</h1><p>用DAMASK生成50个晶粒：<br><img src="https://ws1.sinaimg.cn/large/0072Lfvtly1fvjjypvjb5j312d0li0u9.jpg"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qixinbo.github.io/2017/12/06/pyqt4-sophisticated/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Xin-Bo Qi(亓欣波)">
      <meta itemprop="description" content="Be interesting!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="亓欣波">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/06/pyqt4-sophisticated/" class="post-title-link" itemprop="url">PyQt4教程系列四：高阶功能</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-12-06 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-06T00:00:00+08:00">2017-12-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-25 15:20:30" itemprop="dateModified" datetime="2021-03-25T15:20:30+08:00">2021-03-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">programming</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/12/06/pyqt4-sophisticated/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/12/06/pyqt4-sophisticated/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文是对<a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/pyqt/">TutorialsPoint</a>上的教程的翻译。</p>
<h1 id="数据库QSqlDatabase"><a href="#数据库QSqlDatabase" class="headerlink" title="数据库QSqlDatabase"></a>数据库QSqlDatabase</h1><p>PyQt API可以和很多基于SQL的数据库进行通信，用的类是QSqlDatabase。<br>具体使用哪个数据库要使用相应的驱动：</p>
<ol>
<li>QDB2：IBM DB2</li>
<li>QIBASE：Borland InterBase Driver</li>
<li>QMYSQL：MySQL Driver</li>
<li>QOCI：Oracle Call Interface Driver</li>
<li>QODBC：ODBC Driver (includes Microsoft SQL Server)</li>
<li>QPSQL：PostgreSQL Driver</li>
<li>QSQLITE：SQLite version 3 or above</li>
<li>QSQLITE2“SQLite version 2</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db = QtSql.QSqlDatabase.addDatabase(&#x27;QSQLITE&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="QSqlDatabase的函数"><a href="#QSqlDatabase的函数" class="headerlink" title="QSqlDatabase的函数"></a>QSqlDatabase的函数</h2><ol>
<li>setDatabaseName()：设置数据库的名称</li>
<li>setHostName()：设置安装数据库的主机的名称</li>
<li>setUserName()：输入用户名</li>
<li>setPassword()：输入密码</li>
<li>commit()：提交事务，如果连接成功则返回true</li>
<li>rollback()：回滚事务</li>
<li>close()：关闭连接</li>
</ol>
<h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><p>先创建一个含有五个记录的数据库：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">from PyQt4 <span class="keyword">import</span> QtSql, QtGui</span><br><span class="line"></span><br><span class="line"><span class="function">def <span class="title">createDB</span><span class="params">()</span>:</span></span><br><span class="line">   db = QtSql.QSqlDatabase.addDatabase(&#x27;QSQLITE&#x27;)</span><br><span class="line">   db.setDatabaseName(&#x27;sports.db&#x27;)</span><br><span class="line">	</span><br><span class="line">   <span class="keyword">if</span> <span class="keyword">not</span> db.<span class="built_in">open</span>():</span><br><span class="line">      QtGui.QMessageBox.<span class="built_in">critical</span>(None, QtGui.qApp.<span class="built_in">tr</span>(<span class="string">&quot;Cannot open database&quot;</span>),</span><br><span class="line">         QtGui.qApp.<span class="built_in">tr</span>(<span class="string">&quot;Unable to establish a database connection.\n&quot;</span></span><br><span class="line">            <span class="string">&quot;This example needs SQLite support. Please read &quot;</span></span><br><span class="line">            <span class="string">&quot;the Qt SQL driver documentation for information &quot;</span></span><br><span class="line">            <span class="string">&quot;how to build it.\n\n&quot;</span> <span class="string">&quot;Click Cancel to exit.&quot;</span>),</span><br><span class="line">         QtGui.QMessageBox.Cancel)</span><br><span class="line">			</span><br><span class="line">      <span class="keyword">return</span> False</span><br><span class="line">		</span><br><span class="line">   query = QtSql.<span class="built_in">QSqlQuery</span>()</span><br><span class="line">	</span><br><span class="line">   query.<span class="built_in">exec_</span>(<span class="string">&quot;create table sportsmen(id int primary key, &quot;</span></span><br><span class="line">      <span class="string">&quot;firstname varchar(20), lastname varchar(20))&quot;</span>)</span><br><span class="line">		</span><br><span class="line">   query.<span class="built_in">exec_</span>(<span class="string">&quot;insert into sportsmen values(101, &#x27;Roger&#x27;, &#x27;Federer&#x27;)&quot;</span>)</span><br><span class="line">   query.<span class="built_in">exec_</span>(<span class="string">&quot;insert into sportsmen values(102, &#x27;Christiano&#x27;, &#x27;Ronaldo&#x27;)&quot;</span>)</span><br><span class="line">   query.<span class="built_in">exec_</span>(<span class="string">&quot;insert into sportsmen values(103, &#x27;Ussain&#x27;, &#x27;Bolt&#x27;)&quot;</span>)</span><br><span class="line">   query.<span class="built_in">exec_</span>(<span class="string">&quot;insert into sportsmen values(104, &#x27;Sachin&#x27;, &#x27;Tendulkar&#x27;)&quot;</span>)</span><br><span class="line">   query.<span class="built_in">exec_</span>(<span class="string">&quot;insert into sportsmen values(105, &#x27;Saina&#x27;, &#x27;Nehwal&#x27;)&quot;</span>)</span><br><span class="line">   <span class="keyword">return</span> True</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="keyword">import</span> sys</span><br><span class="line">	</span><br><span class="line">   app = QtGui.<span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   <span class="built_in">createDB</span>()</span><br></pre></td></tr></table></figure>
<p>再实际连接并操作这个数据库：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4 <span class="keyword">import</span> QtCore, QtGui, QtSql</span><br><span class="line"></span><br><span class="line"><span class="function">def <span class="title">initializeModel</span><span class="params">(model)</span>:</span></span><br><span class="line">   model.setTable(&#x27;sportsmen&#x27;)</span><br><span class="line">   model.<span class="built_in">setEditStrategy</span>(QtSql.QSqlTableModel.OnFieldChange)</span><br><span class="line">   model.<span class="built_in">select</span>()</span><br><span class="line">   model.<span class="built_in">setHeaderData</span>(<span class="number">0</span>, QtCore.Qt.Horizontal, <span class="string">&quot;ID&quot;</span>)</span><br><span class="line">   model.<span class="built_in">setHeaderData</span>(<span class="number">1</span>, QtCore.Qt.Horizontal, <span class="string">&quot;First name&quot;</span>)</span><br><span class="line">   model.<span class="built_in">setHeaderData</span>(<span class="number">2</span>, QtCore.Qt.Horizontal, <span class="string">&quot;Last name&quot;</span>)</span><br><span class="line">	</span><br><span class="line"><span class="function">def <span class="title">createView</span><span class="params">(title, model)</span>:</span></span><br><span class="line"><span class="function">   view =</span> QtGui.<span class="built_in">QTableView</span>()</span><br><span class="line">   view.<span class="built_in">setModel</span>(model)</span><br><span class="line">   view.<span class="built_in">setWindowTitle</span>(title)</span><br><span class="line">   <span class="keyword">return</span> view</span><br><span class="line">	</span><br><span class="line">def <span class="built_in">addrow</span>():</span><br><span class="line">   print model.<span class="built_in">rowCount</span>()</span><br><span class="line">   ret = model.<span class="built_in">insertRows</span>(model.<span class="built_in">rowCount</span>(), <span class="number">1</span>)</span><br><span class="line">   print ret</span><br><span class="line">	</span><br><span class="line">def <span class="built_in">findrow</span>(i):</span><br><span class="line">   delrow = i.<span class="built_in">row</span>()</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line"></span><br><span class="line">   app = QtGui.<span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   db = QtSql.QSqlDatabase.addDatabase(&#x27;QSQLITE&#x27;)</span><br><span class="line">   db.setDatabaseName(&#x27;sports.db&#x27;)</span><br><span class="line">   model = QtSql.<span class="built_in">QSqlTableModel</span>()</span><br><span class="line">   delrow = <span class="number">-1</span></span><br><span class="line">   <span class="built_in">initializeModel</span>(model)</span><br><span class="line">	</span><br><span class="line">   view1 = <span class="built_in">createView</span>(<span class="string">&quot;Table Model (View 1)&quot;</span>, model)</span><br><span class="line">   view1.clicked.<span class="built_in">connect</span>(findrow)</span><br><span class="line">	</span><br><span class="line">   dlg = QtGui.<span class="built_in">QDialog</span>()</span><br><span class="line">   layout = QtGui.<span class="built_in">QVBoxLayout</span>()</span><br><span class="line">   layout.<span class="built_in">addWidget</span>(view1)</span><br><span class="line">	</span><br><span class="line">   button = QtGui.<span class="built_in">QPushButton</span>(<span class="string">&quot;Add a row&quot;</span>)</span><br><span class="line">   button.clicked.<span class="built_in">connect</span>(addrow)</span><br><span class="line">   layout.<span class="built_in">addWidget</span>(button)</span><br><span class="line">	</span><br><span class="line">   btn1 = QtGui.<span class="built_in">QPushButton</span>(<span class="string">&quot;del a row&quot;</span>)</span><br><span class="line">   btn1.clicked.<span class="built_in">connect</span>(lambda: model.<span class="built_in">removeRow</span>(view1.<span class="built_in">currentIndex</span>().<span class="built_in">row</span>()))</span><br><span class="line">   layout.<span class="built_in">addWidget</span>(btn1)</span><br><span class="line">	</span><br><span class="line">   dlg.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">   dlg.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;Database Demo&quot;</span>)</span><br><span class="line">   dlg.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br></pre></td></tr></table></figure>

<h1 id="绘图API-QPaintDevice和QPainter"><a href="#绘图API-QPaintDevice和QPainter" class="headerlink" title="绘图API QPaintDevice和QPainter"></a>绘图API QPaintDevice和QPainter</h1><p>PyQt中的所有QWidget类都是QPaintDevice的子类。QPaintDevice是使用QPainter进行绘图的二维空间的抽象。绘图设备的维度是从左上角开始度量。<br>无论QPainter类的样式更新时，QPaintEvent都会发生。</p>
<h2 id="QPainter的函数"><a href="#QPainter的函数" class="headerlink" title="QPainter的函数"></a>QPainter的函数</h2><ol>
<li>begin()：开始绘图</li>
<li>drawArc()：绘制圆弧</li>
<li>drawEllipse()：绘制椭圆</li>
<li>drawLine()：绘制直线</li>
<li>drawPixmap()：从一个图片文件中提取pixmap，然后显示</li>
<li>drwaPolygon()：绘制多边形</li>
<li>drawRect()：绘制矩形</li>
<li>drawText()：显示文字</li>
<li>fillRect()：使用QColor参数填充矩形</li>
<li>setBrush()：设置画刷样式</li>
<li>setPen()：设置画笔的颜色、尺寸和样式</li>
</ol>
<h2 id="画刷样式"><a href="#画刷样式" class="headerlink" title="画刷样式"></a>画刷样式</h2><h3 id="预定义的QColor样式"><a href="#预定义的QColor样式" class="headerlink" title="预定义的QColor样式"></a>预定义的QColor样式</h3><p>Qt.NoBrush           |      No brush pattern<br>Qt.SolidPattern      |      Uniform color<br>Qt.Dense1Pattern     |      Extremely dense brush pattern<br>Qt.HorPattern        |      Horizontal lines<br>Qt.VerPattern        |      Vertical lines<br>Qt.CrossPattern      |      Crossing horizontal and vertical lines<br>Qt.BDiagPattern      |      Backward diagonal lines<br>Qt.FDiagPattern      |      Forward diagonal lines<br>Qt.DiagCrossPattern  |      Crossing diagonal lines</p>
<h3 id="预定义的QColor对象"><a href="#预定义的QColor对象" class="headerlink" title="预定义的QColor对象"></a>预定义的QColor对象</h3><p>Qt.white      |    Qt.black      |  Qt.red<br>Qt.darkRed    |    Qt.green      |  Qt.darkGreen<br>Qt.blue       |    Qt.cyan       |  Qt.magenta<br>Qt.yellow     |    Qt.darkYellow |  Qt.gray</p>
<h2 id="举例-1"><a href="#举例-1" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">Example</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   def __init__(self):</span></span><br><span class="line"><span class="function">      super(Example, self).__init__()</span></span><br><span class="line"><span class="function">      self.initUI()</span></span><br><span class="line"><span class="function">		</span></span><br><span class="line"><span class="function">   def initUI(self):</span></span><br><span class="line"><span class="function">      self.text =</span> <span class="string">&quot;hello world&quot;</span></span><br><span class="line">      self.<span class="built_in">setGeometry</span>(<span class="number">100</span>,<span class="number">100</span>, <span class="number">400</span>,<span class="number">300</span>)</span><br><span class="line">      self.setWindowTitle(&#x27;Draw Demo&#x27;)</span><br><span class="line">      self.<span class="built_in">show</span>()</span><br><span class="line">		</span><br><span class="line">   <span class="function">def <span class="title">paintEvent</span><span class="params">(self, event)</span>:</span></span><br><span class="line"><span class="function">      qp =</span> <span class="built_in">QPainter</span>()</span><br><span class="line">      qp.<span class="built_in">begin</span>(self)</span><br><span class="line">      qp.<span class="built_in">setPen</span>(<span class="built_in">QColor</span>(Qt.red))</span><br><span class="line">      qp.setFont(QFont(&#x27;Arial&#x27;, 20))</span><br><span class="line">		</span><br><span class="line">      qp.<span class="built_in">drawText</span>(<span class="number">10</span>,<span class="number">50</span>, <span class="string">&quot;hello Python&quot;</span>)</span><br><span class="line">      qp.<span class="built_in">setPen</span>(<span class="built_in">QColor</span>(Qt.blue))</span><br><span class="line">      qp.<span class="built_in">drawLine</span>(<span class="number">10</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>)</span><br><span class="line">      qp.<span class="built_in">drawRect</span>(<span class="number">10</span>,<span class="number">150</span>,<span class="number">150</span>,<span class="number">100</span>)</span><br><span class="line">		</span><br><span class="line">      qp.<span class="built_in">setPen</span>(<span class="built_in">QColor</span>(Qt.yellow))</span><br><span class="line">      qp.<span class="built_in">drawEllipse</span>(<span class="number">100</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">50</span>)</span><br><span class="line">      qp.<span class="built_in">drawPixmap</span>(<span class="number">220</span>,<span class="number">10</span>,<span class="built_in">QPixmap</span>(<span class="string">&quot;python.jpg&quot;</span>))</span><br><span class="line">      qp.<span class="built_in">fillRect</span>(<span class="number">200</span>,<span class="number">175</span>,<span class="number">150</span>,<span class="number">100</span>,<span class="built_in">QBrush</span>(Qt.SolidPattern))</span><br><span class="line">      qp.<span class="built_in">end</span>()</span><br><span class="line">		</span><br><span class="line"><span class="function">def <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">   app =</span> <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">Example</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="剪贴板QClipboard"><a href="#剪贴板QClipboard" class="headerlink" title="剪贴板QClipboard"></a>剪贴板QClipboard</h1><p>QClipboard提供了对系统剪贴板的访问，可以很简单地在不同应用之间复制和粘贴数据。它的动作跟QDrag类类似，使用类似的数据结构。<br>QApplication类有一个静态函数clipboard()来访问系统剪贴板。</p>
<h2 id="QClipboard的函数"><a href="#QClipboard的函数" class="headerlink" title="QClipboard的函数"></a>QClipboard的函数</h2><ol>
<li>clear()：清空剪贴板内容</li>
<li>setImage()：复制QImage到剪贴板</li>
<li>setMimeData()：复制MIME数据到剪贴板</li>
<li>setPixmap()：复制Pixmap对象到剪贴板</li>
<li>setText()：复制QString到剪贴板</li>
<li>text()：从剪贴板中取得文本</li>
</ol>
<h2 id="QClipboard的信号"><a href="#QClipboard的信号" class="headerlink" title="QClipboard的信号"></a>QClipboard的信号</h2><p>dataChanged()：剪贴板数据变化</p>
<h1 id="QPixmap"><a href="#QPixmap" class="headerlink" title="QPixmap"></a>QPixmap</h1><p>QPixmap和QImage都是图片类，前者专门用于绘图，用作QPaintDevice对象，或者加载到其他控件中，通常是标签或按钮，以及在屏幕上显示；而QImage则是为I/O进行了优化。<br>可以读取到QPixmap中的图片格式有：<br>BMP、GIF、JPG、JPEG、PNG、PBM、PGM、PPM、XBM、XPM。</p>
<h2 id="QPixmap的函数"><a href="#QPixmap的函数" class="headerlink" title="QPixmap的函数"></a>QPixmap的函数</h2><ol>
<li>copy()：从一个QRect对象中复制pixmap数据</li>
<li>fromImage()：将QImage对象转换成QPixmap</li>
<li>grabWidget()：从给定的控件中创建pixmap</li>
<li>grabWindow()：在窗口中创建pixmap数据</li>
<li>Load()：加载一个图片作为pixmap</li>
<li>save()：保存一个QPixmap对象为一个文件</li>
<li>toImage()：将一个QPixmap转换成QImage</li>
</ol>
<h2 id="举例-2"><a href="#举例-2" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">def <span class="title">window</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">   app =</span> <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   win = <span class="built_in">QWidget</span>()</span><br><span class="line">   l1 = <span class="built_in">QLabel</span>()</span><br><span class="line">   l1.<span class="built_in">setPixmap</span>(<span class="built_in">QPixmap</span>(<span class="string">&quot;python.jpg&quot;</span>))</span><br><span class="line">	</span><br><span class="line">   vbox = <span class="built_in">QVBoxLayout</span>()</span><br><span class="line">   vbox.<span class="built_in">addWidget</span>(l1)</span><br><span class="line">   win.<span class="built_in">setLayout</span>(vbox)</span><br><span class="line">   win.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;QPixmap Demo&quot;</span>)</span><br><span class="line">   win.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">window</span>()</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qixinbo.github.io/2017/12/05/pyqt4-extension/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Xin-Bo Qi(亓欣波)">
      <meta itemprop="description" content="Be interesting!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="亓欣波">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/05/pyqt4-extension/" class="post-title-link" itemprop="url">PyQt4教程系列三：扩展功能</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-12-05 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-05T00:00:00+08:00">2017-12-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-25 15:20:30" itemprop="dateModified" datetime="2021-03-25T15:20:30+08:00">2021-03-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">programming</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/12/05/pyqt4-extension/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/12/05/pyqt4-extension/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文是对<a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/pyqt/">TutorialsPoint</a>上的教程的翻译。</p>
<h1 id="QDialog"><a href="#QDialog" class="headerlink" title="QDialog"></a>QDialog</h1><p>QDialog通常提供一个窗口用来收集用户的响应。它可以设为模态（阻塞其父窗口）和非模态（可以绕过该对话窗口）。<br>PyQt API也提供了一些配置好的对话框控件，如之前提到的InputDialog、FileDialog、FontDialog。</p>
<h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">def <span class="title">window</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">   app =</span> <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   w = <span class="built_in">QWidget</span>()</span><br><span class="line">   b = <span class="built_in">QPushButton</span>(w)</span><br><span class="line">   b.<span class="built_in">setText</span>(<span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line">   b.<span class="built_in">move</span>(<span class="number">50</span>,<span class="number">50</span>)</span><br><span class="line">   b.clicked.<span class="built_in">connect</span>(showdialog)</span><br><span class="line">   w.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;PyQt Dialog demo&quot;</span>)</span><br><span class="line">   w.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">def <span class="built_in">showdialog</span>():</span><br><span class="line">   d = <span class="built_in">QDialog</span>()</span><br><span class="line">   b1 = <span class="built_in">QPushButton</span>(<span class="string">&quot;ok&quot;</span>,d)</span><br><span class="line">   b1.<span class="built_in">move</span>(<span class="number">50</span>,<span class="number">50</span>)</span><br><span class="line">   d.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;Dialog&quot;</span>)</span><br><span class="line">   d.<span class="built_in">setWindowModality</span>(Qt.ApplicationModal)  # 这里设置模态与否</span><br><span class="line">   d.<span class="built_in">exec_</span>()</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">window</span>()</span><br></pre></td></tr></table></figure>

<h1 id="QMessageBox"><a href="#QMessageBox" class="headerlink" title="QMessageBox"></a>QMessageBox</h1><p>QMessageBox是一个常用的模态对话框，用来显示一些信息类消息，可以让用户通过点击任意一个标准按钮来响应。每个标准按钮都有一个预定义的标题、角色，并且返回一个预定义的十六进制数字。</p>
<h2 id="QMessageBox的函数"><a href="#QMessageBox的函数" class="headerlink" title="QMessageBox的函数"></a>QMessageBox的函数</h2><ol>
<li>setIcon()：显示预定义的图标</li>
<li>setText()：设置主消息的文字</li>
<li>setInformativeText()：显示额外信息</li>
<li>setDetailText()：显示一个Details按钮</li>
<li>setTitle()：显示自定义标题</li>
<li>setStandardButtons()：标准按钮及其对应的十六进制数字是QMessageBox.Ok 0x00000400、QMessageBox.Open 0x00002000、QMessageBox.Save 0x00000800、QMessageBox.Cancel 0x00400000、QMessageBox.Close 0x00200000、QMessageBox.Yes 0x00004000、QMessageBox.No 0x00010000、QMessageBox.Abort 0x00040000、QMessageBox.Retry 0x00080000、QMessageBox.Ignore 0x00100000。</li>
<li>setDefaultButton()：设置默认按钮。当回车时它会发射clicked信号</li>
<li>setEscapeButton()：当按下Escape键时，该按钮会发出clicked信号</li>
</ol>
<h2 id="举例-1"><a href="#举例-1" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">mport sys</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">def <span class="title">window</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">   app =</span> <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   w = <span class="built_in">QWidget</span>()</span><br><span class="line">   b = <span class="built_in">QPushButton</span>(w)</span><br><span class="line">   b.<span class="built_in">setText</span>(<span class="string">&quot;Show message!&quot;</span>)</span><br><span class="line"></span><br><span class="line">   b.<span class="built_in">move</span>(<span class="number">50</span>,<span class="number">50</span>)</span><br><span class="line">   b.clicked.<span class="built_in">connect</span>(showdialog)</span><br><span class="line">   w.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;PyQt Dialog demo&quot;</span>)</span><br><span class="line">   w.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">def <span class="built_in">showdialog</span>():</span><br><span class="line">   msg = <span class="built_in">QMessageBox</span>()</span><br><span class="line">   msg.<span class="built_in">setIcon</span>(QMessageBox.Information)</span><br><span class="line"></span><br><span class="line">   msg.<span class="built_in">setText</span>(<span class="string">&quot;This is a message box&quot;</span>)</span><br><span class="line">   msg.<span class="built_in">setInformativeText</span>(<span class="string">&quot;This is additional information&quot;</span>)</span><br><span class="line">   msg.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;MessageBox demo&quot;</span>)</span><br><span class="line">   msg.<span class="built_in">setDetailedText</span>(<span class="string">&quot;The details are as follows:&quot;</span>)</span><br><span class="line">   msg.<span class="built_in">setStandardButtons</span>(QMessageBox.Ok | QMessageBox.Cancel)</span><br><span class="line">   msg.buttonClicked.<span class="built_in">connect</span>(msgbtn)</span><br><span class="line">	</span><br><span class="line">   retval = msg.<span class="built_in">exec_</span>()</span><br><span class="line">   print <span class="string">&quot;value of pressed message box button:&quot;</span>, retval</span><br><span class="line">	</span><br><span class="line">def <span class="built_in">msgbtn</span>(i):</span><br><span class="line">   print <span class="string">&quot;Button pressed is:&quot;</span>,i.<span class="built_in">text</span>()</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;: </span><br><span class="line">   <span class="built_in">window</span>()</span><br></pre></td></tr></table></figure>

<h1 id="多文档界面QMdiArea和QMdiSubWindow"><a href="#多文档界面QMdiArea和QMdiSubWindow" class="headerlink" title="多文档界面QMdiArea和QMdiSubWindow"></a>多文档界面QMdiArea和QMdiSubWindow</h1><p>一个通常的GUI可能具有多个窗口，之前的标签页和堆栈控件可以允许点击一次激活某个窗口，但是这两种方法有时不适用，因为它们一次只能查看一个窗口。<br>同时显示多个窗口的方法有：一是把这些窗口创建成独立的，称为SDI (Single Document Interface)，但因为每个窗口都有自己的菜单栏、工具栏等，开销比较大；另外一种方法是MDI (Multiple Document Interface)，比较节省开销，子窗口彼此相对放置在主容器中，这个主容器控件叫做QMdiArea。<br>QMdiArea通常占据QMainWindow对象的中心地位，在此区域内的子窗口都是QMdiSubWindow类的实例，可以在这些子窗口中设置任意的控件，这些子窗口可以以级联或者瓦片的形式排列。</p>
<h2 id="QMdiArea和QMdiSubWindow的函数"><a href="#QMdiArea和QMdiSubWindow的函数" class="headerlink" title="QMdiArea和QMdiSubWindow的函数"></a>QMdiArea和QMdiSubWindow的函数</h2><ol>
<li>addSubWindow()：添加一个控件作为子窗口</li>
<li>removeSubWindow()：删除子窗口</li>
<li>setActiveSubWindow()：激活子窗口</li>
<li>cascadeSubWindows()：以级联的形式排列子窗口</li>
<li>tileSubWindows()：以瓦片的形式排列子窗口</li>
<li>closeActiveSubWindow()：关闭活跃的子窗口</li>
<li>subWindowList()：返回子窗口列表</li>
<li>setWidget()：在子窗口中添加空间</li>
</ol>
<h2 id="QMdiArea和QMdiSubWindow的信号"><a href="#QMdiArea和QMdiSubWindow的信号" class="headerlink" title="QMdiArea和QMdiSubWindow的信号"></a>QMdiArea和QMdiSubWindow的信号</h2><p>QMdiArea的对象发射subWindowActivated()信号，而QMdiSubWindow的对象发射windowStateChanged()信号。</p>
<h2 id="举例-2"><a href="#举例-2" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">MainWindow</span><span class="params">(QMainWindow)</span>:</span></span><br><span class="line"><span class="function">   count =</span> <span class="number">0</span></span><br><span class="line">	</span><br><span class="line">   def __init__(self, parent = None):</span><br><span class="line">      <span class="built_in">super</span>(MainWindow, self).__init__(parent)</span><br><span class="line">      self.mdi = <span class="built_in">QMdiArea</span>()</span><br><span class="line">      self.<span class="built_in">setCentralWidget</span>(self.mdi)</span><br><span class="line">      bar = self.<span class="built_in">menuBar</span>()</span><br><span class="line">		</span><br><span class="line">      file = bar.<span class="built_in">addMenu</span>(<span class="string">&quot;File&quot;</span>)</span><br><span class="line">      file.<span class="built_in">addAction</span>(<span class="string">&quot;New&quot;</span>)</span><br><span class="line">      file.<span class="built_in">addAction</span>(<span class="string">&quot;cascade&quot;</span>)</span><br><span class="line">      file.<span class="built_in">addAction</span>(<span class="string">&quot;Tiled&quot;</span>)</span><br><span class="line">      file.triggered[QAction].<span class="built_in">connect</span>(self.windowaction)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;MDI demo&quot;</span>)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">windowaction</span>(self, q):</span><br><span class="line">      print <span class="string">&quot;triggered&quot;</span></span><br><span class="line">		</span><br><span class="line">      <span class="keyword">if</span> q.<span class="built_in">text</span>() == <span class="string">&quot;New&quot;</span>:</span><br><span class="line">         MainWindow.count = MainWindow.count+<span class="number">1</span></span><br><span class="line">         sub = <span class="built_in">QMdiSubWindow</span>()</span><br><span class="line">         sub.<span class="built_in">setWidget</span>(<span class="built_in">QTextEdit</span>())</span><br><span class="line">         sub.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;subwindow&quot;</span>+<span class="built_in">str</span>(MainWindow.count))</span><br><span class="line">         self.mdi.<span class="built_in">addSubWindow</span>(sub)</span><br><span class="line">         sub.<span class="built_in">show</span>()</span><br><span class="line">   		</span><br><span class="line">      <span class="keyword">if</span> q.<span class="built_in">text</span>() == <span class="string">&quot;cascade&quot;</span>:</span><br><span class="line">         self.mdi.<span class="built_in">cascadeSubWindows</span>()</span><br><span class="line">   		</span><br><span class="line">      <span class="keyword">if</span> q.<span class="built_in">text</span>() == <span class="string">&quot;Tiled&quot;</span>:</span><br><span class="line">         self.mdi.<span class="built_in">tileSubWindows</span>()</span><br><span class="line">   		</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">MainWindow</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="拖放QDrag和QMimeData"><a href="#拖放QDrag和QMimeData" class="headerlink" title="拖放QDrag和QMimeData"></a>拖放QDrag和QMimeData</h1><p>对于用户来说，能够拖放对象有时是很有用的。<br>MIME (Multipurpose Internet Mail Extensions) 是描述消息内容类型的因特网标准。 MIME 消息能包含文本、图像、音频、视频以及其他应用程序专用的数据。MIME类型的拖放而进行的文件传输是基于QDrag类。QMimeData将数据及其相应的MIME类型相关联。数据是存于剪贴板中，然后用于拖放过程。</p>
<h2 id="QMimeData的函数"><a href="#QMimeData的函数" class="headerlink" title="QMimeData的函数"></a>QMimeData的函数</h2><table>
<thead>
<tr>
<th>Tester</th>
<th>Getter</th>
<th>Setter</th>
<th>MIME Types</th>
</tr>
</thead>
<tbody><tr>
<td>hasText()</td>
<td>text()</td>
<td>setText()</td>
<td>text/plain</td>
</tr>
<tr>
<td>hasHtml()</td>
<td>html()</td>
<td>setHtml()</td>
<td>text/html</td>
</tr>
<tr>
<td>hasUrls()</td>
<td>urls()</td>
<td>setUrls()</td>
<td>text/uri-list</td>
</tr>
<tr>
<td>hasImage()</td>
<td>imageData()</td>
<td>setImageData()</td>
<td>image/ *</td>
</tr>
<tr>
<td>hasColor()</td>
<td>colorData()</td>
<td>setColorData()</td>
<td>application/x-color</td>
</tr>
</tbody></table>
<p>很多控件都支持拖放动作。那些允许数据被拖动的控件必须设置setDragEnabled()为true。<br>另一方面，接收数据的控件也必须响应拖放动作才能顺利存储数据：</p>
<ol>
<li>DragEnterEvent在拖放动作进入目标控件时，向该控件提供一个事件</li>
<li>当拖放动作进行时DragMoveEvent被使用</li>
<li>当拖放动作离开控件时DragLeaveEvent会生成</li>
<li>当松开鼠标时DropEvent会发生。该事件的响应动作会根据条件接收或拒绝。</li>
</ol>
<h2 id="举例-3"><a href="#举例-3" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">combo</span><span class="params">(QComboBox)</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   def __init__(self, title, parent):</span></span><br><span class="line"><span class="function">      super(combo, self).__init__( parent)</span></span><br><span class="line"><span class="function">	</span></span><br><span class="line"><span class="function">      self.setAcceptDrops(True)</span></span><br><span class="line"><span class="function">		</span></span><br><span class="line"><span class="function">   def dragEnterEvent(self, e):</span></span><br><span class="line"><span class="function">      print e</span></span><br><span class="line"><span class="function">		</span></span><br><span class="line"><span class="function">      if e.mimeData().hasText():</span></span><br><span class="line"><span class="function">         e.accept()</span></span><br><span class="line"><span class="function">      else:</span></span><br><span class="line"><span class="function">         e.ignore()</span></span><br><span class="line"><span class="function">			</span></span><br><span class="line"><span class="function">   def dropEvent(self, e):</span></span><br><span class="line"><span class="function">      self.addItem(e.mimeData().text())</span></span><br><span class="line"><span class="function">		</span></span><br><span class="line"><span class="function">class Example(QWidget):</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   def __init__(self):</span></span><br><span class="line"><span class="function">      super(Example, self).__init__()</span></span><br><span class="line"><span class="function">		</span></span><br><span class="line"><span class="function">      self.initUI()</span></span><br><span class="line"><span class="function">		</span></span><br><span class="line"><span class="function">   def initUI(self):</span></span><br><span class="line"><span class="function">      lo =</span> <span class="built_in">QFormLayout</span>()</span><br><span class="line">      lo.<span class="built_in">addRow</span>(<span class="built_in">QLabel</span>(<span class="string">&quot;Type some text in textbox and drag it into combo box&quot;</span>))</span><br><span class="line">		</span><br><span class="line">      edit = <span class="built_in">QLineEdit</span>()</span><br><span class="line">      edit.<span class="built_in">setDragEnabled</span>(True)</span><br><span class="line">      com = <span class="built_in">combo</span>(<span class="string">&quot;Button&quot;</span>, self)</span><br><span class="line">      lo.<span class="built_in">addRow</span>(edit,com)</span><br><span class="line">      self.<span class="built_in">setLayout</span>(lo)</span><br><span class="line">      self.setWindowTitle(&#x27;Simple drag &amp; drop&#x27;)</span><br><span class="line">		</span><br><span class="line"><span class="function">def <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">   app =</span> <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">Example</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   app.<span class="built_in">exec_</span>()</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qixinbo.github.io/2017/12/04/pyqt4-widgets/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Xin-Bo Qi(亓欣波)">
      <meta itemprop="description" content="Be interesting!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="亓欣波">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/04/pyqt4-widgets/" class="post-title-link" itemprop="url">PyQt4教程系列二：基本控件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-12-04 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-04T00:00:00+08:00">2017-12-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-25 15:20:30" itemprop="dateModified" datetime="2021-03-25T15:20:30+08:00">2021-03-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">programming</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/12/04/pyqt4-widgets/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/12/04/pyqt4-widgets/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文是对<a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/pyqt/">TutorialsPoint</a>上的教程的翻译。</p>
<h1 id="标签QLabel"><a href="#标签QLabel" class="headerlink" title="标签QLabel"></a>标签QLabel</h1><p>用来显示不可编辑的文字或图片，或GIF动画。也可用作其他控件的占位符。纯文本、超链接或富文本都可以显示在这个Label上。</p>
<h2 id="QLabel类的函数"><a href="#QLabel类的函数" class="headerlink" title="QLabel类的函数"></a>QLabel类的函数</h2><ol>
<li>setAlignment()：对齐文本，参数有Qt.AlignLeft、Qt.AlignRight、Qt.AlignCenter、Qt.AlignJustify</li>
<li>setIndent()：设置文本缩进</li>
<li>setPixmap()：显示一张图片</li>
<li>Text()：显示label的标题</li>
<li>setText(): 编写程序来设定标题</li>
<li>selectedText()：显示所选文本，其中textInteractionFlag必须设为TextSelectableByMouse</li>
<li>setBuddy()：将label与某个输入widget相关联</li>
<li>setWordWrap()： Enables or disables wrapping text in the label</li>
</ol>
<h2 id="QLabel类的信号"><a href="#QLabel类的信号" class="headerlink" title="QLabel类的信号"></a>QLabel类的信号</h2><ol>
<li>linkActivated：如果Label上面的超链接被点击了，那么就打开URL。setOpenExternalLinks必须被设为true。</li>
<li>linkHovered：当鼠标悬停在Label上面的超链接时，与该信号相关联的Slot函数将被调用</li>
</ol>
<h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">def <span class="title">window</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">   app =</span> <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   win = <span class="built_in">QWidget</span>() </span><br><span class="line">	</span><br><span class="line">   l1 = <span class="built_in">QLabel</span>()</span><br><span class="line">   l2 = <span class="built_in">QLabel</span>()</span><br><span class="line">   l3 = <span class="built_in">QLabel</span>()</span><br><span class="line">   l4 = <span class="built_in">QLabel</span>()</span><br><span class="line">	</span><br><span class="line">   l1.<span class="built_in">setText</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">   l4.<span class="built_in">setText</span>(<span class="string">&quot;TutorialsPoint&quot;</span>)</span><br><span class="line">   l2.<span class="built_in">setText</span>(<span class="string">&quot;welcome to Python GUI Programming&quot;</span>)</span><br><span class="line">	</span><br><span class="line">   l1.<span class="built_in">setAlignment</span>(Qt.AlignCenter)</span><br><span class="line">   l3.<span class="built_in">setAlignment</span>(Qt.AlignCenter)</span><br><span class="line">   l4.<span class="built_in">setAlignment</span>(Qt.AlignRight)</span><br><span class="line">   l3.<span class="built_in">setPixmap</span>(<span class="built_in">QPixmap</span>(<span class="string">&quot;python.jpg&quot;</span>))</span><br><span class="line">	</span><br><span class="line">   vbox = <span class="built_in">QVBoxLayout</span>()</span><br><span class="line">   vbox.<span class="built_in">addWidget</span>(l1)</span><br><span class="line">   vbox.<span class="built_in">addStretch</span>()</span><br><span class="line">   vbox.<span class="built_in">addWidget</span>(l2)</span><br><span class="line">   vbox.<span class="built_in">addStretch</span>()</span><br><span class="line">   vbox.<span class="built_in">addWidget</span>(l3)</span><br><span class="line">   vbox.<span class="built_in">addStretch</span>()</span><br><span class="line">   vbox.<span class="built_in">addWidget</span>(l4)</span><br><span class="line">	</span><br><span class="line">   l1.<span class="built_in">setOpenExternalLinks</span>(True)</span><br><span class="line">   l4.linkActivated.<span class="built_in">connect</span>(clicked)</span><br><span class="line">   l2.linkHovered.<span class="built_in">connect</span>(hovered)</span><br><span class="line">   l1.<span class="built_in">setTextInteractionFlags</span>(Qt.TextSelectableByMouse)</span><br><span class="line">   win.<span class="built_in">setLayout</span>(vbox)</span><br><span class="line">	</span><br><span class="line">   win.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;QLabel Demo&quot;</span>)</span><br><span class="line">   win.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">def <span class="built_in">hovered</span>():</span><br><span class="line">   print <span class="string">&quot;hovering&quot;</span></span><br><span class="line">def <span class="built_in">clicked</span>():</span><br><span class="line">   print <span class="string">&quot;clicked&quot;</span></span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">window</span>()</span><br></pre></td></tr></table></figure>

<h1 id="单行输入QLineEdit"><a href="#单行输入QLineEdit" class="headerlink" title="单行输入QLineEdit"></a>单行输入QLineEdit</h1><p>最常使用的输入框，可供输入一行文字。输入多行文字时需要使用QTextEdit。</p>
<h2 id="QLineEdit类的函数"><a href="#QLineEdit类的函数" class="headerlink" title="QLineEdit类的函数"></a>QLineEdit类的函数</h2><ol>
<li>setAlignment()：同上</li>
<li>clear()：清除内容</li>
<li>setEchoMode()：控制输入框中文本的样式，参数有QLineEdit.Normal、QLineEdit.NoEcho、QLineEdit.Password、QLineEdit.PasswordEchoOnEdit</li>
<li>setMaxLength()：设置输入的字符最大长度</li>
<li>setReadOnly()：使文本框不可编辑</li>
<li>setText()：同上</li>
<li>text()：取得文本</li>
<li>setValidator()：设置生效规则。参数有：QIntValidator(限制输入为整数)、QDoubleValidator(浮点数)、QRegexpValidator(正则表达式)</li>
<li>setInputMask()：通过结合符号来设定输入的规范</li>
<li>setFont()：设置字体，通过QFont()来设置</li>
</ol>
<h2 id="QLineEdit类的信号"><a href="#QLineEdit类的信号" class="headerlink" title="QLineEdit类的信号"></a>QLineEdit类的信号</h2><ol>
<li>cursorPositionChanged()：鼠标移动</li>
<li>editingFinished()：点击回车或者输入框失去焦点</li>
<li>returnPressed()：点击回车</li>
<li>selectionChanged()：所选文本变化</li>
<li>textChanged()：通过输入或者编程改变了输入框中的文本</li>
<li>textEdited()：文本被编辑</li>
</ol>
<h2 id="举例-1"><a href="#举例-1" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">def <span class="title">window</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">   app =</span> <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   win = <span class="built_in">QWidget</span>()</span><br><span class="line">	</span><br><span class="line">   e1 = <span class="built_in">QLineEdit</span>()                               </span><br><span class="line">   e1.<span class="built_in">setValidator</span>(<span class="built_in">QIntValidator</span>())                 # e1只接收整数</span><br><span class="line">   e1.<span class="built_in">setMaxLength</span>(<span class="number">4</span>)                               # 整数最多有四位</span><br><span class="line">   e1.<span class="built_in">setAlignment</span>(Qt.AlignRight)</span><br><span class="line">   e1.<span class="built_in">setFont</span>(<span class="built_in">QFont</span>(<span class="string">&quot;Arial&quot;</span>,<span class="number">20</span>))</span><br><span class="line">	</span><br><span class="line">   e2 = <span class="built_in">QLineEdit</span>()</span><br><span class="line">   e2.<span class="built_in">setValidator</span>(<span class="built_in">QDoubleValidator</span>(<span class="number">0.99</span>,<span class="number">99.99</span>,<span class="number">2</span>))  # 最多两位小数</span><br><span class="line">	</span><br><span class="line">   flo = <span class="built_in">QFormLayout</span>()</span><br><span class="line">   flo.<span class="built_in">addRow</span>(<span class="string">&quot;integer validator&quot;</span>, e1)</span><br><span class="line">   flo.<span class="built_in">addRow</span>(<span class="string">&quot;Double validator&quot;</span>,e2)</span><br><span class="line">	</span><br><span class="line">   e3 = <span class="built_in">QLineEdit</span>()</span><br><span class="line">   e3.setInputMask(&#x27;+99_9999_999999&#x27;)               # 设定输入的格式</span><br><span class="line">   flo.<span class="built_in">addRow</span>(<span class="string">&quot;Input Mask&quot;</span>,e3)</span><br><span class="line">	</span><br><span class="line">   e4 = <span class="built_in">QLineEdit</span>()</span><br><span class="line">   e4.textChanged.<span class="built_in">connect</span>(textchanged)              # 发射textChanged信号，执行下面的textchanged槽函数</span><br><span class="line">   flo.<span class="built_in">addRow</span>(<span class="string">&quot;Text changed&quot;</span>,e4)</span><br><span class="line">	</span><br><span class="line">   e5 = <span class="built_in">QLineEdit</span>()</span><br><span class="line">   e5.<span class="built_in">setEchoMode</span>(QLineEdit.Password)               # 设定显示模式为密码模式</span><br><span class="line">   flo.<span class="built_in">addRow</span>(<span class="string">&quot;Password&quot;</span>,e5)</span><br><span class="line">	</span><br><span class="line">   e6 = <span class="built_in">QLineEdit</span>(<span class="string">&quot;Hello Python&quot;</span>)</span><br><span class="line">   e6.<span class="built_in">setReadOnly</span>(True)                             # e6只读</span><br><span class="line">   flo.<span class="built_in">addRow</span>(<span class="string">&quot;Read Only&quot;</span>,e6)</span><br><span class="line">	</span><br><span class="line">   e5.editingFinished.<span class="built_in">connect</span>(enterPress)           # e5发射editingFinished信号，执行下面的enterPress槽函数</span><br><span class="line">   win.<span class="built_in">setLayout</span>(flo)</span><br><span class="line">   win.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;PyQt&quot;</span>)</span><br><span class="line">   win.<span class="built_in">show</span>()</span><br><span class="line">	</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line"></span><br><span class="line">def <span class="built_in">textchanged</span>(text):</span><br><span class="line">   print <span class="string">&quot;contents of text box: &quot;</span>+text</span><br><span class="line">	</span><br><span class="line">def <span class="built_in">enterPress</span>():</span><br><span class="line">   print <span class="string">&quot;edited&quot;</span></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">window</span>()</span><br></pre></td></tr></table></figure>

<h1 id="按钮QPushButton"><a href="#按钮QPushButton" class="headerlink" title="按钮QPushButton"></a>按钮QPushButton</h1><p>显示一个按钮，当点击时可以通过编程来调用一个确定的函数。</p>
<h2 id="QPushButton类的函数"><a href="#QPushButton类的函数" class="headerlink" title="QPushButton类的函数"></a>QPushButton类的函数</h2><ol>
<li>setCheckable()：设为true时识别按钮是按压还是释放</li>
<li>toggle()：在可选状态之间切换</li>
<li>setIcon()：显示图标</li>
<li>setEnabled()：当设为false时，按钮失效，因此点击时不会发射信号</li>
<li>isChecked()：返回按钮的布尔状态</li>
<li>setDefault()：设置按钮成为默认值</li>
<li>setText()：编写程序设置按钮的标题</li>
<li>text()：取回标题</li>
</ol>
<h2 id="QPushButton类的信号"><a href="#QPushButton类的信号" class="headerlink" title="QPushButton类的信号"></a>QPushButton类的信号</h2><p>主要就是clicked信号。</p>
<h2 id="举例-2"><a href="#举例-2" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">Form</span><span class="params">(QDialog)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent=</span>None):</span><br><span class="line">      <span class="built_in">super</span>(Form, self).__init__(parent)</span><br><span class="line">		</span><br><span class="line">      layout = <span class="built_in">QVBoxLayout</span>()</span><br><span class="line">      self.b1 = <span class="built_in">QPushButton</span>(<span class="string">&quot;Button1&quot;</span>)</span><br><span class="line">      self.b1.<span class="built_in">setCheckable</span>(True)                               # 识别b1的状态</span><br><span class="line">      self.b1.<span class="built_in">toggle</span>()                                         # 在状态之间切换</span><br><span class="line">      self.b1.clicked.<span class="built_in">connect</span>(lambda:self.<span class="built_in">whichbtn</span>(self.b1))   # 发射clicked信号并连接下面的whichbtn槽函数</span><br><span class="line">      self.b1.clicked.<span class="built_in">connect</span>(self.btnstate)                   # 发射clicked信号并连接下面的btnstate槽函数</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.b1)</span><br><span class="line">		</span><br><span class="line">      self.b2 = <span class="built_in">QPushButton</span>()</span><br><span class="line">      self.b2.<span class="built_in">setIcon</span>(<span class="built_in">QIcon</span>(<span class="built_in">QPixmap</span>(<span class="string">&quot;python.gif&quot;</span>)))            # b2设置图标</span><br><span class="line">      self.b2.clicked.<span class="built_in">connect</span>(lambda:self.<span class="built_in">whichbtn</span>(self.b2))</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.b2)</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line"></span><br><span class="line">      self.b3 = <span class="built_in">QPushButton</span>(<span class="string">&quot;Disabled&quot;</span>)                        # b3不可按</span><br><span class="line">      self.b3.<span class="built_in">setEnabled</span>(False)</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.b3)</span><br><span class="line">		</span><br><span class="line">      self.b4 = <span class="built_in">QPushButton</span>(<span class="string">&quot;&amp;Default&quot;</span>)                        # 名称中加上前缀&amp;，这样就可以使用快捷键Alt+D来点击该按钮</span><br><span class="line">      self.b4.<span class="built_in">setDefault</span>(True)</span><br><span class="line">      self.b4.clicked.<span class="built_in">connect</span>(lambda:self.<span class="built_in">whichbtn</span>(self.b4))</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.b4)</span><br><span class="line">      </span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;Button demo&quot;</span>)</span><br><span class="line"></span><br><span class="line">   def <span class="built_in">btnstate</span>(self):</span><br><span class="line">      <span class="keyword">if</span> self.b1.<span class="built_in">isChecked</span>():</span><br><span class="line">         print <span class="string">&quot;button pressed&quot;</span></span><br><span class="line">      <span class="keyword">else</span>:</span><br><span class="line">         print <span class="string">&quot;button released&quot;</span></span><br><span class="line">			</span><br><span class="line">   def <span class="built_in">whichbtn</span>(self,b):</span><br><span class="line">      print <span class="string">&quot;clicked button is &quot;</span>+b.<span class="built_in">text</span>()</span><br><span class="line"></span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">Form</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>
<h1 id="单选框QRadioButton"><a href="#单选框QRadioButton" class="headerlink" title="单选框QRadioButton"></a>单选框QRadioButton</h1><p>显示一个带有文字标签的可选按钮，可在表单中选择某一个选项，是单选按钮。该类派生自QAbstractButton。<br>单选按钮默认是排他的，即一次只能选择一个选项。可以把Radio Button放入QGroupBox或QButtonGroup中以创建更多可选的选项。</p>
<h2 id="QRadioButton的函数"><a href="#QRadioButton的函数" class="headerlink" title="QRadioButton的函数"></a>QRadioButton的函数</h2><ol>
<li>setChecked()：更改单选按钮的状态</li>
<li>setText()：设置与按钮相关联的标签</li>
<li>text()：取得按钮的标题</li>
<li>isChecked()：检查按钮是否被选择</li>
</ol>
<h2 id="QRadioButton的信号"><a href="#QRadioButton的信号" class="headerlink" title="QRadioButton的信号"></a>QRadioButton的信号</h2><p>默认信号是toggled()，也可以使用从QAbstractButton类中继承的其他信号。</p>
<h2 id="举例-3"><a href="#举例-3" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">Radiodemo</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(Radiodemo, self).__init__(parent)</span><br><span class="line">		</span><br><span class="line">      layout = <span class="built_in">QHBoxLayout</span>()</span><br><span class="line">      self.b1 = <span class="built_in">QRadioButton</span>(<span class="string">&quot;Button1&quot;</span>)</span><br><span class="line">      self.b1.<span class="built_in">setChecked</span>(True)                                # b1默认是勾选的</span><br><span class="line">      self.b1.toggled.<span class="built_in">connect</span>(lambda:self.<span class="built_in">btnstate</span>(self.b1))  # 发射toggled信号，连接btnstate槽函数</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.b1)</span><br><span class="line">		</span><br><span class="line">      self.b2 = <span class="built_in">QRadioButton</span>(<span class="string">&quot;Button2&quot;</span>)</span><br><span class="line">      self.b2.toggled.<span class="built_in">connect</span>(lambda:self.<span class="built_in">btnstate</span>(self.b2))</span><br><span class="line"></span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.b2)</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;RadioButton demo&quot;</span>)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">btnstate</span>(self,b):</span><br><span class="line">	</span><br><span class="line">      <span class="keyword">if</span> b.<span class="built_in">text</span>() == <span class="string">&quot;Button1&quot;</span>:</span><br><span class="line">         <span class="keyword">if</span> b.<span class="built_in">isChecked</span>() == True:</span><br><span class="line">            print b.<span class="built_in">text</span>()+<span class="string">&quot; is selected&quot;</span></span><br><span class="line">         <span class="keyword">else</span>:</span><br><span class="line">            print b.<span class="built_in">text</span>()+<span class="string">&quot; is deselected&quot;</span></span><br><span class="line">				</span><br><span class="line">      <span class="keyword">if</span> b.<span class="built_in">text</span>() == <span class="string">&quot;Button2&quot;</span>:</span><br><span class="line">         <span class="keyword">if</span> b.<span class="built_in">isChecked</span>() == True:</span><br><span class="line">            print b.<span class="built_in">text</span>()+<span class="string">&quot; is selected&quot;</span></span><br><span class="line">         <span class="keyword">else</span>:</span><br><span class="line">            print b.<span class="built_in">text</span>()+<span class="string">&quot; is deselected&quot;</span></span><br><span class="line">				</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line"></span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">Radiodemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>
<h1 id="复选框QCheckBox"><a href="#复选框QCheckBox" class="headerlink" title="复选框QCheckBox"></a>复选框QCheckBox</h1><p>文字标签之前的矩形框，是多选按钮。<br>多选按钮默认是不排他的，如果想要手动排他，需要将这些复选框放入QButtonGroup中。</p>
<h2 id="QCheckBox的函数"><a href="#QCheckBox的函数" class="headerlink" title="QCheckBox的函数"></a>QCheckBox的函数</h2><ol>
<li>setChecked()：更改按钮状态</li>
<li>setText()：设置标签</li>
<li>text()：取回标题</li>
<li>isChecked()：查看是否被勾选</li>
<li>setTriState()：提供无状态变化</li>
</ol>
<h2 id="QCheckBox的信号"><a href="#QCheckBox的信号" class="headerlink" title="QCheckBox的信号"></a>QCheckBox的信号</h2><p>有toggled()信号。还有stateChanged()信号，每次复选框勾选或清除时，都会发射该信号。</p>
<h2 id="举例-4"><a href="#举例-4" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">checkdemo</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(checkdemo, self).__init__(parent)</span><br><span class="line">      </span><br><span class="line">      layout = <span class="built_in">QHBoxLayout</span>()</span><br><span class="line">      self.b1 = <span class="built_in">QCheckBox</span>(<span class="string">&quot;Button1&quot;</span>)</span><br><span class="line">      self.b1.<span class="built_in">setChecked</span>(True)                                      # b1默认勾选</span><br><span class="line">      self.b1.stateChanged.<span class="built_in">connect</span>(lambda:self.<span class="built_in">btnstate</span>(self.b1))   # 发射stateChanged信号</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.b1)</span><br><span class="line">		</span><br><span class="line">      self.b2 = <span class="built_in">QCheckBox</span>(<span class="string">&quot;Button2&quot;</span>)</span><br><span class="line">      self.b2.toggled.<span class="built_in">connect</span>(lambda:self.<span class="built_in">btnstate</span>(self.b2))</span><br><span class="line"></span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.b2)</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;checkbox demo&quot;</span>)</span><br><span class="line"></span><br><span class="line">   def <span class="built_in">btnstate</span>(self,b):</span><br><span class="line">      <span class="keyword">if</span> b.<span class="built_in">text</span>() == <span class="string">&quot;Button1&quot;</span>:</span><br><span class="line">         <span class="keyword">if</span> b.<span class="built_in">isChecked</span>() == True:</span><br><span class="line">            print b.<span class="built_in">text</span>()+<span class="string">&quot; is selected&quot;</span></span><br><span class="line">         <span class="keyword">else</span>:</span><br><span class="line">            print b.<span class="built_in">text</span>()+<span class="string">&quot; is deselected&quot;</span></span><br><span class="line">				</span><br><span class="line">      <span class="keyword">if</span> b.<span class="built_in">text</span>() == <span class="string">&quot;Button2&quot;</span>:</span><br><span class="line">         <span class="keyword">if</span> b.<span class="built_in">isChecked</span>() == True:</span><br><span class="line">            print b.<span class="built_in">text</span>()+<span class="string">&quot; is selected&quot;</span></span><br><span class="line">         <span class="keyword">else</span>:</span><br><span class="line">            print b.<span class="built_in">text</span>()+<span class="string">&quot; is deselected&quot;</span></span><br><span class="line">				</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line"></span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">checkdemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<p>手动排他的形式为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">self.bg = <span class="built_in">QButtonGroup</span>()</span><br><span class="line">self.bg.<span class="built_in">addButton</span>(self.b1,<span class="number">1</span>)</span><br><span class="line">self.bg.<span class="built_in">addButton</span>(self.b2,<span class="number">2</span>)</span><br><span class="line">self.bg.buttonClicked[QAbstractButton].<span class="built_in">connect</span>(self.btngroup)  # 发射buttonClicked信号</span><br><span class="line">def <span class="built_in">btngroup</span>(self,btn):</span><br><span class="line">   print btn.<span class="built_in">text</span>()+<span class="string">&quot; is selected&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="下拉列表QComboBox"><a href="#下拉列表QComboBox" class="headerlink" title="下拉列表QComboBox"></a>下拉列表QComboBox</h1><p>提供一个下拉列表供选择，这样就可以用很少的屏幕空间来显示当前选择项</p>
<h2 id="QComboBox的函数"><a href="#QComboBox的函数" class="headerlink" title="QComboBox的函数"></a>QComboBox的函数</h2><ol>
<li>addItem()：向集合中添加字符串</li>
<li>addItems()：以list的形式添加多个项目</li>
<li>Clear()：清除所有项目</li>
<li>count()：计算项目总数</li>
<li>currentText()：取回当前所选项目的文本</li>
<li>itemText()：显示属于特定索引的文本</li>
<li>currentIndex()：当前所选项的索引</li>
<li>setItemText()：改变特定索引的文本</li>
</ol>
<h2 id="QComboBox的信号"><a href="#QComboBox的信号" class="headerlink" title="QComboBox的信号"></a>QComboBox的信号</h2><ol>
<li>activated()：用户选择了某项</li>
<li>currentIndexChanged()：当前索引被用户或程序改变</li>
<li>highlighted()：某项被高亮</li>
</ol>
<h2 id="举例-5"><a href="#举例-5" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">combodemo</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(combodemo, self).__init__(parent)</span><br><span class="line">      </span><br><span class="line">      layout = <span class="built_in">QHBoxLayout</span>()</span><br><span class="line">      self.cb = <span class="built_in">QComboBox</span>()</span><br><span class="line">      self.cb.<span class="built_in">addItem</span>(<span class="string">&quot;C&quot;</span>)                                       # 添加一个项目</span><br><span class="line">      self.cb.<span class="built_in">addItem</span>(<span class="string">&quot;C++&quot;</span>)</span><br><span class="line">      self.cb.<span class="built_in">addItems</span>([<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;C#&quot;</span>, <span class="string">&quot;Python&quot;</span>])                 # 添加多个项目</span><br><span class="line">      self.cb.currentIndexChanged.<span class="built_in">connect</span>(self.selectionchange)  # 发射currentIndexChanged信号，连接下面的selectionchange槽</span><br><span class="line">		</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.cb)</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;combo box demo&quot;</span>)</span><br><span class="line"></span><br><span class="line">   def <span class="built_in">selectionchange</span>(self,i):</span><br><span class="line">      print <span class="string">&quot;Items in the list are :&quot;</span></span><br><span class="line">		</span><br><span class="line">      <span class="keyword">for</span> count in <span class="built_in">range</span>(self.cb.<span class="built_in">count</span>()):</span><br><span class="line">         print self.cb.<span class="built_in">itemText</span>(count)</span><br><span class="line">      print <span class="string">&quot;Current index&quot;</span>,i,<span class="string">&quot;selection changed &quot;</span>,self.cb.<span class="built_in">currentText</span>()</span><br><span class="line">		</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">combodemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>
<h1 id="调值框QSpinBox"><a href="#调值框QSpinBox" class="headerlink" title="调值框QSpinBox"></a>调值框QSpinBox</h1><p>一个显示整数的文本框，右侧可以有上下按钮调节。<br>默认情况下，整数值从0开始，最大是99，步长为1。如果想用浮点数，需要使用QDoubleSpinBox。</p>
<h2 id="QSpinBox的函数"><a href="#QSpinBox的函数" class="headerlink" title="QSpinBox的函数"></a>QSpinBox的函数</h2><ol>
<li>setMinimum()：设定最小值</li>
<li>setMaximum()：设定最大值</li>
<li>setRange()：设定最小值、最大值和步长</li>
<li>setValue()：编写程序来设定数值</li>
<li>Value()：返回当前值</li>
<li>singleStep()：设定步长</li>
</ol>
<h2 id="QSpinBox的信号"><a href="#QSpinBox的信号" class="headerlink" title="QSpinBox的信号"></a>QSpinBox的信号</h2><p>每次点击up/down按钮时，就会发射valueChanged()信号，相应的槽可以通过value()函数获取当前值。</p>
<h2 id="举例-6"><a href="#举例-6" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">spindemo</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(spindemo, self).__init__(parent)</span><br><span class="line">      </span><br><span class="line">      layout = <span class="built_in">QVBoxLayout</span>()</span><br><span class="line">      self.l1 = <span class="built_in">QLabel</span>(<span class="string">&quot;current value:&quot;</span>)</span><br><span class="line">      self.l1.<span class="built_in">setAlignment</span>(Qt.AlignCenter)</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.l1)</span><br><span class="line">      self.sp = <span class="built_in">QSpinBox</span>()</span><br><span class="line">		</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.sp)</span><br><span class="line">      self.sp.valueChanged.<span class="built_in">connect</span>(self.valuechange)         # 发射valueChanged信号，与下面的valuechange槽连接</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;SpinBox demo&quot;</span>)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">valuechange</span>(self):</span><br><span class="line">      self.l1.<span class="built_in">setText</span>(<span class="string">&quot;current value:&quot;</span>+<span class="built_in">str</span>(self.sp.<span class="built_in">value</span>())) # 用QLabel显示</span><br><span class="line"></span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">spindemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="滑块QSlider"><a href="#滑块QSlider" class="headerlink" title="滑块QSlider"></a>滑块QSlider</h1><p>提供一个沟槽，上面有一个滑块可以运动，可以用来控制一个有界值，滑块的位置代表了值的大小。<br>可以水平或垂直放置：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">self.sp = <span class="built_in">QSlider</span>(Qt.Horizontal)</span><br><span class="line">self.sp = <span class="built_in">QSlider</span>(Qt.Vertical)</span><br></pre></td></tr></table></figure>

<h2 id="QSlider的函数"><a href="#QSlider的函数" class="headerlink" title="QSlider的函数"></a>QSlider的函数</h2><ol>
<li>setMinimum()：设置最小值</li>
<li>setMaximum()：最大值</li>
<li>setSingleStep()：步长</li>
<li>setValue()：通过编写程序控制数值</li>
<li>value()：取回当前值</li>
<li>setTickInterval()：在沟槽上放置刻度的数目</li>
<li>setTickPosition()：在沟槽上放置刻度，参数可以是QSlider.NoTicks(没有刻度)、QSlider.TicksBothSides(两边都有刻度线)、QSlider.TicksAbove(在上侧有刻度线)、QSlider.TicksBelow(下侧显示)、QSlider.TicksLeft(左侧)、QSlider.TicksRight(右侧)</li>
</ol>
<h2 id="QSlider的信号"><a href="#QSlider的信号" class="headerlink" title="QSlider的信号"></a>QSlider的信号</h2><ol>
<li>valueChanged()：滑块的值改变</li>
<li>sliderPressed()：用户开始按下滑块</li>
<li>sliderMoved()：用户拖动了滑块</li>
<li>sliderReleased()：用户释放了滑块</li>
</ol>
<h2 id="举例-7"><a href="#举例-7" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">sliderdemo</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(sliderdemo, self).__init__(parent)</span><br><span class="line"></span><br><span class="line">      layout = <span class="built_in">QVBoxLayout</span>()</span><br><span class="line">      self.l1 = <span class="built_in">QLabel</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">      self.l1.<span class="built_in">setAlignment</span>(Qt.AlignCenter)</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.l1)</span><br><span class="line">		</span><br><span class="line">      self.sl = <span class="built_in">QSlider</span>(Qt.Horizontal)</span><br><span class="line">      self.sl.<span class="built_in">setMinimum</span>(<span class="number">10</span>)</span><br><span class="line">      self.sl.<span class="built_in">setMaximum</span>(<span class="number">30</span>)</span><br><span class="line">      self.sl.<span class="built_in">setValue</span>(<span class="number">20</span>)</span><br><span class="line">      self.sl.<span class="built_in">setTickPosition</span>(QSlider.TicksBelow)</span><br><span class="line">      self.sl.<span class="built_in">setTickInterval</span>(<span class="number">5</span>)</span><br><span class="line">		</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.sl)</span><br><span class="line">      self.sl.valueChanged.<span class="built_in">connect</span>(self.valuechange)</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;SpinBox demo&quot;</span>)</span><br><span class="line"></span><br><span class="line">   def <span class="built_in">valuechange</span>(self):</span><br><span class="line">      size = self.sl.<span class="built_in">value</span>()</span><br><span class="line">      self.l1.<span class="built_in">setFont</span>(<span class="built_in">QFont</span>(<span class="string">&quot;Arial&quot;</span>,size))</span><br><span class="line">		</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">sliderdemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="菜单栏QMenuBar和QMenu"><a href="#菜单栏QMenuBar和QMenu" class="headerlink" title="菜单栏QMenuBar和QMenu"></a>菜单栏QMenuBar和QMenu</h1><p>菜单栏是在主窗口QMainWindow的标题栏下面的长条，用来显示QMenu类的对象。QMenu类可以向菜单栏加入widgets，也用来创建上下文菜单和弹出菜单。每个QMenu对象可能包含一个或多个QAction或级联QMenu对象。</p>
<h2 id="QMenu的函数"><a href="#QMenu的函数" class="headerlink" title="QMenu的函数"></a>QMenu的函数</h2><ol>
<li>menuBar()：返回主窗口的QMenubar对象</li>
<li>addMenu()：在菜单栏上添加一个新的QMenu对象</li>
<li>addAction()：对该QMenu对象添加一个新的动作，可包含文字或图标</li>
<li>setEnabled()：设置action的状态为enabled或disabled</li>
<li>addSeperator()：在菜单中添加分割线</li>
<li>Clear()：清楚菜单栏/菜单中的所有内容</li>
<li>setShortcut()：为action添加快捷键</li>
<li>setText()：为action添加文本</li>
<li>setTitle()：设定QMenu的标题</li>
<li>text()：取回与QAction对象相关联的文本</li>
<li>title()：取回与QMenu对象相关联的文本</li>
</ol>
<h2 id="QMenu的信号"><a href="#QMenu的信号" class="headerlink" title="QMenu的信号"></a>QMenu的信号</h2><p>当任一QAction按钮被点击时，QMenu都会发射triggered()信号。</p>
<h2 id="举例-8"><a href="#举例-8" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">menudemo</span><span class="params">(QMainWindow)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(menudemo, self).__init__(parent)</span><br><span class="line">		</span><br><span class="line">      layout = <span class="built_in">QHBoxLayout</span>()</span><br><span class="line">      bar = self.<span class="built_in">menuBar</span>()                                  # 创建菜单栏bar</span><br><span class="line">      file = bar.<span class="built_in">addMenu</span>(<span class="string">&quot;File&quot;</span>)                            # 在菜单栏上添加菜单file</span><br><span class="line">      file.<span class="built_in">addAction</span>(<span class="string">&quot;New&quot;</span>)                                 # 在菜单上添加动作New</span><br><span class="line">		</span><br><span class="line">      save = <span class="built_in">QAction</span>(<span class="string">&quot;Save&quot;</span>,self)</span><br><span class="line">      save.<span class="built_in">setShortcut</span>(<span class="string">&quot;Ctrl+S&quot;</span>)                            # 为动作save创建快捷键</span><br><span class="line">      file.<span class="built_in">addAction</span>(save)                                  # 在菜单file上添加动作save</span><br><span class="line">		</span><br><span class="line">      edit = file.<span class="built_in">addMenu</span>(<span class="string">&quot;Edit&quot;</span>)                           # 在菜单file上再添加一个级联菜单edit</span><br><span class="line">      edit.<span class="built_in">addAction</span>(<span class="string">&quot;copy&quot;</span>)</span><br><span class="line">      edit.<span class="built_in">addAction</span>(<span class="string">&quot;paste&quot;</span>)</span><br><span class="line">		</span><br><span class="line">      quit = <span class="built_in">QAction</span>(<span class="string">&quot;Quit&quot;</span>,self) </span><br><span class="line">      file.<span class="built_in">addAction</span>(quit)</span><br><span class="line">      file.triggered[QAction].<span class="built_in">connect</span>(self.processtrigger)  # 发射triggered信号，与processtrigger槽相连接</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;menu demo&quot;</span>)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">processtrigger</span>(self,q):</span><br><span class="line">      print q.<span class="built_in">text</span>()+<span class="string">&quot; is triggered&quot;</span></span><br><span class="line">		</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">menudemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="工具栏QToolBar"><a href="#工具栏QToolBar" class="headerlink" title="工具栏QToolBar"></a>工具栏QToolBar</h1><p>工具栏是一个可以移动的面板，包含文本按钮或者图标按钮或其他小控件。通常把它放在标题栏下面，也可以拖动它让它悬浮。</p>
<h2 id="QToolBar的函数"><a href="#QToolBar的函数" class="headerlink" title="QToolBar的函数"></a>QToolBar的函数</h2><ol>
<li>addAction()：添加文本或图标样式的工具按钮</li>
<li>addSeperator()：添加分割线</li>
<li>addWidget()：添加其他控件而不是按钮</li>
<li>addToolBar()：QMainWindow主窗口新增一个工具栏</li>
<li>setMovable()：设置工具栏可移动</li>
<li>setOrientation()：设成水平或垂直，参数为Qt.Horizontal或Qt.Vertical</li>
</ol>
<h2 id="QToolBar的信号"><a href="#QToolBar的信号" class="headerlink" title="QToolBar的信号"></a>QToolBar的信号</h2><p>当点击工具栏中的按钮时，发射ActionTriggered()信号。</p>
<h2 id="举例-9"><a href="#举例-9" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">tooldemo</span><span class="params">(QMainWindow)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(tooldemo, self).__init__(parent)</span><br><span class="line">      layout = <span class="built_in">QVBoxLayout</span>()</span><br><span class="line">      tb = self.<span class="built_in">addToolBar</span>(<span class="string">&quot;File&quot;</span>)</span><br><span class="line">		</span><br><span class="line">      <span class="keyword">new</span> = <span class="built_in">QAction</span>(<span class="built_in">QIcon</span>(<span class="string">&quot;new.bmp&quot;</span>),<span class="string">&quot;new&quot;</span>,self)</span><br><span class="line">      tb.<span class="built_in">addAction</span>(<span class="keyword">new</span>)</span><br><span class="line">      open = <span class="built_in">QAction</span>(<span class="built_in">QIcon</span>(<span class="string">&quot;open.bmp&quot;</span>),<span class="string">&quot;open&quot;</span>,self)</span><br><span class="line">      tb.<span class="built_in">addAction</span>(open)</span><br><span class="line">      save = <span class="built_in">QAction</span>(<span class="built_in">QIcon</span>(<span class="string">&quot;save.bmp&quot;</span>),<span class="string">&quot;save&quot;</span>,self)</span><br><span class="line">      tb.<span class="built_in">addAction</span>(save)</span><br><span class="line"></span><br><span class="line">      tb.actionTriggered[QAction].<span class="built_in">connect</span>(self.toolbtnpressed)</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;toolbar demo&quot;</span>)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">toolbtnpressed</span>(self,a):</span><br><span class="line">      print <span class="string">&quot;pressed tool button is&quot;</span>,a.<span class="built_in">text</span>()</span><br><span class="line">		</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">tooldemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="输入对话框QInputDialog"><a href="#输入对话框QInputDialog" class="headerlink" title="输入对话框QInputDialog"></a>输入对话框QInputDialog</h1><p>输入对话框是一个预配置的对话框，有一个文本框和两个按钮OK和Cancel。当用户点击OK或者回车时，父窗口就把输入收集到文本框中。<br>用户的输入可以是一个数字、字符串或者从列表中选择的项目。</p>
<h2 id="QInputDialog的函数"><a href="#QInputDialog的函数" class="headerlink" title="QInputDialog的函数"></a>QInputDialog的函数</h2><ol>
<li>getInt()：创建一个用于整数的spin box</li>
<li>getDouble()：创建一个用于浮点数的spin box</li>
<li>getText()：一个简单的行编辑区域用于输入文本</li>
<li>getItem()：可以从中选择某项的combo box</li>
</ol>
<h2 id="QInputDialog的函数-1"><a href="#QInputDialog的函数-1" class="headerlink" title="QInputDialog的函数"></a>QInputDialog的函数</h2><p>该对话框实际上是其他widget的整合，所以没有自己的信号</p>
<h2 id="举例-10"><a href="#举例-10" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">inputdialogdemo</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(inputdialogdemo, self).__init__(parent)</span><br><span class="line">		</span><br><span class="line">      layout = <span class="built_in">QFormLayout</span>()</span><br><span class="line">      self.btn = <span class="built_in">QPushButton</span>(<span class="string">&quot;Choose from list&quot;</span>)</span><br><span class="line">      self.btn.clicked.<span class="built_in">connect</span>(self.getItem)</span><br><span class="line">		</span><br><span class="line">      self.le = <span class="built_in">QLineEdit</span>()</span><br><span class="line">      layout.<span class="built_in">addRow</span>(self.btn,self.le)</span><br><span class="line">      self.btn1 = <span class="built_in">QPushButton</span>(<span class="string">&quot;get name&quot;</span>)</span><br><span class="line">      self.btn1.clicked.<span class="built_in">connect</span>(self.gettext)</span><br><span class="line">		</span><br><span class="line">      self.le1 = <span class="built_in">QLineEdit</span>()</span><br><span class="line">      layout.<span class="built_in">addRow</span>(self.btn1,self.le1)</span><br><span class="line">      self.btn2 = <span class="built_in">QPushButton</span>(<span class="string">&quot;Enter an integer&quot;</span>)</span><br><span class="line">      self.btn2.clicked.<span class="built_in">connect</span>(self.getint)</span><br><span class="line">		</span><br><span class="line">      self.le2 = <span class="built_in">QLineEdit</span>()</span><br><span class="line">      layout.<span class="built_in">addRow</span>(self.btn2,self.le2)</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;Input Dialog demo&quot;</span>)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">getItem</span>(self):</span><br><span class="line">      items = (<span class="string">&quot;C&quot;</span>, <span class="string">&quot;C++&quot;</span>, <span class="string">&quot;Java&quot;</span>, <span class="string">&quot;Python&quot;</span>)</span><br><span class="line">		</span><br><span class="line">      item, ok = QInputDialog.<span class="built_in">getItem</span>(self, <span class="string">&quot;select input dialog&quot;</span>, </span><br><span class="line">         <span class="string">&quot;list of languages&quot;</span>, items, <span class="number">0</span>, False)</span><br><span class="line">			</span><br><span class="line">      <span class="keyword">if</span> ok <span class="keyword">and</span> item:</span><br><span class="line">         self.le.<span class="built_in">setText</span>(item)</span><br><span class="line">			</span><br><span class="line">   def <span class="built_in">gettext</span>(self):</span><br><span class="line">      text, ok = QInputDialog.getText(self, &#x27;Text Input Dialog&#x27;, &#x27;Enter your name:&#x27;)</span><br><span class="line">		</span><br><span class="line">      <span class="keyword">if</span> ok:</span><br><span class="line">         self.le1.<span class="built_in">setText</span>(<span class="built_in">str</span>(text))</span><br><span class="line">			</span><br><span class="line">   <span class="function">def <span class="title">getint</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="function">      num,ok =</span> QInputDialog.<span class="built_in">getInt</span>(self,<span class="string">&quot;integer input dualog&quot;</span>,<span class="string">&quot;enter a number&quot;</span>)</span><br><span class="line">		</span><br><span class="line">      <span class="keyword">if</span> ok:</span><br><span class="line">         self.le2.<span class="built_in">setText</span>(<span class="built_in">str</span>(num))</span><br><span class="line">			</span><br><span class="line"><span class="function">def <span class="title">main</span><span class="params">()</span>: </span></span><br><span class="line"><span class="function">   app =</span> <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">inputdialogdemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="字体对话框QFontDialog"><a href="#字体对话框QFontDialog" class="headerlink" title="字体对话框QFontDialog"></a>字体对话框QFontDialog</h1><p>字体对话框的返回结果是一个QFont对象，可以用于父窗口的字体设置。</p>
<h2 id="QFontDialog的函数"><a href="#QFontDialog的函数" class="headerlink" title="QFontDialog的函数"></a>QFontDialog的函数</h2><ol>
<li>getfont()：显示字体选择对话框</li>
<li>setCurrentFont()：设置对话框的默认字体</li>
</ol>
<h2 id="QFontDialog的信号"><a href="#QFontDialog的信号" class="headerlink" title="QFontDialog的信号"></a>QFontDialog的信号</h2><p>也是没有自己的信号</p>
<h2 id="举例-11"><a href="#举例-11" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">fontdialogdemo</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(fontdialogdemo, self).__init__(parent)</span><br><span class="line">		</span><br><span class="line">      layout = <span class="built_in">QVBoxLayout</span>()</span><br><span class="line">      self.btn = <span class="built_in">QPushButton</span>(<span class="string">&quot;choose font&quot;</span>)</span><br><span class="line">      self.btn.clicked.<span class="built_in">connect</span>(self.getfont)</span><br><span class="line">		</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.btn)</span><br><span class="line">      self.le = <span class="built_in">QLabel</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">		</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.le)</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;Font Dialog demo&quot;</span>)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">getfont</span>(self):</span><br><span class="line">      font, ok = QFontDialog.<span class="built_in">getFont</span>()</span><br><span class="line">		</span><br><span class="line">      <span class="keyword">if</span> ok:</span><br><span class="line">         self.le.<span class="built_in">setFont</span>(font)</span><br><span class="line">			</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">fontdialogdemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="文件对话框QFileDialog"><a href="#文件对话框QFileDialog" class="headerlink" title="文件对话框QFileDialog"></a>文件对话框QFileDialog</h1><p>该对话框用于文件选择。</p>
<h2 id="QFileDialog的函数"><a href="#QFileDialog的函数" class="headerlink" title="QFileDialog的函数"></a>QFileDialog的函数</h2><ol>
<li>getOpenFileName()：返回用户所选文件的名字来打开它</li>
<li>getSaveFileName()：使用用户所选文件的名字来存储文件</li>
<li>setacceptMode()：决定是打开还是保存，参数是QFileDialog.AcceptOpen和QFileDialog.AcceptSave</li>
<li>setFileMode()：所选文件的类型，枚举常量有QFileDialog.AnyFile、QFileDialog.ExistingFile、QFileDialog.Directory和QFileDialog.Existingfiles </li>
<li>setFilter()：仅显示有特定扩展名的文件</li>
</ol>
<h2 id="QFileDialog的信号"><a href="#QFileDialog的信号" class="headerlink" title="QFileDialog的信号"></a>QFileDialog的信号</h2><p>同上，没有自己的信号</p>
<h2 id="举例-12"><a href="#举例-12" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">filedialogdemo</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(filedialogdemo, self).__init__(parent)</span><br><span class="line">		</span><br><span class="line">      layout = <span class="built_in">QVBoxLayout</span>()</span><br><span class="line">      self.btn = <span class="built_in">QPushButton</span>(<span class="string">&quot;QFileDialog static method demo&quot;</span>)</span><br><span class="line">      self.btn.clicked.<span class="built_in">connect</span>(self.getfile)</span><br><span class="line">		</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.btn)</span><br><span class="line">      self.le = <span class="built_in">QLabel</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">		</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.le)</span><br><span class="line">      self.btn1 = <span class="built_in">QPushButton</span>(<span class="string">&quot;QFileDialog object&quot;</span>)</span><br><span class="line">      self.btn1.clicked.<span class="built_in">connect</span>(self.getfiles)</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.btn1)</span><br><span class="line">		</span><br><span class="line">      self.contents = <span class="built_in">QTextEdit</span>()</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(self.contents)</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;File Dialog demo&quot;</span>)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">getfile</span>(self):</span><br><span class="line">      fname = QFileDialog.getOpenFileName(self, &#x27;Open file&#x27;, </span><br><span class="line">         &#x27;c:\\&#x27;,&quot;Image files (*.jpg *.gif)&quot;)</span><br><span class="line">      self.le.<span class="built_in">setPixmap</span>(<span class="built_in">QPixmap</span>(fname))</span><br><span class="line">		</span><br><span class="line">   <span class="function">def <span class="title">getfiles</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="function">      dlg =</span> <span class="built_in">QFileDialog</span>()</span><br><span class="line">      dlg.<span class="built_in">setFileMode</span>(QFileDialog.AnyFile)</span><br><span class="line">      dlg.<span class="built_in">setFilter</span>(<span class="string">&quot;Text files (*.txt)&quot;</span>)</span><br><span class="line">      filenames = <span class="built_in">QStringList</span>()</span><br><span class="line">		</span><br><span class="line">      <span class="keyword">if</span> dlg.<span class="built_in">exec_</span>():</span><br><span class="line">         filenames = dlg.<span class="built_in">selectedFiles</span>()</span><br><span class="line">         f = <span class="built_in">open</span>(filenames[<span class="number">0</span>], <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">			</span><br><span class="line">         with f:</span><br><span class="line">            data = f.<span class="built_in">read</span>()</span><br><span class="line">            self.contents.<span class="built_in">setText</span>(data)</span><br><span class="line">				</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">filedialogdemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="标签QTabWidget"><a href="#标签QTabWidget" class="headerlink" title="标签QTabWidget"></a>标签QTabWidget</h1><p>当需要同时显示很多项目时，可以用标签来归类管理。</p>
<h2 id="QTabWidget的函数"><a href="#QTabWidget的函数" class="headerlink" title="QTabWidget的函数"></a>QTabWidget的函数</h2><ol>
<li>addTab()：添加一个标签以及与之相关联的页面</li>
<li>insertTab()：在想要的位置插入一个标签及页面</li>
<li>removeTab()：删除给定索引的标签</li>
<li>setCurrentIndex()：设置当前可见的页面的索引作为当前操作</li>
<li>setCurrentWidget()：使可见页面作为当前</li>
<li>setTabBar()：设置标签栏</li>
<li>setTabPosition()：设置标签位置，参数有QTabWidget.North(页面上方)、QTabWidget.South(页面下方)、QTabWidget.West(页面左侧)、QTabWidget.East(页面右侧)</li>
<li>setTabText()：定义该tab的文本</li>
</ol>
<h2 id="QTabWidget的信号"><a href="#QTabWidget的信号" class="headerlink" title="QTabWidget的信号"></a>QTabWidget的信号</h2><ol>
<li>currentChanged()：当前页面索引变化</li>
<li>tabClosedRequested()：点击了标签上的关闭按钮</li>
</ol>
<h2 id="举例-13"><a href="#举例-13" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">tabdemo</span><span class="params">(QTabWidget)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(tabdemo, self).__init__(parent)</span><br><span class="line">      self.tab1 = <span class="built_in">QWidget</span>()</span><br><span class="line">      self.tab2 = <span class="built_in">QWidget</span>()</span><br><span class="line">      self.tab3 = <span class="built_in">QWidget</span>()</span><br><span class="line">		</span><br><span class="line">      self.<span class="built_in">addTab</span>(self.tab1,<span class="string">&quot;Tab 1&quot;</span>)</span><br><span class="line">      self.<span class="built_in">addTab</span>(self.tab2,<span class="string">&quot;Tab 2&quot;</span>)</span><br><span class="line">      self.<span class="built_in">addTab</span>(self.tab3,<span class="string">&quot;Tab 3&quot;</span>)</span><br><span class="line">      self.<span class="built_in">tab1UI</span>()</span><br><span class="line">      self.<span class="built_in">tab2UI</span>()</span><br><span class="line">      self.<span class="built_in">tab3UI</span>()</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;tab demo&quot;</span>)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">tab1UI</span>(self):</span><br><span class="line">      layout = <span class="built_in">QFormLayout</span>()</span><br><span class="line">      layout.<span class="built_in">addRow</span>(<span class="string">&quot;Name&quot;</span>,<span class="built_in">QLineEdit</span>())</span><br><span class="line">      layout.<span class="built_in">addRow</span>(<span class="string">&quot;Address&quot;</span>,<span class="built_in">QLineEdit</span>())</span><br><span class="line">      self.<span class="built_in">setTabText</span>(<span class="number">0</span>,<span class="string">&quot;Contact Details&quot;</span>)</span><br><span class="line">      self.tab1.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">tab2UI</span>(self):</span><br><span class="line">      layout = <span class="built_in">QFormLayout</span>()</span><br><span class="line">      sex = <span class="built_in">QHBoxLayout</span>()</span><br><span class="line">      sex.<span class="built_in">addWidget</span>(<span class="built_in">QRadioButton</span>(<span class="string">&quot;Male&quot;</span>))</span><br><span class="line">      sex.<span class="built_in">addWidget</span>(<span class="built_in">QRadioButton</span>(<span class="string">&quot;Female&quot;</span>))</span><br><span class="line">      layout.<span class="built_in">addRow</span>(<span class="built_in">QLabel</span>(<span class="string">&quot;Sex&quot;</span>),sex)</span><br><span class="line">      layout.<span class="built_in">addRow</span>(<span class="string">&quot;Date of Birth&quot;</span>,<span class="built_in">QLineEdit</span>())</span><br><span class="line">      self.<span class="built_in">setTabText</span>(<span class="number">1</span>,<span class="string">&quot;Personal Details&quot;</span>)</span><br><span class="line">      self.tab2.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">tab3UI</span>(self):</span><br><span class="line">      layout = <span class="built_in">QHBoxLayout</span>()</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(<span class="built_in">QLabel</span>(<span class="string">&quot;subjects&quot;</span>)) </span><br><span class="line">      layout.<span class="built_in">addWidget</span>(<span class="built_in">QCheckBox</span>(<span class="string">&quot;Physics&quot;</span>))</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(<span class="built_in">QCheckBox</span>(<span class="string">&quot;Maths&quot;</span>))</span><br><span class="line">      self.<span class="built_in">setTabText</span>(<span class="number">2</span>,<span class="string">&quot;Education Details&quot;</span>)</span><br><span class="line">      self.tab3.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">		</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">tabdemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="堆栈QStackedWidget"><a href="#堆栈QStackedWidget" class="headerlink" title="堆栈QStackedWidget"></a>堆栈QStackedWidget</h1><p>QStackedWidget跟QTabWidget类似，也能有效利用空间</p>
<h2 id="举例-14"><a href="#举例-14" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">stackedExample</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   def __init__(self):</span></span><br><span class="line"><span class="function">      super(stackedExample, self).__init__()</span></span><br><span class="line"><span class="function">      self.leftlist =</span> <span class="built_in">QListWidget</span> ()</span><br><span class="line">      self.leftlist.insertItem (0, &#x27;Contact&#x27; )</span><br><span class="line">      self.leftlist.insertItem (1, &#x27;Personal&#x27; )</span><br><span class="line">      self.leftlist.insertItem (2, &#x27;Educational&#x27; )</span><br><span class="line">		</span><br><span class="line">      self.stack1 = <span class="built_in">QWidget</span>()</span><br><span class="line">      self.stack2 = <span class="built_in">QWidget</span>()</span><br><span class="line">      self.stack3 = <span class="built_in">QWidget</span>()</span><br><span class="line">		</span><br><span class="line">      self.<span class="built_in">stack1UI</span>()</span><br><span class="line">      self.<span class="built_in">stack2UI</span>()</span><br><span class="line">      self.<span class="built_in">stack3UI</span>()</span><br><span class="line">		</span><br><span class="line">      self.Stack = <span class="built_in">QStackedWidget</span> (self)</span><br><span class="line">      self.Stack.<span class="built_in">addWidget</span> (self.stack1)</span><br><span class="line">      self.Stack.<span class="built_in">addWidget</span> (self.stack2)</span><br><span class="line">      self.Stack.<span class="built_in">addWidget</span> (self.stack3)</span><br><span class="line">		</span><br><span class="line">      hbox = <span class="built_in">QHBoxLayout</span>(self)</span><br><span class="line">      hbox.<span class="built_in">addWidget</span>(self.leftlist)</span><br><span class="line">      hbox.<span class="built_in">addWidget</span>(self.Stack)</span><br><span class="line"></span><br><span class="line">      self.<span class="built_in">setLayout</span>(hbox)</span><br><span class="line">      self.leftlist.currentRowChanged.<span class="built_in">connect</span>(self.display)</span><br><span class="line">      self.<span class="built_in">setGeometry</span>(<span class="number">300</span>, <span class="number">50</span>, <span class="number">10</span>,<span class="number">10</span>)</span><br><span class="line">      self.setWindowTitle(&#x27;StackedWidget demo&#x27;)</span><br><span class="line">      self.<span class="built_in">show</span>()</span><br><span class="line">		</span><br><span class="line">   <span class="function">def <span class="title">stack1UI</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="function">      layout =</span> <span class="built_in">QFormLayout</span>()</span><br><span class="line">      layout.<span class="built_in">addRow</span>(<span class="string">&quot;Name&quot;</span>,<span class="built_in">QLineEdit</span>())</span><br><span class="line">      layout.<span class="built_in">addRow</span>(<span class="string">&quot;Address&quot;</span>,<span class="built_in">QLineEdit</span>())</span><br><span class="line">      <span class="meta">#self.setTabText(0,<span class="meta-string">&quot;Contact Details&quot;</span>)</span></span><br><span class="line">      self.stack1.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">		</span><br><span class="line">   <span class="function">def <span class="title">stack2UI</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="function">      layout =</span> <span class="built_in">QFormLayout</span>()</span><br><span class="line">      sex = <span class="built_in">QHBoxLayout</span>()</span><br><span class="line">      sex.<span class="built_in">addWidget</span>(<span class="built_in">QRadioButton</span>(<span class="string">&quot;Male&quot;</span>))</span><br><span class="line">      sex.<span class="built_in">addWidget</span>(<span class="built_in">QRadioButton</span>(<span class="string">&quot;Female&quot;</span>))</span><br><span class="line">      layout.<span class="built_in">addRow</span>(<span class="built_in">QLabel</span>(<span class="string">&quot;Sex&quot;</span>),sex)</span><br><span class="line">      layout.<span class="built_in">addRow</span>(<span class="string">&quot;Date of Birth&quot;</span>,<span class="built_in">QLineEdit</span>())</span><br><span class="line">		</span><br><span class="line">      self.stack2.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">stack3UI</span>(self):</span><br><span class="line">      layout = <span class="built_in">QHBoxLayout</span>()</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(<span class="built_in">QLabel</span>(<span class="string">&quot;subjects&quot;</span>))</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(<span class="built_in">QCheckBox</span>(<span class="string">&quot;Physics&quot;</span>))</span><br><span class="line">      layout.<span class="built_in">addWidget</span>(<span class="built_in">QCheckBox</span>(<span class="string">&quot;Maths&quot;</span>))</span><br><span class="line">      self.stack3.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">display</span>(self,i):</span><br><span class="line">      self.Stack.<span class="built_in">setCurrentIndex</span>(i)</span><br><span class="line">		</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">stackedExample</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="分割条QSplitter"><a href="#分割条QSplitter" class="headerlink" title="分割条QSplitter"></a>分割条QSplitter</h1><p>分割条能够通过拖动子控件之间的边界，使得它们的尺寸动态变化。</p>
<h2 id="QSplitter的函数"><a href="#QSplitter的函数" class="headerlink" title="QSplitter的函数"></a>QSplitter的函数</h2><ol>
<li>addWidget()：对splitter的布局上添加控件</li>
<li>indexOf()：返回控件的索引</li>
<li>insertWidget()：在指定索引上插入控件</li>
<li>setOrientation()：设置布局水平还是垂直，参数有Qt.Horizontal和Qt.Vertical</li>
<li>setSizes()：设置每个控件的初始尺寸</li>
<li>count()：返回控件的总数</li>
</ol>
<h2 id="QSplitter的信号"><a href="#QSplitter的信号" class="headerlink" title="QSplitter的信号"></a>QSplitter的信号</h2><p>当分割条被拖动时，发射splitterMoved()信号。</p>
<h2 id="举例-15"><a href="#举例-15" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">Example</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   def __init__(self):</span></span><br><span class="line"><span class="function">      super(Example, self).__init__()</span></span><br><span class="line"><span class="function">      self.initUI()</span></span><br><span class="line"><span class="function">	</span></span><br><span class="line"><span class="function">   def initUI(self):</span></span><br><span class="line"><span class="function">	</span></span><br><span class="line"><span class="function">      hbox =</span> <span class="built_in">QHBoxLayout</span>(self)</span><br><span class="line">		</span><br><span class="line">      topleft = <span class="built_in">QFrame</span>()</span><br><span class="line">      topleft.<span class="built_in">setFrameShape</span>(QFrame.StyledPanel)</span><br><span class="line">      bottom = <span class="built_in">QFrame</span>()</span><br><span class="line">      bottom.<span class="built_in">setFrameShape</span>(QFrame.StyledPanel)</span><br><span class="line">		</span><br><span class="line">      splitter1 = <span class="built_in">QSplitter</span>(Qt.Horizontal)</span><br><span class="line">      textedit = <span class="built_in">QTextEdit</span>()</span><br><span class="line">      splitter1.<span class="built_in">addWidget</span>(topleft)</span><br><span class="line">      splitter1.<span class="built_in">addWidget</span>(textedit)</span><br><span class="line">      splitter1.<span class="built_in">setSizes</span>([<span class="number">100</span>,<span class="number">200</span>])</span><br><span class="line">		</span><br><span class="line">      splitter2 = <span class="built_in">QSplitter</span>(Qt.Vertical)</span><br><span class="line">      splitter2.<span class="built_in">addWidget</span>(splitter1)</span><br><span class="line">      splitter2.<span class="built_in">addWidget</span>(bottom)</span><br><span class="line">		</span><br><span class="line">      hbox.<span class="built_in">addWidget</span>(splitter2)</span><br><span class="line">		</span><br><span class="line">      self.<span class="built_in">setLayout</span>(hbox)</span><br><span class="line">      QApplication.setStyle(QStyleFactory.create(&#x27;Cleanlooks&#x27;))</span><br><span class="line">		</span><br><span class="line">      self.<span class="built_in">setGeometry</span>(<span class="number">300</span>, <span class="number">300</span>, <span class="number">300</span>, <span class="number">200</span>)</span><br><span class="line">      self.setWindowTitle(&#x27;QSplitter demo&#x27;)</span><br><span class="line">      self.<span class="built_in">show</span>()</span><br><span class="line">		</span><br><span class="line"><span class="function">def <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">   app =</span> <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">Example</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="可停靠窗口QDock"><a href="#可停靠窗口QDock" class="headerlink" title="可停靠窗口QDock"></a>可停靠窗口QDock</h1><p>可停靠窗口是主窗口的一个子窗口，可以悬浮，也可以附着在主窗口的特定位置。</p>
<h2 id="QDock的函数"><a href="#QDock的函数" class="headerlink" title="QDock的函数"></a>QDock的函数</h2><ol>
<li>setWidget()：在可停靠窗口上设置任意Widget</li>
<li>setFloating()：如果设为true，那么dock window可悬浮</li>
<li>setAllowedAreas()：设置该子窗口可停靠的位置，参数有LeftDockWidgetArea、RightDockWidgetArea、TopDockWidgetArea、BottomDockWidgetArea、NoDockWidgetArea</li>
<li>setFeatures()：设置子窗口的特性，参数有DockWidgetClosable、DockWidgetMovable、DockWidgetFloatable、DockWidgetVerticalTitleBar、NoDockWidgetFeatures</li>
</ol>
<h2 id="举例-16"><a href="#举例-16" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">dockdemo</span><span class="params">(QMainWindow)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(dockdemo, self).__init__(parent)</span><br><span class="line">		</span><br><span class="line">      layout = <span class="built_in">QHBoxLayout</span>()</span><br><span class="line">      bar = self.<span class="built_in">menuBar</span>()</span><br><span class="line">      file = bar.<span class="built_in">addMenu</span>(<span class="string">&quot;File&quot;</span>)</span><br><span class="line">      file.<span class="built_in">addAction</span>(<span class="string">&quot;New&quot;</span>)</span><br><span class="line">      file.<span class="built_in">addAction</span>(<span class="string">&quot;save&quot;</span>)</span><br><span class="line">      file.<span class="built_in">addAction</span>(<span class="string">&quot;quit&quot;</span>)</span><br><span class="line">		</span><br><span class="line">      self.items = <span class="built_in">QDockWidget</span>(<span class="string">&quot;Dockable&quot;</span>, self)</span><br><span class="line">      self.listWidget = <span class="built_in">QListWidget</span>()</span><br><span class="line">      self.listWidget.<span class="built_in">addItem</span>(<span class="string">&quot;item1&quot;</span>)</span><br><span class="line">      self.listWidget.<span class="built_in">addItem</span>(<span class="string">&quot;item2&quot;</span>)</span><br><span class="line">      self.listWidget.<span class="built_in">addItem</span>(<span class="string">&quot;item3&quot;</span>)</span><br><span class="line">		</span><br><span class="line">      self.items.<span class="built_in">setWidget</span>(self.listWidget)</span><br><span class="line">      self.items.<span class="built_in">setFloating</span>(False)</span><br><span class="line">      self.<span class="built_in">setCentralWidget</span>(<span class="built_in">QTextEdit</span>())</span><br><span class="line">      self.<span class="built_in">addDockWidget</span>(Qt.RightDockWidgetArea, self.items)</span><br><span class="line">      self.<span class="built_in">setLayout</span>(layout)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;Dock demo&quot;</span>)</span><br><span class="line">		</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">dockdemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="状态栏QStatusBar"><a href="#状态栏QStatusBar" class="headerlink" title="状态栏QStatusBar"></a>状态栏QStatusBar</h1><p>状态栏是主窗口下方的水平条，用来显示一个永久信息或者上下文有关的信息。<br>有三种类型的状态指示子：</p>
<ol>
<li>Temporary：占据大部分的状态栏。例如用来显示工具信息或者菜单信息</li>
<li>Normal：占据一部分的状态栏，可能会被temporary的信息覆盖掉，比如文字处理器中显示页数和行号</li>
<li>Permanent：从不隐藏。用于重要消息提示。</li>
</ol>
<p>用QStatusBar()函数调用主窗口的状态栏，再用setStatusBar()激活它：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">self.statusBar = <span class="built_in">QStatusBar</span>()</span><br><span class="line">self.<span class="built_in">setStatusBar</span>(self.statusBar)</span><br></pre></td></tr></table></figure>
<h2 id="QStatusBar的函数"><a href="#QStatusBar的函数" class="headerlink" title="QStatusBar的函数"></a>QStatusBar的函数</h2><ol>
<li>addWidget()：在状态栏上添加控件</li>
<li>addPermanentWidget()：添加永久控件</li>
<li>showMessage()：在特定时间间隔内显示临时信息</li>
<li>clearMessage()：清除任意临时信息</li>
<li>removeWidget()：删除特定的控件</li>
</ol>
<h2 id="举例-17"><a href="#举例-17" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">statusdemo</span><span class="params">(QMainWindow)</span>:</span></span><br><span class="line"><span class="function">   def __init__(self, parent =</span> None):</span><br><span class="line">      <span class="built_in">super</span>(statusdemo, self).__init__(parent)</span><br><span class="line">		</span><br><span class="line">      bar = self.<span class="built_in">menuBar</span>()</span><br><span class="line">      file = bar.<span class="built_in">addMenu</span>(<span class="string">&quot;File&quot;</span>)</span><br><span class="line">      file.<span class="built_in">addAction</span>(<span class="string">&quot;show&quot;</span>)</span><br><span class="line">      file.<span class="built_in">addAction</span>(<span class="string">&quot;add&quot;</span>)</span><br><span class="line">      file.<span class="built_in">addAction</span>(<span class="string">&quot;remove&quot;</span>)</span><br><span class="line">      file.triggered[QAction].<span class="built_in">connect</span>(self.processtrigger)</span><br><span class="line">      self.<span class="built_in">setCentralWidget</span>(<span class="built_in">QTextEdit</span>())</span><br><span class="line">		</span><br><span class="line">      self.statusBar = <span class="built_in">QStatusBar</span>()</span><br><span class="line">      self.b = <span class="built_in">QPushButton</span>(<span class="string">&quot;click here&quot;</span>)</span><br><span class="line">      self.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;QStatusBar Example&quot;</span>)</span><br><span class="line">      self.<span class="built_in">setStatusBar</span>(self.statusBar)</span><br><span class="line">		</span><br><span class="line">   def <span class="built_in">processtrigger</span>(self,q):</span><br><span class="line">	</span><br><span class="line">      <span class="keyword">if</span> (q.<span class="built_in">text</span>() == <span class="string">&quot;show&quot;</span>):</span><br><span class="line">         self.statusBar.<span class="built_in">showMessage</span>(q.<span class="built_in">text</span>()+<span class="string">&quot; is clicked&quot;</span>,<span class="number">2000</span>)</span><br><span class="line">			</span><br><span class="line">      <span class="keyword">if</span> q.<span class="built_in">text</span>() == <span class="string">&quot;add&quot;</span>:</span><br><span class="line">         self.statusBar.<span class="built_in">addWidget</span>(self.b)</span><br><span class="line">			</span><br><span class="line">      <span class="keyword">if</span> q.<span class="built_in">text</span>() == <span class="string">&quot;remove&quot;</span>:</span><br><span class="line">         self.statusBar.<span class="built_in">removeWidget</span>(self.b)</span><br><span class="line">         self.statusBar.<span class="built_in">show</span>()</span><br><span class="line">			</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">statusdemo</span>()</span><br><span class="line">   ex.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="列表QListWidget"><a href="#列表QListWidget" class="headerlink" title="列表QListWidget"></a>列表QListWidget</h1><p>QListWidget是一个基于item的界面来从一个list中添加或删除item。每个item都是一个QListWidgetItem对象。</p>
<h2 id="QListWidget的函数"><a href="#QListWidget的函数" class="headerlink" title="QListWidget的函数"></a>QListWidget的函数</h2><ol>
<li>addItem()：在列表中增加QListWidgetItem对象或字符串</li>
<li>addItems()：添加list中的每一项</li>
<li>insertItem()：在特定索引位置插入某项</li>
<li>clear()：清除内容</li>
<li>setCurrentItem()：通过编写程序来设定当前选择的项目</li>
<li>sortItems()：按升序重新排列项目</li>
</ol>
<h2 id="QListWidget的信号"><a href="#QListWidget的信号" class="headerlink" title="QListWidget的信号"></a>QListWidget的信号</h2><ol>
<li>currentItemChanged()：当前项目改变</li>
<li>itemClicked()：当前项目被点击</li>
</ol>
<h2 id="举例-18"><a href="#举例-18" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">myListWidget</span><span class="params">(QListWidget)</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   def Clicked(self,item):</span></span><br><span class="line"><span class="function">      QMessageBox.information(self, <span class="string">&quot;ListWidget&quot;</span>, <span class="string">&quot;You clicked: &quot;</span>+item.text())</span></span><br><span class="line"><span class="function">		</span></span><br><span class="line"><span class="function">def main():</span></span><br><span class="line"><span class="function">   app =</span> <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   listWidget = <span class="built_in">myListWidget</span>()</span><br><span class="line">	</span><br><span class="line">   #Resize width <span class="keyword">and</span> height</span><br><span class="line">   listWidget.<span class="built_in">resize</span>(<span class="number">300</span>,<span class="number">120</span>)</span><br><span class="line">	</span><br><span class="line">   listWidget.<span class="built_in">addItem</span>(<span class="string">&quot;Item 1&quot;</span>); </span><br><span class="line">   listWidget.<span class="built_in">addItem</span>(<span class="string">&quot;Item 2&quot;</span>);</span><br><span class="line">   listWidget.<span class="built_in">addItem</span>(<span class="string">&quot;Item 3&quot;</span>);</span><br><span class="line">   listWidget.<span class="built_in">addItem</span>(<span class="string">&quot;Item 4&quot;</span>);</span><br><span class="line">	</span><br><span class="line">   listWidget.setWindowTitle(&#x27;PyQT QListwidget Demo&#x27;)</span><br><span class="line">   listWidget.itemClicked.<span class="built_in">connect</span>(listWidget.Clicked)</span><br><span class="line">   </span><br><span class="line">   listWidget.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="滚动条QScrollBar"><a href="#滚动条QScrollBar" class="headerlink" title="滚动条QScrollBar"></a>滚动条QScrollBar</h1><p>一个滚动条有4个区域：两个箭头、滑块、页面控制区。</p>
<h2 id="QScrollBar的信号"><a href="#QScrollBar的信号" class="headerlink" title="QScrollBar的信号"></a>QScrollBar的信号</h2><ol>
<li>valueChanged()：滚动条的值改变</li>
<li>sliderMoved()：用户拖动滑块</li>
</ol>
<h2 id="举例-19"><a href="#举例-19" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">Example</span><span class="params">(QWidget)</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   def __init__(self):</span></span><br><span class="line"><span class="function">      super(Example, self).__init__()</span></span><br><span class="line"><span class="function">      self.initUI()</span></span><br><span class="line"><span class="function">		</span></span><br><span class="line"><span class="function">   def initUI(self):</span></span><br><span class="line"><span class="function">      vbox =</span> <span class="built_in">QVBoxLayout</span>(self)</span><br><span class="line">      hbox = <span class="built_in">QHBoxLayout</span>()</span><br><span class="line">      self.l1 = <span class="built_in">QLabel</span>(<span class="string">&quot;Drag scrollbar sliders to change color&quot;</span>)</span><br><span class="line">      self.l1.<span class="built_in">setFont</span>(<span class="built_in">QFont</span>(<span class="string">&quot;Arial&quot;</span>,<span class="number">16</span>))</span><br><span class="line">		</span><br><span class="line">      hbox.<span class="built_in">addWidget</span>(self.l1)</span><br><span class="line">      self.s1 = <span class="built_in">QScrollBar</span>()</span><br><span class="line">      self.s1.<span class="built_in">setMaximum</span>(<span class="number">255</span>)</span><br><span class="line">		</span><br><span class="line">      self.s1.sliderMoved.<span class="built_in">connect</span>(self.sliderval)</span><br><span class="line">      self.s2 = <span class="built_in">QScrollBar</span>()</span><br><span class="line">      self.s2.<span class="built_in">setMaximum</span>(<span class="number">255</span>)</span><br><span class="line">      self.s2.sliderMoved.<span class="built_in">connect</span>(self.sliderval)</span><br><span class="line">		</span><br><span class="line">      self.s3 = <span class="built_in">QScrollBar</span>()</span><br><span class="line">      self.s3.<span class="built_in">setMaximum</span>(<span class="number">255</span>)</span><br><span class="line">      self.s3.sliderMoved.<span class="built_in">connect</span>(self.sliderval)</span><br><span class="line">		</span><br><span class="line">      hbox.<span class="built_in">addWidget</span>(self.s1)</span><br><span class="line">      hbox.<span class="built_in">addWidget</span>(self.s2)</span><br><span class="line">      hbox.<span class="built_in">addWidget</span>(self.s3)</span><br><span class="line">		</span><br><span class="line">      self.<span class="built_in">setGeometry</span>(<span class="number">300</span>, <span class="number">300</span>, <span class="number">300</span>, <span class="number">200</span>)</span><br><span class="line">      self.setWindowTitle(&#x27;QSplitter demo&#x27;)</span><br><span class="line">      self.<span class="built_in">show</span>()</span><br><span class="line">		</span><br><span class="line">   <span class="function">def <span class="title">sliderval</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="function">      print self.s1.value(),self.s2.value(), self.s3.value()</span></span><br><span class="line"><span class="function">      palette =</span> <span class="built_in">QPalette</span>()</span><br><span class="line">      c = <span class="built_in">QColor</span>(self.s1.<span class="built_in">value</span>(),self.s2.<span class="built_in">value</span>(), self.s3.<span class="built_in">value</span>(),<span class="number">255</span>)</span><br><span class="line">      palette.<span class="built_in">setColor</span>(QPalette.Foreground,c)</span><br><span class="line">      self.l1.<span class="built_in">setPalette</span>(palette)</span><br><span class="line">		</span><br><span class="line">def <span class="built_in">main</span>():</span><br><span class="line">   app = <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">Example</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

<h1 id="日历QCalendarWidget"><a href="#日历QCalendarWidget" class="headerlink" title="日历QCalendarWidget"></a>日历QCalendarWidget</h1><p>可以用此控件方便地选择日期。</p>
<h2 id="QCalendarWidget的函数"><a href="#QCalendarWidget的函数" class="headerlink" title="QCalendarWidget的函数"></a>QCalendarWidget的函数</h2><ol>
<li>setDateRange()：设置可选日期的上界和下界</li>
<li>setFirstDayOfWeek()：设定第一列是星期几，参数有：Qt.Monday、Qt.Tuesday、…、Qt.Sunday</li>
<li>setMinimumDate()：设置日期下界</li>
<li>setMaximumDate()：设置日期上界</li>
<li>setSelectedDate()：设定一个QDate对象作为所选日期</li>
<li>showToday()：显示今天</li>
<li>selectedDate()：取得所选日期</li>
<li>setGridvisible()：设置日历网格的可见性</li>
</ol>
<h2 id="举例-20"><a href="#举例-20" class="headerlink" title="举例"></a>举例</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4 <span class="keyword">import</span> QtGui, QtCore</span><br><span class="line"></span><br><span class="line"><span class="function">class <span class="title">Example</span><span class="params">(QtGui.QWidget)</span>:</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   def __init__(self):</span></span><br><span class="line"><span class="function">      super(Example, self).__init__()</span></span><br><span class="line"><span class="function">      self.initUI()</span></span><br><span class="line"><span class="function">		</span></span><br><span class="line"><span class="function">   def initUI(self):</span></span><br><span class="line"><span class="function">	</span></span><br><span class="line"><span class="function">      cal =</span> QtGui.<span class="built_in">QCalendarWidget</span>(self)</span><br><span class="line">      cal.<span class="built_in">setGridVisible</span>(True)</span><br><span class="line">      cal.<span class="built_in">move</span>(<span class="number">20</span>, <span class="number">20</span>)</span><br><span class="line">      cal.clicked[QtCore.QDate].<span class="built_in">connect</span>(self.showDate)</span><br><span class="line">		</span><br><span class="line">      self.lbl = QtGui.<span class="built_in">QLabel</span>(self)</span><br><span class="line">      date = cal.<span class="built_in">selectedDate</span>()</span><br><span class="line">      self.lbl.<span class="built_in">setText</span>(date.<span class="built_in">toString</span>())</span><br><span class="line">      self.lbl.<span class="built_in">move</span>(<span class="number">20</span>, <span class="number">200</span>)</span><br><span class="line">		</span><br><span class="line">      self.<span class="built_in">setGeometry</span>(<span class="number">100</span>,<span class="number">100</span>,<span class="number">300</span>,<span class="number">300</span>)</span><br><span class="line">      self.setWindowTitle(&#x27;Calendar&#x27;)</span><br><span class="line">      self.<span class="built_in">show</span>()</span><br><span class="line">		</span><br><span class="line">   <span class="function">def <span class="title">showDate</span><span class="params">(self, date)</span>:</span></span><br><span class="line"><span class="function">	</span></span><br><span class="line"><span class="function">      self.lbl.setText(date.toString())</span></span><br><span class="line"><span class="function">		</span></span><br><span class="line"><span class="function">def main():</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   app =</span> QtGui.<span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   ex = <span class="built_in">Example</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">main</span>()</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qixinbo.github.io/2017/12/02/pyqt4-intro/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Xin-Bo Qi(亓欣波)">
      <meta itemprop="description" content="Be interesting!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="亓欣波">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/02/pyqt4-intro/" class="post-title-link" itemprop="url">PyQt4教程系列一：基本介绍和入门</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-12-02 00:00:00" itemprop="dateCreated datePublished" datetime="2017-12-02T00:00:00+08:00">2017-12-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-25 15:20:30" itemprop="dateModified" datetime="2021-03-25T15:20:30+08:00">2021-03-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">programming</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/12/02/pyqt4-intro/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/12/02/pyqt4-intro/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文是对<a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/pyqt/">TutorialsPoint</a>上的教程的翻译。</p>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>PyQt是一个GUI控件工具箱，是Qt的Python接口。<br>PyQt有两个主要版本：PyQt 4.x和PyQt 5.x，两者不兼容，且前者基于Python 2和Python 3，后者仅基于Python 3。</p>
<p>Linux下载安装：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-qt4</span><br><span class="line"><span class="keyword">or</span> </span><br><span class="line">sudo apt-get install pyqt5-dev-tools</span><br></pre></td></tr></table></figure>

<p>PyQt4由以下Modules组成：QtCore、QtGui、QtNetwork、QtXml、QtSvg、QtOpenGL、QtSql。</p>
<ul>
<li>QtCore包含非GUI的核心功能，用来处理时间、文件和目录、数据类型、流、URL、MIME类型、线程和进程。</li>
<li>QtGui包含图形组件及相关类，比如按钮、窗口、状态栏、工具栏、滑块、位图、颜色、字体等。</li>
<li>QtNetwork包含网络编程的相关类，比如用于TCP/IP和UDP服务端和客户端的编程。</li>
<li>QtXml包含处理XML文件的类，提供了用于SAX和DOM这些API的实现。</li>
<li>QtSvg提供了显示SVG文件内容的类。</li>
<li>QtOpenGL使用OpenGL库来处理2D和3D的图像，将Qt GUI库和OpenGL库无缝链接起来。</li>
<li>QtSql包含处理数据库的类。</li>
</ul>
<h1 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h1><p>使用PyQt创建”Hello World”的步骤如下：</p>
<ol>
<li>导入QtGui模块</li>
<li>创建一个应用对象app</li>
<li>创建一个QWidget对象w来创建最顶层的窗口，在上面添加一个QLabel对象b</li>
<li>设置label的标题为“Hello World”</li>
<li>通过setGeometry()方法定义窗口的尺寸和位置</li>
<li>通过app.exec()方法来进入应用对象的主体</li>
</ol>
<p>源码为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/python</span><br><span class="line"># -*- coding: utf<span class="number">-8</span> -*-</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4 <span class="keyword">import</span> QtGui</span><br><span class="line"></span><br><span class="line"><span class="function">def <span class="title">window</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">   app =</span> QtGui.<span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   w = QtGui.<span class="built_in">QWidget</span>()</span><br><span class="line">   b = QtGui.<span class="built_in">QLabel</span>(w)</span><br><span class="line">   b.<span class="built_in">setText</span>(<span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line">   w.<span class="built_in">setGeometry</span>(<span class="number">100</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">50</span>)</span><br><span class="line">   b.<span class="built_in">move</span>(<span class="number">50</span>,<span class="number">20</span>)</span><br><span class="line">   w.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;PyQt&quot;</span>)</span><br><span class="line">   w.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">window</span>()</span><br></pre></td></tr></table></figure>

<h1 id="信号和槽"><a href="#信号和槽" class="headerlink" title="信号和槽"></a>信号和槽</h1><p>与一般按顺序执行的控制台模式的应用程序不同，基于GUI的程序是由事件驱动的。事件events是响应用户动作的函数或方法，比如点击按钮、选择项目、鼠标点击等。用来构建GUI界面的挂件Widgets是这些事件的来源。每个PyQt Widget，都派生自QObject类，用来发射“信号”signals来响应一个或多个事件。信号本身不执行动作，它们连接到“槽”slot上。“槽”是可调用的Python函数。<br>在PyQt中，信号和槽的连接有多种方式。<br>最常用的方式是：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QtCore.QObject.<span class="built_in">connect</span>(widget, QtCore.<span class="built_in">SIGNAL</span>(‘signalname’), slot_function)</span><br></pre></td></tr></table></figure>
<p>更方便的方式是当widget发射signal时，调用slot函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">widget.signal.<span class="built_in">connect</span>(slot_function)</span><br></pre></td></tr></table></figure>
<p>以下是两种方式的举例：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: utf<span class="number">-8</span> -*-</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4.QtCore <span class="keyword">import</span> *</span><br><span class="line">from PyQt4.QtGui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function">def <span class="title">window</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">   app =</span> <span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   win = <span class="built_in">QDialog</span>()</span><br><span class="line">   b1 = <span class="built_in">QPushButton</span>(win)</span><br><span class="line">   b1.<span class="built_in">setText</span>(<span class="string">&quot;Button1&quot;</span>)</span><br><span class="line">   b1.<span class="built_in">move</span>(<span class="number">50</span>,<span class="number">20</span>)</span><br><span class="line">   b1.clicked.<span class="built_in">connect</span>(b1_clicked)</span><br><span class="line"></span><br><span class="line">   b2 = <span class="built_in">QPushButton</span>(win)</span><br><span class="line">   b2.<span class="built_in">setText</span>(<span class="string">&quot;Button2&quot;</span>)</span><br><span class="line">   b2.<span class="built_in">move</span>(<span class="number">50</span>,<span class="number">50</span>)</span><br><span class="line">   QObject.<span class="built_in">connect</span>(b2,<span class="built_in">SIGNAL</span>(<span class="string">&quot;clicked()&quot;</span>),b2_clicked)</span><br><span class="line"></span><br><span class="line">   win.<span class="built_in">setGeometry</span>(<span class="number">100</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">100</span>)</span><br><span class="line">   win.<span class="built_in">setWindowTitle</span>(<span class="string">&quot;PyQt&quot;</span>)</span><br><span class="line">   win.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line"></span><br><span class="line">def <span class="built_in">b1_clicked</span>():</span><br><span class="line">   print <span class="string">&quot;Button 1 clicked&quot;</span></span><br><span class="line"></span><br><span class="line">def <span class="built_in">b2_clicked</span>():</span><br><span class="line">   print <span class="string">&quot;Button 2 clicked&quot;</span></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">window</span>()</span><br></pre></td></tr></table></figure>
<h1 id="布局管理"><a href="#布局管理" class="headerlink" title="布局管理"></a>布局管理</h1><p>一个widget在窗口中的位置可以通过指定以像素为单位的绝对坐标，该坐标是相对于使用setGeometry()方法定义的窗口的尺寸:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QWidget.<span class="built_in">setGeometry</span>(xpos, ypos, width, height)</span><br></pre></td></tr></table></figure>
<p>上面这句代码设定了窗口位于显示器的坐标点，以及它的尺寸。<br>具体的某个widget的位置代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: utf<span class="number">-8</span> -*-</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">from PyQt4 <span class="keyword">import</span> QtGui</span><br><span class="line"></span><br><span class="line"><span class="function">def <span class="title">window</span><span class="params">()</span>:</span></span><br><span class="line"><span class="function">   app =</span> QtGui.<span class="built_in">QApplication</span>(sys.argv)</span><br><span class="line">   w = QtGui.<span class="built_in">QWidget</span>()</span><br><span class="line">	</span><br><span class="line">   b = QtGui.<span class="built_in">QPushButton</span>(w)</span><br><span class="line">   b.<span class="built_in">setText</span>(<span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line">   b.<span class="built_in">move</span>(<span class="number">50</span>,<span class="number">20</span>)</span><br><span class="line">	</span><br><span class="line">   w.<span class="built_in">setGeometry</span>(<span class="number">10</span>,<span class="number">10</span>,<span class="number">300</span>,<span class="number">200</span>)</span><br><span class="line">   w.<span class="built_in">setWindowTitle</span>(“PyQt”)</span><br><span class="line">   w.<span class="built_in">show</span>()</span><br><span class="line">   sys.<span class="built_in">exit</span>(app.<span class="built_in">exec_</span>())</span><br><span class="line">	</span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">   <span class="built_in">window</span>()</span><br></pre></td></tr></table></figure>
<p>但是这种绝对坐标的方式有一些缺点：</p>
<ol>
<li>当window尺寸改变的时候，该widget的位置却不变</li>
<li>在有不同分辨率的设备上可能显示不统一</li>
<li>当布局需要改变时，该更改会很费劲，因为需要重新设置位置</li>
</ol>
<p>PyQt的API针对上述问题提供了一些更优雅的管理widget位置的方法：</p>
<ol>
<li>QBoxLayout类：垂直或水平地排列widgets。它的派生类是QVBoxLayout（垂直排列）和QHBoxLayout（水平排列）</li>
<li>QGridLayout类：以网格单元的形式排列，包含addWidget()方法。任何Widget都可以通过指定单元的行数和列数来添加</li>
<li>QFormLayout类：可以很方便地创建两列的表格，一列（通常是右列）是输入栏，一列（通常是左列）是相应的标签。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qixinbo.github.io/2017/11/29/icme/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Xin-Bo Qi(亓欣波)">
      <meta itemprop="description" content="Be interesting!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="亓欣波">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/11/29/icme/" class="post-title-link" itemprop="url">对ICME的理解</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-11-29 00:00:00" itemprop="dateCreated datePublished" datetime="2017-11-29T00:00:00+08:00">2017-11-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-25 15:20:30" itemprop="dateModified" datetime="2021-03-25T15:20:30+08:00">2021-03-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/computational-material-science/" itemprop="url" rel="index"><span itemprop="name">computational material science</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/11/29/icme/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/11/29/icme/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="什么是ICME"><a href="#什么是ICME" class="headerlink" title="什么是ICME"></a>什么是ICME</h1><p>在TMS报告中，ICME的定义是“the integration of personnel (e.g., engineers, designers, etc.), computational models, experiments, design, and manufacturing processes across the product development cycle, for the purpose of accelerating and reducing the cost of development of a materials system or manufacturing process”，个人理解为将整个产品生产流程中的几何设计、材料选择、产品制造、性能测试、实际生产等环节全部连接在一起，缺一不可，并发挥计算机模拟在各个环节的作用，目的是为了节约时间和成本。<br>ICME与其他几个工业中的材料制造的概念有什么区别呢？</p>
<h2 id="ICME-VS-Digital-Twin"><a href="#ICME-VS-Digital-Twin" class="headerlink" title="ICME VS Digital Twin"></a>ICME VS Digital Twin</h2><p>Digital Twin是“数字化双胞胎”，意在将生产流程做一个数字化的“复制”。但我觉得相对于ICME，Digital Twin反而忽略了材料和测试这一块，而是更加重视设计和制造这两部分。即，它认为制造过程中所用的材料都是满足要求的。比如它用CAD软件画出了产品的几何设计，然后就将其放入服役条件中，分析其受力情形等，其中设置的材料属性也是宏观属性，没有考虑材料中的缺陷等，只是用到了结构力学的知识；另一种情形，使用CFD软件计算了材料制造过程中的流体性能，但是仍然没有下探到材料层面，只是用到了流体力学的知识，而忽略了流动过程中的气孔、共晶相、析出相等。而ICME强调材料这块同样重要。</p>
<h2 id="ICME-VS-Multiscale-Modeling"><a href="#ICME-VS-Multiscale-Modeling" class="headerlink" title="ICME VS Multiscale Modeling"></a>ICME VS Multiscale Modeling</h2><p>Multiscale Modeling是多尺度模拟，即将宏观、介观、微观模拟全部考虑进去，比如从原子电子尺度的计算，经过晶粒尺度的计算，再到工件尺度的计算。ICME的模拟这块目的是为了实现多尺度模拟，但是限于目前的计算能力，ICME允许模拟“分而治之”，比如材料成分的选择就可以只用第一性原理计算，材料的性能模拟就可以只用有限元等，且为了保证计算效率，有的影响不明显的尺度可以不用模拟。不同尺度的模拟输入输出可以互相作为初始条件和边界条件，以及参数传递等。</p>
<h1 id="ICME的特点"><a href="#ICME的特点" class="headerlink" title="ICME的特点"></a>ICME的特点</h1><p>ICME有以下几个特点：</p>
<h2 id="各个环节同等重要，缺一不可"><a href="#各个环节同等重要，缺一不可" class="headerlink" title="各个环节同等重要，缺一不可"></a>各个环节同等重要，缺一不可</h2><p>设计、材料、制造、测试等环节在ICME都同等重要，不能忽视其中某一个，认为其中某一个不重要。因此，ICME需要多个领域小组的协同配合，不能各自为战。</p>
<h2 id="流程非线性化"><a href="#流程非线性化" class="headerlink" title="流程非线性化"></a>流程非线性化</h2><p>ICME中的整个生产流程不是线性的，即一条龙流水线模式，而是不断反馈和迭代的过程。比如产品原型设计好后，通过Process Modeling和Material Modeling发现设计不合理，那就及时返工，在其他环节也是这样，只要某一环节出现问题，就打断整个流程，返回到前面进行修改。</p>
<h2 id="计算机模拟与V-amp-V验证"><a href="#计算机模拟与V-amp-V验证" class="headerlink" title="计算机模拟与V&amp;V验证"></a>计算机模拟与V&amp;V验证</h2><p>ICME强调在各个环节中都发挥计算机模拟的重要性，这样能够有效地减少实验成本和时间成本等。比如设计使用CAD软件和各种优化软件，材料使用ThermoCalc等数据库软件，制造使用CFD等软件，性能使用有限元软件等。但是也不盲从计算机模拟结果，而是及时使用Verification和Validation来验证模拟的正确性和准确性。</p>
<h2 id="定量预测与经验推测"><a href="#定量预测与经验推测" class="headerlink" title="定量预测与经验推测"></a>定量预测与经验推测</h2><p>以前的产品生产流程也都包含以上环节，但很多时候都是停留在经验基础上，但这种模式在变换产品后可能就不适用了，只能重新摸索。但ICME能够给出定量的理论基础，方便问题的排查和经验的迁移。</p>
<h1 id="ICME目前存在的问题"><a href="#ICME目前存在的问题" class="headerlink" title="ICME目前存在的问题"></a>ICME目前存在的问题</h1><p>ICME目前仅有几个成功的案例，还没有大规模的在工业中应用。比如缺乏软件支持等。</p>
<h1 id="我的角色"><a href="#我的角色" class="headerlink" title="我的角色"></a>我的角色</h1><p>开发基于材料微观组织的定量预测模型（目前的模拟都没有Microstructure-Based）、协助指定V&amp;V标准、数据库的整合</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qixinbo.github.io/2017/07/28/moose-run-details/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Xin-Bo Qi(亓欣波)">
      <meta itemprop="description" content="Be interesting!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="亓欣波">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/28/moose-run-details/" class="post-title-link" itemprop="url">MOOSE运行过程再分析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-07-28 00:00:00" itemprop="dateCreated datePublished" datetime="2017-07-28T00:00:00+08:00">2017-07-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-25 15:20:30" itemprop="dateModified" datetime="2021-03-25T15:20:30+08:00">2021-03-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/computational-material-science/" itemprop="url" rel="index"><span itemprop="name">computational material science</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/07/28/moose-run-details/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/07/28/moose-run-details/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文是对<a target="_blank" rel="noopener" href="http://qixinbo.info/2017/02/14/moose-run/">前文</a>的一个再次探索。<br>MOOSE项目太宏大，一点点来，这次先以解析怎样输入为主，还未涉及运行和求解，以后再不定期更新。</p>
<h1 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ExampleApp.h&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>声明具体问题类。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;MooseApp.h&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>用于创建和存储各种对象。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;AppFactory.h&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>声明AppFactory类，用于创建各种对象。里面有一个很隐藏的宏定义：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> registerApp(name) AppFactory::instance().reg<span class="meta-string">&lt;name&gt;</span>(#name)</span></span><br></pre></td></tr></table></figure>
<p>在ExampleApp中注册对象实际调用的就是它。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;Moose.h&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>该头文件的主要作用是声明Moose这个命名空间，其包含了libMesh的PerfLog头文件。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;MooseInit.h&quot;</span></span></span><br></pre></td></tr></table></figure>
<p>该头文件包含了libMesh的libmesh头文件，从LibMeshInit中Public派生出MooseInit类。</p>
<h1 id="预备工作"><a href="#预备工作" class="headerlink" title="预备工作"></a>预备工作</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">PerfLog <span class="title">Moose::perf_log</span><span class="params">(<span class="string">&quot;Example&quot;</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<p>PerfLog是libMesh的一个类，用于生成记录性能的日志，给其命名为Example。之所以使用前面要加上Moose，是因为在Moose命名空间中用extern已声明有这么一个变量。具体使用时通过在记录前和记录后加上成对的push和pop来记录。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">MooseInit <span class="title">init</span><span class="params">(argc, argv)</span></span>;</span><br></pre></td></tr></table></figure>
<p>执行初始化过程。这里先执行libMesh的初始化过程，然后再执行MOOSE的初始化，比如在不同进程中设置统一随机数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExampleApp::<span class="built_in">registerApps</span>();</span><br></pre></td></tr></table></figure>
<p>ExampleApp继承自MooseApp，它有三个静态成员函数，分别用来注册App、注册对象、关联语法。上面的registerApps实际调用的就是AppFactory类中的registerApp宏定义，且实际传递了ExampleApp作为实参，再来调用AppFactory中的成员函数reg，即：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> registerApp(name) AppFactory::instance().reg<span class="meta-string">&lt;name&gt;</span>(#name)</span></span><br></pre></td></tr></table></figure>
<p>这句话很巧妙，name有两个作用：一是用尖括号括住，这样可以对reg这个函数模板中的类型T用name进行实例化；二是前面加上井号，这是应用了井号在宏定义中的一个特殊作用，可以将name这个类替换成字符串，即后面的这个name是个字符串，正好作为reg的实参传入。看下面的代码就很清楚了：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reg</span><span class="params">(<span class="keyword">const</span> std::string &amp; name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (_name_to_build_pointer.<span class="built_in">find</span>(name) == _name_to_build_pointer.<span class="built_in">end</span>())</span><br><span class="line">  &#123;</span><br><span class="line">    _name_to_build_pointer[name] = &amp;buildApp&lt;T&gt;;</span><br><span class="line">    _name_to_params_pointer[name] = &amp;validParams&lt;T&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意最后一句话，正是这句话将ExampleApp这样的validParams读入，从而用于后面的create。</p>
<p>另外，注意，这里是对类的操作，用到了static，即static静态成员属于整个类，而不是某个实例化对象。这里还没有创建对象。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MooseApp * app = AppFactory::<span class="built_in">createApp</span>(<span class="string">&quot;ExampleApp&quot;</span>, argc, argv);</span><br></pre></td></tr></table></figure>
<p>这一步才创建对象，同样是使用了AppFactory的static成员creatApp。这里创建的是一个MooseApp指针，注意看MooseApp的构造函数可以发现，其实它是需要一个InputParameters形参的，这个是createApp中隐式传递的，传递的正是reg时读入的validParams<code>&lt;ExampleApp&gt;</code>类型的参数。<br>创建Example对象时，执行Example构造函数时，会注册对象，先是注册Moose公有的，再注册ExampleApp特有的，如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ExampleApp::<span class="built_in">ExampleApp</span>(InputParameters parameters) : <span class="built_in">MooseApp</span>(parameters)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">srand</span>(<span class="built_in">processor_id</span>());</span><br><span class="line"></span><br><span class="line">  Moose::<span class="built_in">registerObjects</span>(_factory);</span><br><span class="line">  ExampleApp::<span class="built_in">registerObjects</span>(_factory);</span><br><span class="line"></span><br><span class="line">  Moose::<span class="built_in">associateSyntax</span>(_syntax, _action_factory);</span><br><span class="line">  ExampleApp::<span class="built_in">associateSyntax</span>(_syntax, _action_factory);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在registerObjects函数中用到了大量的宏定义，所以在Doxygen文档中无法直接搜索到，实际的定义在Factory类的头文件中：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> registerSampler(name) registerObject(name)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> registerMesh(name) registerObject(name)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> registerMeshModifier(name) registerObject(name)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> registerConstraint(name) registerObject(name)</span></span><br></pre></td></tr></table></figure>
<p>在上面的构造函数中还会关联语法associaeSyntax，同样先关联Moose公有的，再关联ExampleApp特有的，这一步牵扯到注册Syntax和各种Action，比如Moose命名空间的associateSyntax：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Transfers</span></span><br><span class="line"><span class="built_in">registerSyntax</span>(<span class="string">&quot;AddTransferAction&quot;</span>, <span class="string">&quot;Transfers/*&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">addActionTypes</span>(syntax);</span><br><span class="line"><span class="built_in">registerActions</span>(syntax, action_factory);</span><br></pre></td></tr></table></figure>
<p>其中的registerActions也是一个宏定义。<br>而ExampleApp的associateSyntax则可以自定义，此例太简化，没有提供这部分的样子，但其他复杂的，比如ContactApp的associateSyntax就是下面这个样子：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">registerSyntax</span>(<span class="string">&quot;NodalAreaAction&quot;</span>, <span class="string">&quot;Contact/*&quot;</span>);</span><br><span class="line"><span class="built_in">registerSyntax</span>(<span class="string">&quot;NodalAreaVarAction&quot;</span>, <span class="string">&quot;Contact/*&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">registerAction</span>(ContactAction, <span class="string">&quot;add_aux_kernel&quot;</span>);</span><br><span class="line"><span class="built_in">registerAction</span>(ContactAction, <span class="string">&quot;add_aux_variable&quot;</span>);</span><br><span class="line"><span class="built_in">registerAction</span>(ContactAction, <span class="string">&quot;add_dirac_kernel&quot;</span>);</span><br></pre></td></tr></table></figure>
<h1 id="实际运行"><a href="#实际运行" class="headerlink" title="实际运行"></a>实际运行</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app-&gt;<span class="built_in">run</span>();</span><br></pre></td></tr></table></figure>
<p>run函数主要由三个函数组成：setupOptions、runInputFile和executeExecutioner。<br>MooseApp类的对象有若干个数据成员，且各有用处，比如对应于以上三个函数，InputParameters成员来存储命令行参数，ActionWarehouse成员来读取并运行输入文件，Executioner成员来执行求解器。</p>
<h2 id="setupOptions"><a href="#setupOptions" class="headerlink" title="setupOptions"></a>setupOptions</h2><p>该函数是virtual函数，但不是纯虚函数，所以子类ExampleApp可以使用基类MooseApp的实现。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::string <span class="title">hdr</span><span class="params">(header() + <span class="string">&quot;\n&quot;</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<p>这句纯粹是为了打印的显示方便，header是MooseApp的一个成员函数，是为了获得一个空字符串。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">multiAppLevel</span>() &gt; <span class="number">0</span>)</span><br><span class="line">  MooseUtils::<span class="built_in">indentMessage</span>(_name, hdr);</span><br></pre></td></tr></table></figure>
<p>这句是为了获得multiapp的level，master在0层上。这个multiappLevel是通过validParams这个函数模板所取得的。在InputParameters的头文件中有一个总的validParams函数模板的声明，它的返回类型是InputParameters，类型参数是T。后续的每个Moose对象都要在头文件中写明以其名字为类型的validParams函数的定义，这里利用的是函数模板的“显式特化”这个功能，如MooseApp的template <code>&lt;&gt;</code> InputParameters validParams<code>&lt;MooseApp&gt;</code>(){…}，在这个定义中，该对象会指明要添加什么样的参数。在MooseApp的构造函数的成员初始化器列表中，会对multiappLevel进行初始化。</p>
<p>setupOptions主要是根据命令行的输入，来配置整个系统。比如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (getParam&lt;<span class="keyword">bool</span>&gt;(<span class="string">&quot;no_timing&quot;</span>))</span><br><span class="line">  _pars.set&lt;<span class="keyword">bool</span>&gt;(<span class="string">&quot;timing&quot;</span>) = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<p>上述语句就是探测命令行中是否输入了–no-timing，一旦输入了，则不输出性能日志。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">isParamValid</span>(<span class="string">&quot;trap_fpe&quot;</span>))</span><br><span class="line">  Moose::_trap_fpe = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<p>上述语句就是探测命令行中是否输入了–trap-fpe，一旦输入了，则捕获浮点数异常。<br>探测这些命令时，都是使用的libMesh中的函数。</p>
<h2 id="runInputFile"><a href="#runInputFile" class="headerlink" title="runInputFile"></a>runInputFile</h2><p>这里面最重要的一个函数是：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_action_warehouse.<span class="built_in">executeAllActions</span>();</span><br></pre></td></tr></table></figure>
<p>该语句将会遍历仓库中的所有actions，然后执行它们。<br>这一步中一个重要的action是读入网格文件。</p>
<h2 id="executeExecutioner"><a href="#executeExecutioner" class="headerlink" title="executeExecutioner"></a>executeExecutioner</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_executioner-&gt;<span class="built_in">init</span>();</span><br><span class="line">_executioner-&gt;<span class="built_in">execute</span>();</span><br></pre></td></tr></table></figure>
<p>注意，_executioner是一个Executioner类型的智能共享指针。同时，init和execute都是纯虚函数，需要在子类中重载，因此，不同的子类有不同的实现。因为ex01是一个稳态问题，所以这里调用的是Steady的init和execute函数。</p>
<h3 id="init函数"><a href="#init函数" class="headerlink" title="init函数"></a>init函数</h3><p>这一步输出了计算参数信息：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Framework Information:</span><br><span class="line">MOOSE version:           git commit dacf1cf on <span class="number">2017</span><span class="number">-04</span><span class="number">-01</span></span><br><span class="line">PETSc Version:           <span class="number">3.7</span><span class="number">.5</span></span><br><span class="line">Current Time:            Wed Oct <span class="number">11</span> <span class="number">10</span>:<span class="number">53</span>:<span class="number">07</span> <span class="number">2017</span></span><br><span class="line">Executable Timestamp:    Wed Apr <span class="number">26</span> <span class="number">15</span>:<span class="number">26</span>:<span class="number">37</span> <span class="number">2017</span></span><br><span class="line"></span><br><span class="line">Parallelism:</span><br><span class="line">  Num Processors:          <span class="number">1</span></span><br><span class="line">  Num Threads:             <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Mesh: </span><br><span class="line">  Parallel Type:           replicated</span><br><span class="line">  Mesh Dimension:          <span class="number">3</span></span><br><span class="line">  Spatial Dimension:       <span class="number">3</span></span><br><span class="line">  Nodes:                   </span><br><span class="line">    Total:                 <span class="number">3774</span></span><br><span class="line">    Local:                 <span class="number">3774</span></span><br><span class="line">  Elems:                   </span><br><span class="line">    Total:                 <span class="number">2476</span></span><br><span class="line">    Local:                 <span class="number">2476</span></span><br><span class="line">  Num Subdomains:          <span class="number">1</span></span><br><span class="line">  Num Partitions:          <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Nonlinear System:</span><br><span class="line">  Num DOFs:                <span class="number">3774</span></span><br><span class="line">  Num Local DOFs:          <span class="number">3774</span></span><br><span class="line">  Variables:               <span class="string">&quot;diffused&quot;</span> </span><br><span class="line">  Finite Element Types:    <span class="string">&quot;LAGRANGE&quot;</span> </span><br><span class="line">  Approximation Orders:    <span class="string">&quot;FIRST&quot;</span> </span><br><span class="line"></span><br><span class="line">Execution Information:</span><br><span class="line">  Executioner:             Steady</span><br><span class="line">  Solver Mode:             Preconditioned JFNK</span><br></pre></td></tr></table></figure>
<h3 id="execute函数"><a href="#execute函数" class="headerlink" title="execute函数"></a>execute函数</h3><p>这一步有几步重要步骤：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">preExecute</span>(); <span class="comment">// 在真正计算之前要做一些提前计算，对于Steady问题没有要做的</span></span><br><span class="line">_problem.<span class="built_in">advanceState</span>(); <span class="comment">// 获得上一时间步的状态，从而为进入下一时间步做好准备</span></span><br><span class="line"><span class="built_in">preSolve</span>(); <span class="comment">// 在Solve之前要做的事，对于Steady问题没有要做的</span></span><br><span class="line">_nl-&gt;<span class="built_in">solve</span>(); <span class="comment">// 开始求解!</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qixinbo.github.io/2017/07/11/cplusplus-construction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Xin-Bo Qi(亓欣波)">
      <meta itemprop="description" content="Be interesting!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="亓欣波">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/11/cplusplus-construction/" class="post-title-link" itemprop="url">C++默认构造函数——深入理解 (转载)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-07-11 00:00:00" itemprop="dateCreated datePublished" datetime="2017-07-11T00:00:00+08:00">2017-07-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-25 15:20:30" itemprop="dateModified" datetime="2021-03-25T15:20:30+08:00">2021-03-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">programming</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/07/11/cplusplus-construction/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/07/11/cplusplus-construction/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文转载自<a target="_blank" rel="noopener" href="http://blog.csdn.net/hankai1024/article/details/7947989">这里</a>，修正了一些格式和文字错误。</p>
<h1 id="引子"><a href="#引子" class="headerlink" title="引子"></a>引子</h1><p>错误认识1：若程序员没有自己定义无参数的构造函数，那么编译器会自动生成默认构造函数，来进行对成员函数的初始化。<br>错误认识2：编译器合成出来的default constructor会明确设定“class内每一个data member的默认值”。但这两种种认识是有误的，不全面的。<br>正确认识：<br>默认的构造函数分为有用的和无用的，所谓无用的默认构造函数就是一个空函数、什么操作也不做，而有用的默认构造函数是可以初始化成员的函数。<br>对构造函数的需求也是分为两类：一类是编辑器需求，一类是程序的需求。<br>程序的需求：若程序需求构造函数时，就是要程序员自定义构造函数来显示的初始化类的数据成员。<br>编辑器的需求：编辑器的需求也分为两类：一类是无用的空的构造函数(trivial)，一类是编辑器自己合成的有用的构造函数(non-trivival)。<br>在用户没有自定义构造函数的情况下：<br>一、由于编辑器的需求，编辑器会调用空的无用的默认构造函数。如：类中没有显式定义任何构造函数。<br>二、但在某些情况下,编辑器就一定会合成有用的默认构造函数。</p>
<h1 id="无关紧要（trivial）的默认构造函数【无用构造函数】"><a href="#无关紧要（trivial）的默认构造函数【无用构造函数】" class="headerlink" title="无关紧要（trivial）的默认构造函数【无用构造函数】"></a>无关紧要（trivial）的默认构造函数【无用构造函数】</h1><p>用户并没有显式地定义默认构造函数，编译器会为它自动生成一个无关紧要（trivial）的默认构造函数，生成的默认构造函数什么也不做，既不会将其成员变量置零，也不会做其他的任何事情，只是为了保证程序能够正确运行而已，这就是所谓的“需要”，如果还需要给初始化成员变量，这件事情还是交给程序员做吧！</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>  </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  <span class="keyword">int</span> val;   </span><br><span class="line">  Foo *pnext;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo_fo</span><span class="params">()</span></span>&#123;  </span><br><span class="line"> Foo fo;   </span><br><span class="line"><span class="keyword">if</span> (fo.val || fo.pnext)   </span><br><span class="line">   &#123;   </span><br><span class="line">      cout &lt;&lt; fo.val &lt;&lt; endl;   </span><br><span class="line">     cout &lt;&lt; fo.pnext &lt;&lt; endl;   </span><br><span class="line">   &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line"><span class="built_in">foo_fo</span>();   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4196608</span></span><br><span class="line"><span class="number">0x400750</span></span><br></pre></td></tr></table></figure>
<p>这两个值是无意义的垃圾值。</p>
<p>如果基类和继承类都没有自定义的构造函数。那么，都会生成trival的默认构造函数。例：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>   </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>   </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line">  <span class="keyword">private</span>:   </span><br><span class="line">  <span class="keyword">int</span> val;   </span><br><span class="line">&#125;;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span>:</span><span class="keyword">public</span> Foo   </span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  <span class="keyword">char</span> *str;   </span><br><span class="line">  <span class="keyword">int</span> i;   </span><br><span class="line">&#125;;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo_bar</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">   Bar bar;   </span><br><span class="line">   cout&lt;&lt;bar.i&lt;&lt;endl;   </span><br><span class="line"><span class="keyword">if</span> (bar.str )   </span><br><span class="line">&#123;   </span><br><span class="line">   cout &lt;&lt; <span class="string">&quot;Print the content !&quot;</span> &lt;&lt; endl; &#125;  </span><br><span class="line">&#125;   </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  <span class="built_in">foo_bar</span>();   </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4196656</span></span><br></pre></td></tr></table></figure>
<h1 id="非平凡（non-trivival）默认构造函数【有用构造函数】"><a href="#非平凡（non-trivival）默认构造函数【有用构造函数】" class="headerlink" title="非平凡（non-trivival）默认构造函数【有用构造函数】"></a>非平凡（non-trivival）默认构造函数【有用构造函数】</h1><p>C++标准描述了哪些情况下这样的隐式默认构造函数是无关紧要的。一个非平凡（non-trivival）的默认构造函数是ARM中所说的被实现所“需要”，并在必要的时候被编译器自动生成。下面来看看默认构造函数是非平凡的四种情况：</p>
<h2 id="含有包含默认构造函数的成员类对象"><a href="#含有包含默认构造函数的成员类对象" class="headerlink" title="含有包含默认构造函数的成员类对象"></a>含有包含默认构造函数的成员类对象</h2><p>如果该类包含一个成员类对象，它有默认的构造函数，那么这个类的隐式构造函数是非平凡的，并且编译器需要为包含的这个成员类对象生成一个默认构造函数。然后，这个编译器生成的默认构造函数只有在实际上被调用时才会被真正的生成。如下例中编译器为Bar类生成一个默认构造函数。<br>如果一个class中含有成员对象，而且这个对象有default constructor（如Foo foo,Foo类中有default constructor）, 那么编译器就会给这个class（Bar）合成一个default constructor, 但是这个合成动作只有在调用需要时才会产生。也就是说，在需要时才会合成。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>   </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>   </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  <span class="built_in">Foo</span>();   </span><br><span class="line">  <span class="built_in">Foo</span>( <span class="keyword">int</span> );  </span><br><span class="line"><span class="keyword">private</span>:    </span><br><span class="line">  <span class="keyword">int</span> val;   </span><br><span class="line">&#125;;   </span><br><span class="line">Foo::<span class="built_in">Foo</span>()   </span><br><span class="line">&#123;   </span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Call Foo::Foo() Constructor !&quot;</span>&lt;&lt; endl;   </span><br><span class="line">  val = <span class="number">0</span>;   </span><br><span class="line">&#125;   </span><br><span class="line">Foo::<span class="built_in">Foo</span>(<span class="keyword">int</span> i)   </span><br><span class="line">&#123;   </span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Call Foo::Foo(int i) Constructor !&quot;</span>&lt;&lt; endl;   </span><br><span class="line">  val = i;   </span><br><span class="line">&#125;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span>   </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">public</span>:  </span><br><span class="line">  Foo foo;   </span><br><span class="line">  <span class="keyword">char</span> *str;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo_bar</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  Bar bar; <span class="comment">// Bar::foo must be initialized here </span></span><br><span class="line">  <span class="keyword">if</span> (bar.str )   </span><br><span class="line">  &#123; cout &lt;&lt; <span class="string">&quot;Print the content !&quot;</span> &lt;&lt; endl; &#125;   </span><br><span class="line">&#125;   </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  <span class="built_in">foo_bar</span>();   </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Call Foo::Foo() Constructor !</span><br><span class="line">Print the content !</span><br></pre></td></tr></table></figure>
<p>在这个程序片段中Bar的成员foo含有默认构造函数，它初始化自己的类成员val为0而Bar本身并没有定义默认的构造函数，这个构造函数的目的是为了初始化它的成员变量foo，实际上就是调用Bar::foo的默认构造函数，但它并不会做一丁点关于另外一个变量str的初始化和赋值工作，初始化Bar::foo是编译器的责任，而初始化str是程序员的责任。<br>我们可以用以下代码来大致描述一下编译器的工作：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="title">Bar::Bar</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">// Pseudo C++ Code </span></span><br><span class="line">  foo.Foo::<span class="built_in">Foo</span>(); </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>结论：如果class中内含一个以上的含有default constructor的object,那在为class合成的default constructor中，会按照object的声明次序调用object 的 default constructor。<br>如果Bar中用户自定义的默认构造函数（用户有定义，则编译器不会再自动生成）：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>   </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>   </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  <span class="built_in">Foo</span>();   </span><br><span class="line">  <span class="built_in">Foo</span>( <span class="keyword">int</span> );   </span><br><span class="line"><span class="keyword">private</span>:   </span><br><span class="line">  <span class="keyword">int</span> val;   </span><br><span class="line">&#125;;  </span><br><span class="line">Foo::<span class="built_in">Foo</span>()   </span><br><span class="line">&#123;   </span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Call Foo::Foo() Constructor !&quot;</span>&lt;&lt; endl;   </span><br><span class="line">  val = <span class="number">0</span>;   </span><br><span class="line">&#125;   </span><br><span class="line">Foo::<span class="built_in">Foo</span>(<span class="keyword">int</span> i)   </span><br><span class="line">&#123;   </span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Call Foo::Foo(int i) Constructor !&quot;</span>&lt;&lt; endl;   </span><br><span class="line">  val = i;   </span><br><span class="line">&#125;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span>   </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  Foo foo;   </span><br><span class="line">  <span class="keyword">char</span> *str;   </span><br><span class="line">  <span class="built_in">Bar</span>()&#123;&#125;<span class="comment">//默认构造函数   </span></span><br><span class="line">&#125;;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo_bar</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  Bar bar;   </span><br><span class="line"><span class="keyword">if</span> (bar.str ) &#123;  </span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Print the content !&quot;</span> &lt;&lt; endl;   </span><br><span class="line">&#125;   </span><br><span class="line">&#125;   </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  <span class="built_in">foo_bar</span>();   </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;   </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>结果一样。</p>
<p>对比，以下代码不符合上述要求，会报错：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>   </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>   </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  <span class="built_in">Foo</span>(); <span class="comment">//去掉默认构造函数会报错   </span></span><br><span class="line">  <span class="built_in">Foo</span>( <span class="keyword">int</span> );   </span><br><span class="line"><span class="keyword">private</span>:   </span><br><span class="line">  <span class="keyword">int</span> val;  </span><br><span class="line">&#125;;   </span><br><span class="line">Foo::<span class="built_in">Foo</span>()   </span><br><span class="line">&#123;   </span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Call Foo::Foo() Constructor !&quot;</span>&lt;&lt; endl;   </span><br><span class="line">  val = <span class="number">0</span>;   </span><br><span class="line">&#125;   </span><br><span class="line">Foo::<span class="built_in">Foo</span>(<span class="keyword">int</span> i)   </span><br><span class="line">&#123;   </span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Call Foo::Foo(int i) Constructor !&quot;</span>&lt;&lt; endl;   </span><br><span class="line">  val = i;   </span><br><span class="line">&#125;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span>   </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  <span class="function">Foo <span class="title">foo</span><span class="params">(<span class="number">1</span>)</span></span>; <span class="comment">//不是默认构造函数产生的成员，也会报错。expected `;&#x27; before &#x27;(&#x27; token char *str;   </span></span><br><span class="line">&#125;;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo_bar</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  Bar bar; <span class="comment">// Bar::foo must be initialized here   </span></span><br><span class="line"><span class="keyword">if</span> (bar.str )   </span><br><span class="line">&#123;   </span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Print the content !&quot;</span> &lt;&lt; endl; &#125;   </span><br><span class="line">&#125;   </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  <span class="built_in">foo_bar</span>();   </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;   </span><br><span class="line">&#125; </span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">## 一个类的父类自定义的无参构造函数(有non-trival的默认构造函数)。</span><br><span class="line">父类有自定义的默认构造函数，子类无任何自定义构造函数。</span><br><span class="line">```cpp</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>   </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>   </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  <span class="built_in">Foo</span>()   </span><br><span class="line">  &#123;   </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Call Foo::Foo() Constructor !&quot;</span>&lt;&lt; endl;   </span><br><span class="line">    val = <span class="number">0</span>;   </span><br><span class="line">  &#125;   </span><br><span class="line">  <span class="built_in">Foo</span>(<span class="keyword">int</span> i)   </span><br><span class="line">  &#123;   </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Call Foo::Foo(int i) Constructor !&quot;</span>&lt;&lt; endl;   </span><br><span class="line">    val = i;   </span><br><span class="line">   &#125;   </span><br><span class="line"><span class="keyword">private</span>:   </span><br><span class="line">  <span class="keyword">int</span> val;   </span><br><span class="line">&#125;;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span>:</span><span class="keyword">public</span> Foo   </span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line"><span class="comment">//Foo foo;   </span></span><br><span class="line"><span class="keyword">char</span> *str;   </span><br><span class="line">&#125;;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo_bar</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  Bar bar;   </span><br><span class="line">  <span class="keyword">if</span> (bar.str )   </span><br><span class="line">  &#123;   </span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Print the content !&quot;</span> &lt;&lt; endl;   </span><br><span class="line">  &#125;   </span><br><span class="line">&#125;   </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  <span class="built_in">foo_bar</span>();   </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Call Foo::Foo() Constructor !</span><br><span class="line">Print the content !</span><br></pre></td></tr></table></figure>
<p>如果一个没有任何constructor的派生类继承自一个带有default constructor(用户定义的)的base class, 那么这个派生类的default constructor被认为是nontrivial，而对于nontrivial的default constructor, 编译器会为他合成出来。在合成出的default constructor中调用base class的default constuctor。<br>如果设计者提供了多个constructor,但未提供default constuctor,那编译器不会合成新的default constructor,而是会扩展所有的现有的constructor，安插进去default constructor所必须的代码。如果此类中仍存在第一种情况，也就是说存在有member object, 而且object含有default constructor, 那这些default constructor 也会被调用，在base class的default constructor被调用后。<br>如果把//Foo foo这句也加上，结果为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Call Foo::Foo() Constructor !</span><br><span class="line">Call Foo::Foo() Constructor !</span><br><span class="line">Print the content !</span><br></pre></td></tr></table></figure>
<p>因为在创建子类对象时需要调用父类的构造函数，同时，由于子类包含父类成员对象，初始化成员对象时也需要调用父类构造函数。</p>
<h2 id="一个类里隐式的含有Virtual-tabel-Vtbl-或者pointer-member-vptr-，并且其基类无任何构造函数或者有用户自定义的默认构造函数。"><a href="#一个类里隐式的含有Virtual-tabel-Vtbl-或者pointer-member-vptr-，并且其基类无任何构造函数或者有用户自定义的默认构造函数。" class="headerlink" title="一个类里隐式的含有Virtual tabel(Vtbl)或者pointer member(vptr)，并且其基类无任何构造函数或者有用户自定义的默认构造函数。"></a>一个类里隐式的含有Virtual tabel(Vtbl)或者pointer member(vptr)，并且其基类无任何构造函数或者有用户自定义的默认构造函数。</h2><p>vtbl或vptr需要编辑器隐式地合成出来，那么编辑器就把合成动作放在了默认构造函数里，所以编辑器必需自己产生一个构造函数来完成这些动作。所以你的类里只要含有virtual function，那么编辑器就会生成默认的构造函数。<br>无论一个class是声明（或继承）了一个virtual function, 还是派生自一个继承串联，其中有一个或多个virtual base class.不管上述哪种情况，由于缺乏由user声明的constructor, 编译器会详细记录合成一个default constructor的详细信息。<br> 在编译期间，会做以下的扩张工作：<br>(1) 一个virtual function table会被编译器产生出来，内含virtual functions的地址。<br>(2) 编译器会合成一个vptr, 插入每一个object中。<br>而合成出来的default constructor，当然会为每一个object 设定vptr的初值。但不会为类的成员变量初始化。<br>例，基类有虚函数，并且无构造函数或者有用户自定义的默认构造函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>   </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line">  <span class="keyword">public</span>: </span><br><span class="line">    <span class="keyword">int</span> x; </span><br><span class="line">    <span class="comment">// Base()&#123;&#125; 有没有这句效果都是一样的 </span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>&#123; cout&lt;&lt;<span class="string">&quot;Base set&quot;</span>&lt;&lt;endl; cout&lt;&lt;x&lt;&lt;endl; &#125; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span><span class="keyword">public</span> Base</span><br><span class="line">&#123; </span><br><span class="line">  <span class="keyword">public</span>: </span><br><span class="line">    <span class="keyword">int</span> y; </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>&#123; cout&lt;&lt;<span class="string">&quot;Derived set&quot;</span>&lt;&lt;endl; cout&lt;&lt;y&lt;&lt;endl; &#125; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(Base &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">  b.<span class="built_in">set</span>(); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">  Base b; </span><br><span class="line">  Derived d; </span><br><span class="line">  <span class="built_in">func</span>(b); </span><br><span class="line">  <span class="built_in">func</span>(d); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Base set</span><br><span class="line"><span class="number">0</span></span><br><span class="line">Derived set</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>例：基类为抽象类，且无构造函数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span>  </span></span><br><span class="line"><span class="class">&#123;</span>  </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">flip</span><span class="params">()</span> </span>= <span class="number">0</span>;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bell</span>:</span> <span class="keyword">public</span> Widget  </span><br><span class="line">&#123;  </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">flip</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function">  </span>&#123;   </span><br><span class="line">    cout &lt;&lt;<span class="string">&quot;Bell.&quot;</span> &lt;&lt; endl;   </span><br><span class="line">   &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Whistle</span>:</span> <span class="keyword">public</span> Widget  </span><br><span class="line">&#123;  </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">flip</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function">  </span>&#123;   </span><br><span class="line">   cout &lt;&lt;<span class="string">&quot;Whistle.&quot;</span> &lt;&lt; endl; &#125;  </span><br><span class="line">  &#125;;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">flip</span><span class="params">(Widget &amp;widget)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">   widget.<span class="built_in">flip</span>();  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  Bell b;   </span><br><span class="line">  Whistle w;   </span><br><span class="line">  <span class="built_in">flip</span>(b);   </span><br><span class="line">  <span class="built_in">flip</span>(w);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line"> <span class="built_in">foo</span>();   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Bell.</span><br><span class="line">Whistle.</span><br></pre></td></tr></table></figure>
<h2 id="如果一个类虚继承与其他类"><a href="#如果一个类虚继承与其他类" class="headerlink" title="如果一个类虚继承与其他类"></a>如果一个类虚继承与其他类</h2><p>理由和上一个一样，虚基类也需要vtbl和vptr管理，那么这些管理就需要合成构造函数来实现管理，则需要生成默认的构造函数。<br>例：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span>  </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  <span class="keyword">int</span> x;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  cout&lt;&lt;<span class="string">&quot;Base set&quot;</span>&lt;&lt;endl;   </span><br><span class="line">  cout&lt;&lt;x&lt;&lt;endl;   </span><br><span class="line">&#125;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived1</span>:</span><span class="keyword">virtual</span> <span class="keyword">public</span> Base  </span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">  <span class="keyword">int</span> y;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">  cout&lt;&lt;<span class="string">&quot;Derived1 set&quot;</span>&lt;&lt;endl;   </span><br><span class="line">  cout&lt;&lt;y&lt;&lt;endl;   </span><br><span class="line">&#125;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived2</span>:</span><span class="keyword">virtual</span> <span class="keyword">public</span> Base  </span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="keyword">int</span> z;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">cout&lt;&lt;<span class="string">&quot;Derived2 set&quot;</span>&lt;&lt;endl;   </span><br><span class="line">cout&lt;&lt;z&lt;&lt;endl;   </span><br><span class="line">&#125;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">Base b;   </span><br><span class="line">b.<span class="built_in">set</span>();   </span><br><span class="line">Derived1 d1;   </span><br><span class="line">d1.<span class="built_in">set</span>();   </span><br><span class="line">Derived2 d2;   </span><br><span class="line">d2.<span class="built_in">set</span>();   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Base set</span><br><span class="line"><span class="number">-1913988864</span></span><br><span class="line">Derived1 set</span><br><span class="line"><span class="number">4196432</span></span><br><span class="line">Derived2 set</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>与如下代码效果一样:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span>  </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="keyword">int</span> x;   </span><br><span class="line"><span class="built_in">Base</span>()&#123;&#125;;<span class="comment">//用户定义的默认构造函数   </span></span><br><span class="line"><span class="built_in">Base</span>(<span class="keyword">int</span> i)<span class="comment">//用用户定义的含参构造函数   </span></span><br><span class="line">&#123; x=i; &#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">cout&lt;&lt;<span class="string">&quot;Base set&quot;</span>&lt;&lt;endl;   </span><br><span class="line">cout&lt;&lt;x&lt;&lt;endl;   </span><br><span class="line">&#125;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived1</span>:</span><span class="keyword">virtual</span> <span class="keyword">public</span> Base  </span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="keyword">int</span> y;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">cout&lt;&lt;<span class="string">&quot;Derived1 set&quot;</span>&lt;&lt;endl;   </span><br><span class="line">cout&lt;&lt;y&lt;&lt;endl;   </span><br><span class="line">&#125;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived2</span>:</span><span class="keyword">virtual</span> <span class="keyword">public</span> Base  </span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="keyword">int</span> z;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">cout&lt;&lt;<span class="string">&quot;Derived2 set&quot;</span>&lt;&lt;endl;   </span><br><span class="line">cout&lt;&lt;z&lt;&lt;endl;   </span><br><span class="line">&#125;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">Base b;   </span><br><span class="line">b.<span class="built_in">set</span>();   </span><br><span class="line">Derived1 d1;   </span><br><span class="line">d1.<span class="built_in">set</span>();   </span><br><span class="line">Derived2 d2;   </span><br><span class="line">d2.<span class="built_in">set</span>();   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h1 id="当用带有默认参数的构造函数进行初始化的时候，可以用类似默认参数初始化类的对象的方式来进行初始化。"><a href="#当用带有默认参数的构造函数进行初始化的时候，可以用类似默认参数初始化类的对象的方式来进行初始化。" class="headerlink" title="当用带有默认参数的构造函数进行初始化的时候，可以用类似默认参数初始化类的对象的方式来进行初始化。"></a>当用带有默认参数的构造函数进行初始化的时候，可以用类似默认参数初始化类的对象的方式来进行初始化。</h1><p>特别注意：以下所有情况均为把有参构造函数用默认值初始化的特例(长得像，但并不是默认构造函数)，并非有默认构造函数。创建对象方式与默认构造函数相同，但意义不一样。以下是在声明时成成员初始化为0，则调用形式与默认构造函数相同。其</p>
<h2 id="例1：父类无构造函数（有编译器自己创建的trival型的），子类已经有有参构造函数。生成对象的时候实际调用的是用参构造函数，只不过参数都是0，可以省略不写。"><a href="#例1：父类无构造函数（有编译器自己创建的trival型的），子类已经有有参构造函数。生成对象的时候实际调用的是用参构造函数，只不过参数都是0，可以省略不写。" class="headerlink" title="例1：父类无构造函数（有编译器自己创建的trival型的），子类已经有有参构造函数。生成对象的时候实际调用的是用参构造函数，只不过参数都是0，可以省略不写。"></a>例1：父类无构造函数（有编译器自己创建的trival型的），子类已经有有参构造函数。生成对象的时候实际调用的是用参构造函数，只不过参数都是0，可以省略不写。</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>  </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">protected</span>:   </span><br><span class="line"><span class="keyword">int</span> x0,y0;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span><span class="comment">//或者virtual void set()   </span></span></span><br><span class="line"><span class="function"></span>&#123; cout&lt;&lt;<span class="string">&quot;Base&quot;</span>&lt;&lt;endl; &#125;   </span><br><span class="line">&#125;;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span><span class="keyword">public</span> Point   </span><br><span class="line">&#123; <span class="keyword">protected</span>:   </span><br><span class="line"><span class="keyword">int</span> x1,y1;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="built_in">Derived</span>(<span class="keyword">int</span> m=<span class="number">0</span>,<span class="keyword">int</span> n=<span class="number">0</span>)   </span><br><span class="line">&#123; x1=m; y1=n; &#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;cout&lt;&lt;<span class="string">&quot;Derived_set()&quot;</span>&lt;&lt;endl;&#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>&#123;cout&lt;&lt;<span class="string">&quot;Derived_draw()&quot;</span>&lt;&lt;endl;&#125;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(Point *b)</span></span>&#123; b-&gt;<span class="built_in">set</span>(); &#125;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">Derived *dr=<span class="keyword">new</span> Derived;   </span><br><span class="line"><span class="built_in">test</span>(dr);   </span><br><span class="line">Derived drr;   </span><br><span class="line"><span class="built_in">test</span>(&amp;drr);  </span><br><span class="line"> <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Base</span><br><span class="line">Base</span><br></pre></td></tr></table></figure>
<p>如果是<br>virtual void set()<br>则结果为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Derived_set</span>()</span><br><span class="line"><span class="built_in">Derived_set</span>()</span><br></pre></td></tr></table></figure>

<h2 id="例2：基类含无参构造函数，子类已经有有参构造函数。"><a href="#例2：基类含无参构造函数，子类已经有有参构造函数。" class="headerlink" title="例2：基类含无参构造函数，子类已经有有参构造函数。"></a>例2：基类含无参构造函数，子类已经有有参构造函数。</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>  </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">protected</span>:   </span><br><span class="line"><span class="keyword">int</span> x0,y0;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123; cout&lt;&lt;<span class="string">&quot;Base&quot;</span>&lt;&lt;endl;   </span><br><span class="line">&#125;   </span><br><span class="line"><span class="built_in">Point</span>()&#123;<span class="comment">//基类无参构造函数  </span></span><br><span class="line"> &#125;  </span><br><span class="line">&#125;;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span><span class="keyword">public</span> Point   </span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">protected</span>:   </span><br><span class="line"><span class="keyword">int</span> x1,y1;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="built_in">Derived</span>(<span class="keyword">int</span> m=<span class="number">0</span>,<span class="keyword">int</span> n=<span class="number">0</span>)   </span><br><span class="line">&#123; x1=m; y1=n; &#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span></span>&#123;cout&lt;&lt;<span class="string">&quot;Derived_set()&quot;</span>&lt;&lt;endl;&#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>&#123;cout&lt;&lt;<span class="string">&quot;Derived_draw()&quot;</span>&lt;&lt;endl;&#125;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(Point *b)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">b-&gt;<span class="built_in">set</span>();   </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">Derived *dr=<span class="keyword">new</span> Derived;   </span><br><span class="line"><span class="built_in">test</span>(dr);   </span><br><span class="line">Derived drr;   </span><br><span class="line"><span class="built_in">test</span>(&amp;drr);   </span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Base</span><br><span class="line">Base</span><br></pre></td></tr></table></figure>
<h2 id="例3：基类含有参构造函数"><a href="#例3：基类含有参构造函数" class="headerlink" title="例3：基类含有参构造函数"></a>例3：基类含有参构造函数</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>  </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">protected</span>:   </span><br><span class="line"><span class="keyword">int</span> x0,y0;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>   </span></span><br><span class="line"><span class="function"></span>&#123; cout&lt;&lt;<span class="string">&quot;Base&quot;</span>&lt;&lt;endl; &#125;   </span><br><span class="line"><span class="built_in">Point</span>(<span class="keyword">int</span> i,<span class="keyword">int</span> j)  </span><br><span class="line">&#123; x0=i; y0=j; &#125;   </span><br><span class="line">&#125;;   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span>:</span><span class="keyword">public</span> Point   </span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">protected</span>: <span class="keyword">int</span> x1,y1;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="built_in">Derived</span>(<span class="keyword">int</span> m=<span class="number">0</span>,<span class="keyword">int</span> n=<span class="number">0</span>,<span class="keyword">int</span> i=<span class="number">0</span>,<span class="keyword">int</span> j=<span class="number">0</span>):<span class="built_in">Point</span>(i,j)   </span><br><span class="line">&#123; x1=m; y1=n; &#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;cout&lt;&lt;<span class="string">&quot;Derived_set()&quot;</span>&lt;&lt;endl;&#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;cout&lt;&lt;<span class="string">&quot;Derived_draw()&quot;</span>&lt;&lt;endl;&#125;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(Point *b)</span>  </span></span><br><span class="line"><span class="function"></span>&#123; b-&gt;<span class="built_in">set</span>(); &#125;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">Derived *dr=<span class="keyword">new</span> Derived;   </span><br><span class="line"><span class="built_in">test</span>(dr);   </span><br><span class="line">Derived drr;   </span><br><span class="line"><span class="built_in">test</span>(&amp;drr);   </span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Base</span><br><span class="line">Base</span><br></pre></td></tr></table></figure>
<h2 id="例4：对于基类含有虚函数和抽象类也和上面所说的情况一致。"><a href="#例4：对于基类含有虚函数和抽象类也和上面所说的情况一致。" class="headerlink" title="例4：对于基类含有虚函数和抽象类也和上面所说的情况一致。"></a>例4：对于基类含有虚函数和抽象类也和上面所说的情况一致。</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>  </span></span><br><span class="line"><span class="class">&#123;</span>   </span><br><span class="line"><span class="keyword">protected</span>:   </span><br><span class="line"><span class="keyword">int</span> x0,y0;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="built_in">Point</span>(<span class="keyword">int</span> i,<span class="keyword">int</span> j)   </span><br><span class="line">&#123; x0=i; y0=j; &#125;   </span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">()</span></span>=<span class="number">0</span>;   </span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>=<span class="number">0</span>;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Line</span>:</span><span class="keyword">public</span> Point  </span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">protected</span>: <span class="keyword">int</span> x1,y1;   </span><br><span class="line"><span class="keyword">public</span>: <span class="built_in">Line</span>(<span class="keyword">int</span> i=<span class="number">0</span>,<span class="keyword">int</span> j=<span class="number">0</span>,<span class="keyword">int</span> m=<span class="number">0</span>,<span class="keyword">int</span> n=<span class="number">0</span>):<span class="built_in">Point</span>(i,j)   </span><br><span class="line">&#123; x1=m; y1=n; &#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;cout&lt;&lt;<span class="string">&quot;Line_set()&quot;</span>&lt;&lt;endl;&#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>&#123;cout&lt;&lt;<span class="string">&quot;Line_draw()&quot;</span>&lt;&lt;endl;&#125;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ellipse</span>:</span><span class="keyword">public</span> Point  </span><br><span class="line">&#123;   </span><br><span class="line"><span class="keyword">protected</span>:   </span><br><span class="line"><span class="keyword">int</span> x2,y2;   </span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line"><span class="built_in">Ellipse</span>(<span class="keyword">int</span> i=<span class="number">0</span>,<span class="keyword">int</span> j=<span class="number">0</span>,<span class="keyword">int</span> p=<span class="number">0</span>,<span class="keyword">int</span> q=<span class="number">0</span>):<span class="built_in">Point</span>(i,j)   </span><br><span class="line">&#123; x2=p; y2=q; &#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;cout&lt;&lt;<span class="string">&quot;Ellipse_set()&quot;</span>&lt;&lt;endl;&#125;   </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;cout&lt;&lt;<span class="string">&quot;Ellipse_draw()&quot;</span>&lt;&lt;endl;&#125;   </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">drawobj</span><span class="params">(Point *p)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">p-&gt;<span class="built_in">draw</span>();   </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setobj</span><span class="params">(Point *p)</span>  </span></span><br><span class="line"><span class="function"></span>&#123; p-&gt;<span class="built_in">set</span>(); &#125;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">Line *li=<span class="keyword">new</span> <span class="built_in">Line</span>();<span class="comment">//new Line;   </span></span><br><span class="line"><span class="built_in">drawobj</span>(li);   </span><br><span class="line"><span class="built_in">setobj</span>(li);   </span><br><span class="line">cout&lt;&lt;endl;   </span><br><span class="line">Ellipse *el=<span class="keyword">new</span> <span class="built_in">Ellipse</span>();<span class="comment">//new Ellipse;   </span></span><br><span class="line"><span class="built_in">drawobj</span>(el);   </span><br><span class="line"><span class="built_in">setobj</span>(el);   </span><br><span class="line">cout&lt;&lt;endl;   </span><br><span class="line">Line *li2=<span class="keyword">new</span> Line;   </span><br><span class="line"><span class="built_in">drawobj</span>(li2);   </span><br><span class="line"><span class="built_in">setobj</span>(li2);   </span><br><span class="line">cout&lt;&lt;endl;   </span><br><span class="line">Ellipse elp;   </span><br><span class="line"><span class="built_in">drawobj</span>(&amp;elp);   </span><br><span class="line"><span class="built_in">setobj</span>(&amp;elp);   </span><br><span class="line">cout&lt;&lt;endl;   </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>输出为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Line_draw</span>()</span><br><span class="line"><span class="built_in">Line_set</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">Ellipse_draw</span>()</span><br><span class="line"><span class="built_in">Ellipse_set</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">Line_draw</span>()</span><br><span class="line"><span class="built_in">Line_set</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">Ellipse_draw</span>()</span><br><span class="line"><span class="built_in">Ellipse_set</span>()</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Xin-Bo Qi(亓欣波)"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Xin-Bo Qi(亓欣波)</p>
  <div class="site-description" itemprop="description">Be interesting!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">120</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/qixinbo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qixinbo" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:qixinbo@gmail.com" title="E-Mail → mailto:qixinbo@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.tsinghua.edu.cn/" title="https:&#x2F;&#x2F;www.tsinghua.edu.cn" rel="noopener" target="_blank">THU</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.imr.cas.cn/" title="http:&#x2F;&#x2F;www.imr.cas.cn" rel="noopener" target="_blank">IMR</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.sdu.edu.cn/" title="http:&#x2F;&#x2F;www.sdu.edu.cn" rel="noopener" target="_blank">SDU</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://liam0205.me/" title="http:&#x2F;&#x2F;liam0205.me&#x2F;" rel="noopener" target="_blank">黄晨成</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xin-Bo Qi(亓欣波)</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://qixinbo.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
