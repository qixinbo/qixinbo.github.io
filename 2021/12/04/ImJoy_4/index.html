<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"qixinbo.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="参考文献 Developing Plugins for ImJoy  概览 ImJoy插件文件本质上是包括一系列自定义块的html文件（受.vue 格式启发）。 如下是一个插件文件的典型组成。需要注意的是，这些块的顺序无关紧要，因此可以将块打乱。 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23       ** 该代码块以Js">
<meta property="og:type" content="article">
<meta property="og:title" content="开源深度学习计算平台ImJoy解析：4 -- 插件文件格式">
<meta property="og:url" content="http://qixinbo.github.io/2021/12/04/ImJoy_4/index.html">
<meta property="og:site_name" content="数字旗手">
<meta property="og:description" content="参考文献 Developing Plugins for ImJoy  概览 ImJoy插件文件本质上是包括一系列自定义块的html文件（受.vue 格式启发）。 如下是一个插件文件的典型组成。需要注意的是，这些块的顺序无关紧要，因此可以将块打乱。 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23       ** 该代码块以Js">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://user-images.githubusercontent.com/6218739/144185494-b3db5ddc-de2d-4d3b-a9fe-6e8549e062a5.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/6218739/144191940-48d0ab2b-5c8c-4607-9543-b05daf28a1ee.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/6218739/144377959-51a13531-9ce3-4752-8c13-7d841bcec51d.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/6218739/144605127-ece26296-0933-4534-a798-cba6c4f0ace5.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/6218739/144605559-f3a9798b-23e1-4427-8185-3de397873d6c.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/6218739/144605914-ada14870-30c1-45f8-b563-db5439a4710f.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/6218739/144701434-77ef0f5c-f952-4bdf-aec7-c5c7209ae7cb.png">
<meta property="article:published_time" content="2021-12-03T16:00:00.000Z">
<meta property="article:modified_time" content="2021-12-04T08:26:24.680Z">
<meta property="article:author" content="Xin-Bo Qi(亓欣波)">
<meta property="article:tag" content="ImJoy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/6218739/144185494-b3db5ddc-de2d-4d3b-a9fe-6e8549e062a5.png">

<link rel="canonical" href="http://qixinbo.github.io/2021/12/04/ImJoy_4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>开源深度学习计算平台ImJoy解析：4 -- 插件文件格式 | 数字旗手</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="数字旗手" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">数字旗手</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">电气化、自动化、数字化、智能化、智慧化</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-scholar">

    <a href="/scholar/" rel="section"><i class="fa fa-chart-bar fa-fw"></i>scholar</a>

  </li>
        <li class="menu-item menu-item-sources">

    <a href="/sources/" rel="section"><i class="fa fa-rss fa-fw"></i>sources</a>

  </li>
        <li class="menu-item menu-item-gallery">

    <a href="/gallery/" rel="section"><i class="fa fa-file-image fa-fw"></i>gallery</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404.html" rel="section"><i class="fa fa-heartbeat fa-fw"></i>Commonweal 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://qixinbo.github.io/2021/12/04/ImJoy_4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Xin-Bo Qi(亓欣波)">
      <meta itemprop="description" content="Digitize everything to realize Digitalization!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="数字旗手">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          开源深度学习计算平台ImJoy解析：4 -- 插件文件格式
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-12-04 00:00:00 / Modified: 16:26:24" itemprop="dateCreated datePublished" datetime="2021-12-04T00:00:00+08:00">2021-12-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/computer-vision/" itemprop="url" rel="index"><span itemprop="name">computer vision</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2021/12/04/ImJoy_4/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/12/04/ImJoy_4/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p><a target="_blank" rel="noopener" href="https://imjoy.io/docs/#/development">Developing Plugins for ImJoy</a></p>
<h1 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h1><p>ImJoy插件文件本质上是包括一系列自定义块的html文件（受<code>.vue</code> 格式启发）。<br>如下是一个插件文件的典型组成。需要注意的是，这些块的顺序无关紧要，因此可以将块打乱。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">config</span> <span class="attr">lang</span>=<span class="string">&quot;json&quot;</span>&gt;</span></span><br><span class="line">   ** 该代码块以Json格式定义插件的属性**</span><br><span class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br><span class="line"></span><br><span class="line">《script lang=&quot;javascript&quot;&gt;</span><br><span class="line">   ** 该代码块以JavaScript 或 Python 格式编写插件功能**</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">window</span> <span class="attr">lang</span>=<span class="string">&quot;html&quot;</span>&gt;</span></span><br><span class="line">   ** 该代码块以HTML 格式编写界面**（适用于window类型插件）</span><br><span class="line"><span class="tag">&lt;/<span class="name">window</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;css&quot;</span>&gt;</span></span><br><span class="line">   ** 该代码块以CSS 格式定义界面样式**（适用于window类型插件）</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">docs</span> <span class="attr">lang</span>=<span class="string">&quot;markdown&quot;</span>&gt;</span></span><br><span class="line">   ** 该代码块以Markdown 格式编写插件文档 **</span><br><span class="line"><span class="tag">&lt;/<span class="name">docs</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">attachment</span> <span class="attr">name</span>=<span class="string">&quot;XXXXX&quot;</span>&gt;</span></span><br><span class="line">   ** 该代码块用于存储文本数据**</span><br><span class="line"><span class="tag">&lt;/<span class="name">attachment</span>&gt;</span></span><br></pre></td></tr></table></figure><br>其中，只有<code>&lt;config&gt;</code>和<code>《script&gt;</code>这两个代码块是必须的，其他块都是可选的。</p>
<h1 id="config块"><a href="#config块" class="headerlink" title="config块"></a>config块</h1><p>使用 <a target="_blank" rel="noopener" href="https://www.json.org/">JSON</a> 或 <a target="_blank" rel="noopener" href="https://yaml.org/">YAML</a> 格式的字段来定义插件的通用属性。<br><code>json</code>格式的配置为（注意JSON本身不支持注释，所以下面#号以后的内容只是为了这里方便说明，实际要去除；一些需要详细解释的字段会在下面单独说明）：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">config</span> <span class="attr">lang</span>=<span class="string">&quot;json&quot;</span>&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;Untitled Plugin&quot;, # 插件名称。它必须是唯一的，以避免与其他插件冲突</span><br><span class="line">  &quot;type&quot;: &quot;web-worker&quot;, # 插件类型，选项有：`web-worker`、`window`、`native-python` 和`web-python`</span><br><span class="line">  &quot;ui&quot;: &quot;image processing&quot;, # 配置在插件下方显示的内容，详细用法将在下面详述</span><br><span class="line">  &quot;url&quot;: &quot;&quot;, # 当前文件的路径，用户从插件存储库安装插件时需使用该url来下载该插件</span><br><span class="line">  &quot;cover&quot;: &quot;&quot;, # 插件封面图片的url，详细用法将在下面详述</span><br><span class="line">  &quot;labels&quot;: [], # 定义一个“labels”列表来分类插件以允许基于语义标签进行搜索或过滤。</span><br><span class="line">  &quot;authors&quot;: [], # 作者姓名列表。</span><br><span class="line">  &quot;license&quot;: &quot;&quot;, # 插件所采用的许可证</span><br><span class="line">  &quot;repository&quot;: &quot;&quot;, # 插件项目存储库的url路径</span><br><span class="line">  &quot;website&quot;: &quot;&quot;, # 插件项目网站的url</span><br><span class="line">  &quot;tags&quot;: [], # 插件所支持的配置标签，详细用法将在下面详述</span><br><span class="line">  &quot;version&quot;: &quot;0.1.0&quot;, # 指定插件版本</span><br><span class="line">  &quot;api_version&quot;: &quot;0.1.6&quot;, # 指定插件所基于的 ImJoy 的 api 版本。</span><br><span class="line">  &quot;description&quot;: &quot;A plugin for image processing.&quot;, # 插件的简短描述</span><br><span class="line">  &quot;flags&quot;: [&quot;functional&quot;], # 用来控制插件行为，详细用法将在下面详述</span><br><span class="line">  &quot;icon&quot;: &quot;extension&quot;, # 定义插件菜单的图标，详细用法将在下面详述</span><br><span class="line">  &quot;inputs&quot;: null, # 定义用来触发插件的输入条件，比如拖进来一个文件，详细用法将在下面详述</span><br><span class="line">  &quot;outputs&quot;: null, # 定义插件的输出，详细用法将在下面详述</span><br><span class="line">  &quot;cmd&quot;: &quot;python&quot;, # 仅适用于python插件，用于运行插件的命令。默认情况下，它将使用`python`运行。根据安装的不同，它也可能是“python3”或“python27”等。</span><br><span class="line">  &quot;env&quot;: null, # 仅适用于python插件，虚拟环境或docker镜像命令，用于创建插件运行的环境。具体用法见另一篇博客的“指定依赖”一节</span><br><span class="line">  &quot;permissions&quot;: [], # 指定权限，详细用法将在下面详述</span><br><span class="line">  &quot;requirements&quot;: [], # 定义插件依赖，具体用法见另一篇博客的“指定依赖”一节</span><br><span class="line">  &quot;dependencies&quot;: [], # 指定当前插件依赖的其他ImJoy插件，详细用法将在下面详述</span><br><span class="line">  &quot;default&quot;: &#123;&#125;, # 仅适用于window插件，定义窗口的默认值，详细用法将在下面详述</span><br><span class="line">  &quot;base_frame&quot;: null, # 仅适用于window插件，定义在该窗口插件中内嵌的外部html的url路径，详细用法将在下面详述</span><br><span class="line">  &quot;runnable&quot;: true # 定义插件是否可以通过点击插件菜单来执行，详细用法将在下面详述</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br></pre></td></tr></table></figure><br>而<code>yaml</code>格式的配置为:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">config</span> <span class="attr">lang</span>=<span class="string">&quot;yaml&quot;</span>&gt;</span></span><br><span class="line">name: Untitled Plugin</span><br><span class="line">type: web-worker</span><br><span class="line">tags: []</span><br><span class="line">ui: image processing</span><br><span class="line">cover: &#x27;&#x27;</span><br><span class="line">version: 0.1.0</span><br><span class="line">api_version: 0.1.6</span><br><span class="line">description: A plugin for image processing.</span><br><span class="line">icon: extension</span><br><span class="line">inputs: </span><br><span class="line">outputs: </span><br><span class="line">env: </span><br><span class="line">permissions: []</span><br><span class="line">requirements: []</span><br><span class="line">dependencies: []</span><br><span class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="cover字段"><a href="#cover字段" class="headerlink" title="cover字段"></a>cover字段</h2><p><code>cover</code>字段用来指定插件封面图片的url，它将显示在图像安装对话框中，以及插件文档的顶部。<br>示例：<code>&quot;cover&quot;:&quot;https://imjoy.io/static/img/imjoy-card-plain.png&quot;</code>。<br>建议封面图片的纵横比为 16:9。 它可以托管在 GitHub 存储库中，此时应该使用图像的绝对路径URL。<br>可以使用多个图像，将 <code>cover</code> 设置为一个数组即可：<code>&quot;cover&quot;: [&quot;url_to_image1&quot;, &quot;url_to_image2&quot;, &quot;url_to_image3&quot;]</code>。</p>
<h2 id="tags字段"><a href="#tags字段" class="headerlink" title="tags字段"></a>tags字段</h2><p><code>tags</code>字段用来定义插件所支持的配置标签。<br>（注意：这里的<code>tags</code>不是用于分类或分组目的，分类或分组可以使用<code>labels</code>字段实现。）<br>这些定义的标签为插件执行提供了灵活的可配置的模式，比如可以配置插件是在 CPU 或 GPU 上运行。<br>以Unet Segmentation这个插件为例，如下是安装该插件时的界面及其源代码：<br><img src="https://user-images.githubusercontent.com/6218739/144185494-b3db5ddc-de2d-4d3b-a9fe-6e8549e062a5.png" alt="unet-tags"><br>可以看出，该插件在tags字段中定义了<code>CPU</code>、<code>GPU</code>、<code>Windows-CPU</code>、<code>Windows-GPU</code>四个标签，那么相应地，就可以在后面的环境配置和依赖库解析时，对其进行不同的要求：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;env&quot;</span>: </span><br><span class="line">&#123;<span class="string">&quot;CPU&quot;</span>: [<span class="string">&quot;conda config --add channels conda-forge&quot;</span>, <span class="string">&quot;conda create -n tf-cpu python=3.6&quot;</span>],</span><br><span class="line"><span class="string">&quot;GPU&quot;</span>: [<span class="string">&quot;conda config --add channels conda-forge&quot;</span>, <span class="string">&quot;conda create -n tf-gpu python=3.6&quot;</span>],</span><br><span class="line"><span class="string">&quot;Windows-CPU&quot;</span>: [<span class="string">&quot;conda config --add channels conda-forge&quot;</span>, <span class="string">&quot;conda create -n tf-cpu python=3.6&quot;</span>],</span><br><span class="line"><span class="string">&quot;Windows-GPU&quot;</span>: [<span class="string">&quot;conda config --add channels conda-forge&quot;</span>, <span class="string">&quot;conda create -n tf-gpu python=3.6&quot;</span>]</span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;requirements&quot;</span>: </span><br><span class="line">&#123;<span class="string">&quot;CPU&quot;</span>: [<span class="string">&quot;repo:https://github.com/zhixuhao/unet&quot;</span>, <span class="string">&quot;pip:h5py scikit-image keras==2.1.4 numpy==1.18.0 tensorflow==1.15.4&quot;</span>],</span><br><span class="line"><span class="string">&quot;GPU&quot;</span>: [<span class="string">&quot;repo:https://github.com/zhixuhao/unet&quot;</span>, <span class="string">&quot;pip:h5py scikit-image keras==2.1.4 numpy==1.18.0 tensorflow-gpu==1.15.4&quot;</span>],</span><br><span class="line"><span class="string">&quot;Windows-CPU&quot;</span>: [<span class="string">&quot;repo:https://github.com/zhixuhao/unet&quot;</span>, <span class="string">&quot;pip:h5py scikit-image keras==2.1.4 numpy==1.18.0 tensorflow==1.15.4&quot;</span>],</span><br><span class="line"><span class="string">&quot;Windows-GPU&quot;</span>: [<span class="string">&quot;repo:https://github.com/zhixuhao/unet&quot;</span>, <span class="string">&quot;pip:h5py scikit-image keras==2.1.4 numpy==1.18.0 tensorflow-gpu==1.15.4&quot;</span>]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><br>如果插件定义了tags，它们将出现在代码编辑器的顶部以及安装过程中。如果使用<code>url</code>分发插件，还可以具体指定插件将使用哪个标签安装。<br>在<code>&lt;config&gt;</code>代码块中，以下字段可以被tags所配置：<code>env</code>、<code>requirements</code>、<code>dependencies</code>、<code>icon</code>、<code>ui</code>、<code>type</code>、<code>flags</code>、<code>cover</code>。<br><code>&lt;script&gt;</code>代码块也可以被tags配置，此时必须把<code>tags</code>字段作为属性放到<code>&lt;script&gt;</code>中，同时注意原来的<code>lang</code>属性还要保留。比如：开发者可能想在插件的稳定版和开发版之间自由切换。那么可以定义这样的标签： <code>&quot;tags&quot;: [&quot;stable&quot;, &quot;dev&quot;]</code>，同时定义两个脚本块：<code>&lt;script lang=&quot;python&quot; tag=&quot;stable&quot;&gt;</code> 和 <code>&lt;script lang=&quot;python &quot;tag=&quot;dev&quot;&gt;</code>。在开发和测试插件时，ImJoy 编辑器会识别插件有多个标签，此时选择其中一个标签，那么加载插件时就会加载此标签下的相应代码。</p>
<h2 id="ui字段"><a href="#ui字段" class="headerlink" title="ui字段"></a>ui字段</h2><p><code>ui</code>字段是为了配置在插件下方显示的内容。<br>以HPA Classification插件为例，安装完成后，在ImJoy的左侧插件区，点击插件右侧的箭头，会看到<code>ui</code>字段定义的内容：<br><img src="https://user-images.githubusercontent.com/6218739/144191940-48d0ab2b-5c8c-4607-9543-b05daf28a1ee.png" alt="hpa-ui"></p>
<p>以下是<code>ui</code>字段的一个详细用法示例：<br><img src="https://user-images.githubusercontent.com/6218739/144377959-51a13531-9ce3-4752-8c13-7d841bcec51d.png" alt="ui-full"><br>包含了各种输入框的用法，以及同一个ui的三种写法：<code>option1</code>、<code>option11</code>、<code>option12</code>。<br>对于每个元素，都定义了一个唯一的<code>id</code>，然后可以使用 <code>ctx.config.id</code>来访问插件中此元素的值。</p>
<h2 id="flags字段"><a href="#flags字段" class="headerlink" title="flags字段"></a>flags字段</h2><p><code>flags</code>字段定义一个标志数组，用来控制插件的行为。<br>一个重要的flag是 <code>functional</code>：<code>functional</code>标志表示插件暴露的所有api函数都是<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000039807327">纯函数</a>。这意味着它们的输出将仅取决于输入。同时纯函数保证在调用任何插件 api 函数之后对插件没有副作用。这意味着应该避免修改插件函数中的全局变量（不过一个例外是<code>setup()</code> 函数）。<br>使一个插件具有<code>functional</code>标志，可以使调试更容易，重要的是其他插件或工作流调用<code>functional</code>插件时能严格重现其行为。<code>functional</code>插件对于 ImJoy 在将来执行并行化和批处理时至关重要。<br>作者还没有编写真正的测试来验证插件是否是<code>functional</code>，所以当前需要确定自己的插件仅包含纯函数时才添加 <code>functional</code> 标志。<br>此外，<code>flags</code>还支持运行时控制。这些标志允许用户界面和插件引擎如何处理 ImJoy 实例：</p>
<ul>
<li><code>single-instance</code>（仅适用于 python 插件）：在此标志下，Python引擎只会运行一个插件进程，即使从不同的浏览器或工作区调用了该插件。在这种情况下，不同的 ImJoy 实例将共享相同的插件进程。当插件需要独占有限的资源（例如 GPU）时，这尤其有用。</li>
<li><code>allow-detach</code>（仅适用于 python 插件）：在此标志下，允许插件进程与用户界面分离。这意味着当用户界面断开或关闭时，插件不会被杀死。然而，为了重新连接到这个进程，需要从同一个浏览器和相同的工作区重新连接，或添加 <code>single-instance</code> 标志。比如：如果想制作一个插件，它可以在没有用户界面的情况下在后台运行，那就对该插件赋予<code>&quot;flags&quot;: [&quot;single-instance&quot;, &quot;allow-detach&quot;]</code>。那么重新启动时，用户界面将自动重新连接到此进程。需要注意的是，如果多个 ImJoy 实例附加到此插件进程，每个实例都会调用 <code>setup()</code> 函数。这可能会导致冲突，因此建议 (1) 将与接口相关的代码保留在 <code>setup()</code> 中，例如<code>api.register()</code>; (2)将只想每个进程运行一次的代码移动到插件类的<code>__init__</code> 函数中。</li>
</ul>
<h2 id="icon字段"><a href="#icon字段" class="headerlink" title="icon字段"></a>icon字段</h2><p>定义插件菜单中使用的图标。可以选择以下格式：<br>（1）在<a target="_blank" rel="noopener" href="https://material.io/tools/icons/">https://material.io/tools/icons/</a>找到图标，直接使用指定的名称即可；<br><img src="https://user-images.githubusercontent.com/6218739/144605127-ece26296-0933-4534-a798-cba6c4f0ace5.png" alt="icon"><br>实测使用该网站上的图标名称时，不能使用带空格的名称，以及全部要用小写。<br>（2）可以直接复制粘贴emoji符号，例如从<a target="_blank" rel="noopener" href="https://getemoji.com/">这里</a>。<br><img src="https://user-images.githubusercontent.com/6218739/144605559-f3a9798b-23e1-4427-8185-3de397873d6c.png" alt="emoji"><br>（3）指定 JPEG、PNG 或 GIF 格式图像的 URL，推荐大小：64x64。<br><img src="https://user-images.githubusercontent.com/6218739/144605914-ada14870-30c1-45f8-b563-db5439a4710f.png" alt="gif-icon"><br>（4）如果设置为<code>null</code>或<code>&quot;&quot;</code>，它会默认使用第一条的material icon的<code>extension</code>图标。</p>
<h2 id="inputs字段"><a href="#inputs字段" class="headerlink" title="inputs字段"></a>inputs字段</h2><p>定义用于触发插件的输入条件，包括文件输入或数据匹配模式。例如，当用户将某个后缀的文件拖放到工作区时，相应的插件被激活。<br>基本上可以使用标准的 json 模式（<a target="_blank" rel="noopener" href="http://json-schema.org/）来验证输入数据对象。例如，要定义插件使用">http://json-schema.org/）来验证输入数据对象。例如，要定义插件使用</a> png 文件，可以指定 <code>&quot;inputs&quot;: &#123;&quot;type&quot;: &quot;object&quot;, &quot;properties&quot;: &#123;&quot;name&quot;: &#123;&quot;type&quot;: &quot;string&quot;, &quot;maxLength&quot; : 100&#125;&#125;, &quot;required&quot;: [&quot;name&quot;]&#125;</code>。在后台，ImJoy使用 <a target="_blank" rel="noopener" href="https://github.com/epoberezkin/ajv">ajv</a> 库来验证对象。为了简化模式的使用，还使用以下关键字扩展了标准的 json 模式：<br>（1）<code>file</code>：对于文件对象，使用 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Media_type">mime types</a> 或文件扩展名。可以使用以下关键字之一：</p>
<ul>
<li><code>mime</code>：常见的 mime 类型字符串（或列表）。例如<code>&#123;&quot;file&quot;: &#123;&quot;mime&quot;: &quot;image/png&quot;&#125;&#125;</code>。还可以指定一个 mime 类型列表：<code>&quot;mime&quot;: [&quot;image/png&quot;, &quot;image/jpeg&quot;, &quot;image/tiff&quot;]</code>。</li>
<li><code>ext</code>：文件扩展名字符串（或列表）。例如<code>&#123;&quot;file&quot;: &#123;&quot;ext&quot;: &quot;png&quot;&#125;&#125;</code>，或者可以指定一个扩展名列表：<code>&#123;&quot;file&quot;: &#123;&quot;ext&quot;: [&quot;png&quot;, &quot;jpg&quot;, &quot; jpeg&quot;]&#125;&#125;</code>。</li>
</ul>
<p>（2）<code>ndarray</code>：例如<code>&#123;&quot;ndarray&quot;: &#123;&quot;shape&quot;: [10, 10], &quot;dtype&quot;: &quot;uint8&quot;&#125;&#125;</code>。</p>
<ul>
<li><code>shape</code>：数组的形状。需要为每个维度指定一个数字，或者使用 <code>null</code> 表示该维度的任何大小。例如：<code>&#123;&quot;type&quot;: &quot;ndarray&quot;, &quot;shape&quot;: [10, 10]&#125;</code>，或者如果第一维可以是任意大小：<code>&#123;&quot;type&quot;: &quot;ndarray&quot;, &quot;shape&quot;: [null，10]&#125;</code></li>
<li><code>dtype</code>：数组的数据类型。例如：<code>&#123;&quot;ndarray&quot;: &#123;&quot;dtype&quot;: &quot;uint8&quot;&#125;&#125;</code> 或者如果同时支持 <code>uint8</code> 和 <code>float32</code>：<code>&#123;&quot;ndarray&quot;: &#123;&quot;dtype&quot;: [&quot;uint8&quot;, &quot; float32&quot;]&#125;&#125;</code>。支持的 <code>dtype</code> 是：<code>[&quot;int8&quot;, &quot;int16&quot;, &quot;int32&quot;, &quot;uint8&quot;, &quot;uint16&quot;, &quot;uint32&quot;, &quot;float32&quot;, &quot;float64&quot;, &quot;array&quot;]</code>。</li>
<li><code>ndim</code>：维数。例如：<code>&#123;&quot;ndarray&quot;: &#123;&quot;ndim&quot;: 2&#125;&#125;</code> 或者如果同时支持 2D 和 3D：<code>&#123;&quot;ndarray&quot;: &#123;&quot;ndim&quot;: [2, 3]&#125;&#125;</code></li>
</ul>
<p>（3）对于通过 http 或其他协议暴露的远程 url，<code>&#123;&quot;type&quot;: &quot;url&quot;, &quot;extension&quot;: &quot;zarr&quot;&#125;</code>。<br>另外需注意，如果在模式中使用正则表达式来验证字符串，可能需要设置 <code>maxLength</code>，否则它会非常慢，甚至在验证长字符串时可能会崩溃。例如，如果想匹配一个包含以<code>.tiff</code>结尾的<code>file_name</code>的对象，那么可以这样设置：<code>&#123;&quot;properties&quot;: &#123;&quot;file_name&quot;: &#123;&quot;type&quot;: &quot;string&quot;,&quot;pattern&quot;: &quot;.*\\.tiff$&quot;, &quot;maxLength&quot;: 1024&#125;&#125;&#125;</code>。</p>
<h2 id="outputs字段"><a href="#outputs字段" class="headerlink" title="outputs字段"></a>outputs字段</h2><p>使用 json-schema 语法 (<a target="_blank" rel="noopener" href="http://json-schema.org/">http://json-schema.org/</a>) 定义输出。<br>格式与<code>inputs</code>相同。</p>
<h2 id="permissions字段"><a href="#permissions字段" class="headerlink" title="permissions字段"></a>permissions字段</h2><p>对于 <code>window</code> 插件，可以声明以下权限：</p>
<ul>
<li>摄像头camera</li>
<li>音乐数字接口midi</li>
<li>地理位置geolocation</li>
<li>麦克风microphone</li>
<li>加密媒体encryted-media</li>
<li>全屏full-screen</li>
<li>支付请求payment-request</li>
</ul>
<p>例如，如果某个<code>window</code>插件需要网络摄像头的访问权限，需要添加以下权限：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">“permissions”：[“camera”]，</span><br></pre></td></tr></table></figure><br>注意，摄像头和麦克风等设备只有在 ImJoy 为 <code>https</code> 时才能工作，这意味着如果是从<a target="_blank" rel="noopener" href="https://imjoy.io">https://imjoy.io</a> 运行这个插件，那么是可以工作的，但如果使用的是自己托管的以<code>http</code>协议访问的ImJoy服务器，那么它就不会运行。解决方法是使用隧道服务，例如使用 <a target="_blank" rel="noopener" href="https://telebit.cloud">Telebit</a> 或 <a target="_blank" rel="noopener" href="https://ngrok.com">ngrok</a> 将 <code>http</code> url 转换为 <code>https</code>。</p>
<h2 id="dependencies字段"><a href="#dependencies字段" class="headerlink" title="dependencies字段"></a>dependencies字段</h2><p>该字段指定当前插件依赖的其他ImJoy插件。这些所依赖的插件将在安装过程中自动安装。<br>要定义依赖项，请使用以下格式：<br>1) 对于没有tag的依赖，使用 <code>REPOSITORY:PLUGIN_NAME</code> 或 <code>PLUGIN_URL</code>，例如：<code>imjoy-team/imjoy-plugins:Image Window</code>；<br>2) 对于带有指定tag的依赖，使用<code>REPOSITORY:PLUGIN_NAME@TAG</code> 或<code>PLUGIN_URL@TAG</code>，例如：<code>imjoy-team/imjoy-plugins:Unet Segmentation@GPU</code>。在这种情况下，标签“GPU”用于指定托管在 GitHub 存储库<code>imjoy-team/imjoy-plugins</code>（<a target="_blank" rel="noopener" href="https://github.com/imjoy-team/）上的名为`Unet">https://github.com/imjoy-team/）上的名为`Unet</a> Segmentation<code>的插件。如果插件没有托管在GitHub上或者该GitHub仓库不是ImJoy插件仓库的标准格式（即在仓库的根目录中没有定义</code>manifest.imjoy.json<code>文件），则可以直接使用 url，例如：</code><a target="_blank" rel="noopener" href="https://github.com/imjoy-team/imjoy-demo-plugins/blob/master/repository/3dDemos.imjoy.html`（标签可以用`@TAG`添加）。">https://github.com/imjoy-team/imjoy-demo-plugins/blob/master/repository/3dDemos.imjoy.html`（标签可以用`@TAG`添加）。</a></p>
<h2 id="default字段"><a href="#default字段" class="headerlink" title="default字段"></a>default字段</h2><p>仅适用于<code>window</code>插件，用于定义一个对象的默认值。<br>例如，可以通过设置 <code>&quot;defaults&quot;: &#123;&quot;w&quot;: 10, &quot;h&quot;: 7&#125;</code> 来指定默认窗口大小。<br>或者，可以使用 <code>&quot;defaults&quot;: &#123;&quot;fullscreen&quot;: true&#125;</code> 默认使窗口处于全屏模式。<br>要使窗口默认处于独立模式（全屏并与工作区分离），可以设置 <code>&quot;defaults&quot;: &#123;&quot;standalone&quot;: true&#125;</code>。<br>如果要将窗口显示为对话框，设置 <code>&quot;defaults&quot;: &#123;&quot;as_dialog&quot;: true&#125;</code>。</p>
<h2 id="base-frame字段"><a href="#base-frame字段" class="headerlink" title="base_frame字段"></a>base_frame字段</h2><p>仅适用于window插件，定义在该窗口插件中内嵌的外部html的url路径。<br>虽然可以在<code>base_frame</code>字段中使用任何其他网站的url，但是为了Imjoy内核可以与该html进行通信，它需要满足以下条件：<br>（1）该网站需要允许嵌入，不过这并不总是能够有效，因为它们可能有严格的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">内容安全策略</a>的限制，通常是通过<code>X-Content-Security-Policy</code>的header，或页面中的 <code>&lt;meta&gt;</code> 元素来实现该限制。要解决这个问题，如果你可以控制该站点，需要将 <code>*.imjoy.io</code> 添加到header中。<br>（2）在<code>base_frame</code>里面，需要开启<code>imjoy-rpc</code>协议。这可以按照 <a target="_blank" rel="noopener" href="https://github.com/imjoy-team/ImJoy-core">imjoy-core</a> 仓库中的说明轻松搞定。参考“ImJoy RPC library to your website”这一部分进行操作，基本上就是需要导入<code>imjoy-loader</code>，并加载imjoy RPC库，然后导出想公开给其他ImJoy插件的api。<br>完成上述操作后，就可以将第三方网站集成为一个ImJoy插件。</p>
<h2 id="runnable"><a href="#runnable" class="headerlink" title="runnable"></a>runnable</h2><p>定义插件是否可以通过点击插件菜单来执行（默认情况下，所有插件都是<code>runnable</code>）。<br>对于不单独运行的辅助插件，（例如，<code>native-python</code> 插件可以被<code>window</code> 插件调用，不一定由用户直接执行），设置<code>&quot;runnable&quot;: false</code> 会向下移动插件到插件菜单的底部，并使其不可点击。</p>
<h1 id="docs块"><a href="#docs块" class="headerlink" title="docs块"></a>docs块</h1><p>在该块中，使用 Markdown 语言来编写插件文档。<br>Markdown语言的介绍见<a target="_blank" rel="noopener" href="https://guides.github.com/features/mastering-markdown/">这里</a>。<br>注意，如果在文档中提供的链接将在另一个选项卡中打开，则 ImJoy 实例将继续运行。</p>
<h1 id="window块"><a href="#window块" class="headerlink" title="window块"></a>window块</h1><p>在该块中，使用HTML 代码来编写窗口的显示内容。<br>ImJoy 使用 vue.js 来解析插件文件，它强制要求仅有根元素存在于模板中。这意味着在<code>&lt;window&gt;</code>块中必须使用一个<code>div</code>来包装所有节点：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">window</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span> line 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span> line 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">window</span>&gt;</span></span><br></pre></td></tr></table></figure><br>如下则不可以：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">window</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span> line 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span> line 2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">window</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h1 id="style块"><a href="#style块" class="headerlink" title="style块"></a>style块</h1><p>在该块中，使用CSS 代码来编写窗口显示内容的样式。</p>
<p>以MNIST CNN插件为例，给出以上<code>&lt;window&gt;</code>块和<code>style</code>块的一个说明：<br><img src="https://user-images.githubusercontent.com/6218739/144701434-77ef0f5c-f952-4bdf-aec7-c5c7209ae7cb.png" alt="html-css"></p>
<h1 id="script块"><a href="#script块" class="headerlink" title="script块"></a>script块</h1><p>该块中包含实际的插件代码。<br>插件可以用 JavaScript 或 Python 编写，一个最小的插件需要实现两个函数：<code>setup()</code> 和 <code>run()</code>。有一个例外是那种辅助插件（用 <code>&quot;runnable&quot;: false</code> 指定），它不需要 <code>run()</code> 函数。<br>（1）<code>setup()</code> 函数：在插件第一次加载和初始化时执行它。<br>（2）<code>run()</code> 函数：每次执行插件时都会调用。执行时，一个带有上下文（名为“ctx”）的对象object（Javascript插件）或字典dictionary（Python插件）将被传递到函数中。返回的结果将显示为一个新窗口或传递给工作流中的下一个 <code>op</code>。更多内容请参见另一篇博客的 <a href="development?id=plugin-during-runtime">运行时插件</a> 部分。<br>（3）可选：<code>resume()</code> 函数：仅适用于带有 <code>allow-detach</code> 标志的可分离 <code>native-python</code> 插件。当ImJoy 重新连接到正在运行的插件进程时，<code>resume()</code> 将被调用（而不是 <code>setup()</code>） 。<br>（4）可选：<code>update()</code> 函数：将在操作的任何设置更改时调用。<br>（5）可选：<code>exit()</code>函数：当插件被杀死时，函数<code>exit</code> 将被调用。</p>
<p><code>&lt;script&gt;</code> 块的 <code>lang</code> 属性用于指定使用的编程语言：<br>（1）对于 Javascript，使用 <code>&lt;script lang=&quot;javascript&quot;&gt; ... &lt;/script&gt;</code><br>（2）对于 Python，使用 <code>&lt;script lang=&quot;python&quot;&gt; ... &lt;/script&gt;</code><br>对于 Javascript 插件，还支持 ES 模块，要启用它，将 <code>type=&quot;module&quot;</code> 添加到<code>&lt;script&gt;</code>标签中。例如：<code>&lt;script type=&quot;module&quot; lang=&quot;javascript&quot;&gt;...&lt;/script&gt;</code>。<br><code>&lt;script&gt;</code> 也支持 <code>tags</code>，有关信息参考上面的<code>tags</code>字段的解析。</p>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechat_reward.png" alt="Xin-Bo Qi(亓欣波) WeChat Pay">
        <p>WeChat Pay</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/ImJoy/" rel="tag"># ImJoy</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/12/01/ImJoy_3/" rel="prev" title="开源深度学习计算平台ImJoy解析：3 -- 插件概览">
      <i class="fa fa-chevron-left"></i> 开源深度学习计算平台ImJoy解析：3 -- 插件概览
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/12/05/ImJoy_5/" rel="next" title="开源深度学习计算平台ImJoy解析：5 -- 插件开发流程">
      开源深度学习计算平台ImJoy解析：5 -- 插件开发流程 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="nav-number">1.</span> <span class="nav-text">参考文献</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A6%82%E8%A7%88"><span class="nav-number">2.</span> <span class="nav-text">概览</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#config%E5%9D%97"><span class="nav-number">3.</span> <span class="nav-text">config块</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#cover%E5%AD%97%E6%AE%B5"><span class="nav-number">3.1.</span> <span class="nav-text">cover字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tags%E5%AD%97%E6%AE%B5"><span class="nav-number">3.2.</span> <span class="nav-text">tags字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ui%E5%AD%97%E6%AE%B5"><span class="nav-number">3.3.</span> <span class="nav-text">ui字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#flags%E5%AD%97%E6%AE%B5"><span class="nav-number">3.4.</span> <span class="nav-text">flags字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#icon%E5%AD%97%E6%AE%B5"><span class="nav-number">3.5.</span> <span class="nav-text">icon字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#inputs%E5%AD%97%E6%AE%B5"><span class="nav-number">3.6.</span> <span class="nav-text">inputs字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#outputs%E5%AD%97%E6%AE%B5"><span class="nav-number">3.7.</span> <span class="nav-text">outputs字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#permissions%E5%AD%97%E6%AE%B5"><span class="nav-number">3.8.</span> <span class="nav-text">permissions字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dependencies%E5%AD%97%E6%AE%B5"><span class="nav-number">3.9.</span> <span class="nav-text">dependencies字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#default%E5%AD%97%E6%AE%B5"><span class="nav-number">3.10.</span> <span class="nav-text">default字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#base-frame%E5%AD%97%E6%AE%B5"><span class="nav-number">3.11.</span> <span class="nav-text">base_frame字段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#runnable"><span class="nav-number">3.12.</span> <span class="nav-text">runnable</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#docs%E5%9D%97"><span class="nav-number">4.</span> <span class="nav-text">docs块</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#window%E5%9D%97"><span class="nav-number">5.</span> <span class="nav-text">window块</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#style%E5%9D%97"><span class="nav-number">6.</span> <span class="nav-text">style块</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#script%E5%9D%97"><span class="nav-number">7.</span> <span class="nav-text">script块</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Xin-Bo Qi(亓欣波)"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Xin-Bo Qi(亓欣波)</p>
  <div class="site-description" itemprop="description">Digitize everything to realize Digitalization!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">145</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/qixinbo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qixinbo" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:qixinbo@gmail.com" title="E-Mail → mailto:qixinbo@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/qixinbo" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;qixinbo" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fas fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.tsinghua.edu.cn/" title="https:&#x2F;&#x2F;www.tsinghua.edu.cn" rel="noopener" target="_blank">THU</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.imr.cas.cn/" title="http:&#x2F;&#x2F;www.imr.cas.cn" rel="noopener" target="_blank">IMR</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.sdu.edu.cn/" title="http:&#x2F;&#x2F;www.sdu.edu.cn" rel="noopener" target="_blank">SDU</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://liam0205.me/" title="http:&#x2F;&#x2F;liam0205.me&#x2F;" rel="noopener" target="_blank">黄晨成</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xin-Bo Qi(亓欣波)</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://qixinbo.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "http://qixinbo.github.io/2021/12/04/ImJoy_4/";
    this.page.identifier = "2021/12/04/ImJoy_4/";
    this.page.title = "开源深度学习计算平台ImJoy解析：4 -- 插件文件格式";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://qixinbo.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
